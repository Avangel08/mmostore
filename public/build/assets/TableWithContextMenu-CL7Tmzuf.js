import{d as o,j as e,R as w,B as ge}from"./ContextMenuProvider-C-NiMYiY.js";import{u as A,g as J,a as xe,b as K,c as Z,T as _,f as V,r as ee}from"./index-D81Ll3x1.js";import{u as te}from"./useTranslation-BNKLQupd.js";import{R as f}from"./Row-DLeSa6Vj.js";import{C as se}from"./Card-CNjXVCPF.js";import{C as ne}from"./Col-B9d4cz6j.js";import{B as N}from"./Button-Dx-n7Ou5.js";import{S as he}from"./react-select.esm-BF0MRd_6.js";import{u as je}from"./useQueryParam-BLtftc8W.js";const pe=({column:n})=>{const a=n.getFilterValue();return e.jsxs(e.Fragment,{children:[e.jsx(ae,{type:"text",value:a??"",onChange:r=>n.setFilterValue(r),placeholder:"Search...",className:"w-36 border shadow rounded",list:n.id+"list"}),e.jsx("div",{className:"h-1"})]})},ae=({value:n,onChange:a,debounce:r=500,...c})=>{const[d,m]=o.useState(n);return o.useEffect(()=>{m(n)},[n]),o.useEffect(()=>{const u=setTimeout(()=>{a(d)},r);return()=>clearTimeout(u)},[r,d]),e.jsx("input",{...c,value:d,id:"search-bar-0",className:"form-control border-0 search",onChange:u=>m(u.target.value)})},be=({columns:n,data:a,isGlobalFilter:r,customPageSize:c,borderClass:d,tableClass:m,theadClass:u,trClass:O,thClass:$,divClass:B,SearchPlaceholder:G,onSubmit:H=p=>{p.preventDefault()},onRowContextMenu:h})=>{const{t:p}=te(),[C,L]=o.useState([]),[P,k]=o.useState(""),M=(i,l,U,F)=>{const T=ee(i.getValue(l),U);return F({itemRank:T}),T.passed},y=A({columns:n,data:a,filterFns:{fuzzy:M},state:{columnFilters:C,globalFilter:P},onColumnFiltersChange:L,onGlobalFilterChange:k,globalFilterFn:M,getCoreRowModel:Z(),getFilteredRowModel:K(),getPaginationRowModel:xe(),getSortedRowModel:J()}),{getHeaderGroups:b,getRowModel:I,getCanPreviousPage:Y,getCanNextPage:R,getPageOptions:z,setPageIndex:j,nextPage:v,previousPage:g,setPageSize:E,getState:S}=y;o.useEffect(()=>{Number(c)&&E(Number(c))},[c,E]);const Q=(i,l)=>{h&&h(i,l)};return e.jsxs(o.Fragment,{children:[r&&e.jsx(f,{className:"mb-3",children:e.jsx(se.Body,{className:"border border-dashed border-end-0 border-start-0",children:e.jsx("form",{onSubmit:H,children:e.jsx(f,{children:e.jsx(ne,{sm:5,children:e.jsxs("div",{className:"search-box me-2 mb-2 d-inline-block col-12",children:[e.jsx(ae,{value:P??"",onChange:i=>k(String(i)),placeholder:G}),e.jsx("i",{className:"bx bx-search-alt search-icon"})]})})})})})}),e.jsx("div",{className:B,children:e.jsxs(_,{hover:!0,className:m,bordered:d,children:[e.jsx("thead",{className:u,children:b().map(i=>e.jsx("tr",{className:O,children:i.headers.map(l=>e.jsx("th",{className:$,onClick:l.column.getToggleSortingHandler(),children:l.isPlaceholder?null:e.jsxs(w.Fragment,{children:[V(l.column.columnDef.header,l.getContext()),{asc:" ",desc:" "}[l.column.getIsSorted()]??null,l.column.getCanFilter()?e.jsx("div",{children:e.jsx(pe,{column:l.column,table:y})}):null]})},l.id))},i.id))}),e.jsx("tbody",{children:I().rows.map(i=>e.jsx("tr",{onContextMenu:l=>Q(l,i.original),style:{cursor:h?"context-menu":"default"},children:i.getVisibleCells().map(l=>e.jsx("td",{children:V(l.column.columnDef.cell,l.getContext())},l.id))},i.id))})]})}),e.jsxs(f,{className:"align-items-center mt-2 g-3 text-center text-sm-start",children:[e.jsx("div",{className:"col-sm",children:e.jsxs("div",{className:"text-muted",children:[p("Showing"),e.jsx("span",{className:"fw-semibold ms-1",children:I().rows.length})," ",p("on")," ",e.jsx("span",{className:"fw-semibold",children:a.length})," ",p("results")]})}),e.jsx("div",{className:"col-sm-auto",children:e.jsxs("ul",{className:"pagination pagination-separated pagination-md justify-content-center justify-content-sm-start mb-0",children:[e.jsx("li",{className:Y()?"page-item":"page-item disabled",children:e.jsx(N,{className:"page-link",onClick:g,variant:"link",children:"<"})}),z().map((i,l)=>e.jsx(w.Fragment,{children:e.jsx("li",{className:"page-item",children:e.jsx(N,{variant:"link",className:S().pagination.pageIndex===i?"page-link active":"page-link",onClick:()=>j(i),children:i+1})})},l)),e.jsx("li",{className:R()?"page-item":"page-item disabled",children:e.jsx(N,{variant:"link",className:"page-link",onClick:v,children:">"})})]})})]})]})},fe=({column:n})=>{const a=n.getFilterValue();return e.jsxs(e.Fragment,{children:[e.jsx(le,{type:"text",value:a??"",onChange:r=>n.setFilterValue(r),placeholder:"Search...",className:"w-36 border shadow rounded",list:n.id+"list"}),e.jsx("div",{className:"h-1"})]})},le=({value:n,onChange:a,debounce:r=500,...c})=>{const[d,m]=o.useState(n);return o.useEffect(()=>{m(n)},[n]),o.useEffect(()=>{const u=setTimeout(()=>{a(d)},r);return()=>clearTimeout(u)},[r,d]),e.jsx("input",{...c,value:d,id:"search-bar-0",className:"form-control border-0 search",onChange:u=>m(u.target.value)})},Ne=({columns:n,data:a,isGlobalFilter:r,customPageSize:c,borderClass:d,tableClass:m,theadClass:u,trClass:O,thClass:$,divClass:B,SearchPlaceholder:G,onSubmit:H=b=>{b.preventDefault()},onReloadTable:h,perPageEntries:p=[10,50,100,200],onRowContextMenu:C,divStyle:L,tableStyle:P,maxHeight:k="500px",keyPageParam:M="page",keyPerPageParam:y="perPage"})=>{const{t:b}=te(),[I,Y]=o.useState([]),[R,z]=o.useState(""),j=je(),v=(j==null?void 0:j[M])??"1",g=(j==null?void 0:j[y])??"10",[E,S]=o.useState({value:g,label:g}),[Q,i]=w.useState({pageIndex:Number(v)-1,pageSize:Number(g)}),l=(t,s,x,D)=>{const q=ee(t.getValue(s),x);return D({itemRank:q}),q.passed},U=(t,s)=>{C&&C(t,s)},F=A({columns:n,data:(a==null?void 0:a.data)??[],filterFns:{fuzzy:l},state:{columnFilters:I,globalFilter:R,pagination:Q},onColumnFiltersChange:Y,onGlobalFilterChange:z,globalFilterFn:l,getCoreRowModel:Z(),getFilteredRowModel:K(),manualPagination:!0,getSortedRowModel:J(),rowCount:(a==null?void 0:a.total)??0,onPaginationChange:t=>{if(h){const s=F.getState().pagination,x=typeof t=="function"?t(s):t;h(x.pageIndex+1,x.pageSize)}i(t)}}),{getHeaderGroups:T,getRowModel:W,getCanPreviousPage:ie,getCanNextPage:oe,getPageOptions:re,setPageIndex:ce,nextPage:de,previousPage:me,setPageSize:X,getState:ue}=F;return o.useEffect(()=>{Number(c)&&X(Number(c))},[c,X]),o.useEffect(()=>{const t=()=>{i(s=>{const x=Number(v)-1,D=Number(g);return s.pageIndex!==x||s.pageSize!==D?{pageIndex:x,pageSize:D}:s}),S({value:g,label:g})};return window.addEventListener("popstate",t),t(),()=>{window.removeEventListener("popstate",t)}},[]),o.useEffect(()=>{i(t=>{const s=Number(v)-1,x=Number(g);return t.pageIndex!==s||t.pageSize!==x?{pageIndex:s,pageSize:x}:t}),S({value:g,label:g})},[a]),e.jsxs(o.Fragment,{children:[r&&e.jsx(f,{className:"mb-3",children:e.jsx(se.Body,{className:"border border-dashed border-end-0 border-start-0",children:e.jsx("form",{onSubmit:H,children:e.jsx(f,{children:e.jsx(ne,{sm:5,children:e.jsxs("div",{className:"search-box me-2 mb-2 d-inline-block col-12",children:[e.jsx(le,{value:R??"",onChange:t=>z(String(t)),placeholder:G}),e.jsx("i",{className:"bx bx-search-alt search-icon"})]})})})})})}),e.jsx("div",{className:B,style:{...L,position:"relative",maxHeight:k,overflowY:"auto"},children:e.jsxs(_,{hover:!0,className:m,bordered:d,style:P,children:[e.jsx("thead",{className:`${u} sticky-top`,style:{zIndex:10},children:T().map(t=>e.jsx("tr",{className:O,children:t.headers.map(s=>e.jsx("th",{className:`${$} ${s.column.getCanSort()?"sortable-header":""}`,style:{position:"sticky",top:0,zIndex:10,cursor:s.column.getCanSort()?"pointer":"default",userSelect:"none"},onClick:s.column.getToggleSortingHandler(),children:s.isPlaceholder?null:e.jsxs(w.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{children:V(s.column.columnDef.header,s.getContext())}),s.column.getCanSort()&&e.jsx("div",{className:"ms-1",children:s.column.getIsSorted()==="asc"?e.jsx("i",{className:"ri-arrow-up-s-line"}):s.column.getIsSorted()==="desc"?e.jsx("i",{className:"ri-arrow-down-s-line"}):e.jsx("i",{className:"ri-expand-up-down-line text-muted"})})]}),s.column.getCanFilter()?e.jsx("div",{children:e.jsx(fe,{column:s.column,table:F})}):null]})},s.id))},t.id))}),e.jsx("tbody",{children:W().rows.map(t=>e.jsx("tr",{onContextMenu:s=>U(s,t.original),style:{cursor:C?"context-menu":"default"},children:t.getVisibleCells().map(s=>e.jsx("td",{children:V(s.column.columnDef.cell,s.getContext())},s.id))},t.id))})]})}),e.jsxs(f,{className:"align-items-center mt-2 g-3 text-center text-sm-start",children:[e.jsx("div",{className:"col-sm",children:e.jsxs("div",{className:"text-muted",children:[b("Showing"),e.jsx("span",{className:"fw-semibold ms-1",children:W().rows.length})," ",b("on")," ",e.jsx("span",{className:"fw-semibold",children:(a==null?void 0:a.total)??0})," ",b("results")]})}),e.jsx("div",{className:"col-sm-auto",children:e.jsxs("ul",{className:"pagination pagination-separated pagination-md justify-content-center justify-content-sm-start mb-0",children:[e.jsx("li",{className:ie()?"page-item":"page-item disabled",children:e.jsx(N,{className:"page-link",onClick:me,variant:"link",children:"<"})}),re().map((t,s)=>e.jsx(w.Fragment,{children:e.jsx("li",{className:"page-item",children:e.jsx(N,{variant:"link",className:ue().pagination.pageIndex===t?"page-link active":"page-link",onClick:()=>ce(t),children:t+1})})},s)),e.jsx("li",{className:oe()?"page-item":"page-item disabled",children:e.jsx(N,{variant:"link",className:"page-link",onClick:de,children:">"})})]})}),e.jsx("div",{className:"col-lg-auto",children:e.jsx(he,{value:E,onChange:t=>{h&&h(1,t.value),i(s=>({...s,pageSize:t.value})),S(t)},options:p.map(t=>({value:t,label:t})),id:"choices-single-default",className:"js-example-basic-single mb-0",name:"state",menuPlacement:"auto"})})]})]})},Ie=n=>{const a=ge(),r=(c,d)=>{if(n.enableContextMenu&&n.contextMenuOptions&&a){c.preventDefault(),c.stopPropagation();const m=typeof n.contextMenuOptions=="function"?n.contextMenuOptions(d):n.contextMenuOptions;m&&m.length>0&&a.showContextMenu(m,d,{x:c.clientX,y:c.clientY},n.contextMenuConfig)}};return n!=null&&n.isPaginateTable?e.jsx(Ne,{...n,onRowContextMenu:r}):e.jsx(be,{...n,onRowContextMenu:r})};export{Ie as T};
