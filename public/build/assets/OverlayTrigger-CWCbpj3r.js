import{c as ee}from"./useWindow-Dylq_3p2.js";import{P as te}from"./index-C2s_w5-M.js";import{d as r,E as ne,j as v}from"./ContextMenuProvider-BrjgPZ1q.js";import{u as oe}from"./useWillUnmount-DA6AX1ou.js";import{a as se}from"./hook-B5VjoaPr.js";import{o as re,l as ae,u as W}from"./useMergedRefs-BXP-4_VF.js";import{i as ie,f as S,g as ce}from"./TransitionWrapper-B8FtjpGa.js";import{u as N,c as D,d as A}from"./ThemeProvider-DNG-sEMJ.js";import{u as le,g as ue,a as $,b as fe,m as de,c as me}from"./useIsomorphicEffect-B2pXqey9.js";import{u as he}from"./NoopTransition-DPNwEqJn.js";import{u as pe}from"./useEventCallback-Doz_33mN.js";import{u as H,r as ve,h as I}from"./hasClass-DBlHwjze.js";import{u as ge}from"./useEventCallback-Cec6ydz8.js";import{F as L}from"./Fade-DXow65m2.js";function Re(){const e=r.useRef(!0),t=r.useRef(()=>e.current);return r.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}const U=2**31-1;function z(e,t,n){const o=n-Date.now();e.current=o<=U?setTimeout(t,o):setTimeout(()=>z(e,t,n),U)}function Ee(){const e=Re(),t=r.useRef();return oe(()=>clearTimeout(t.current)),r.useMemo(()=>{const n=()=>clearTimeout(t.current);function o(s,a=0){e()&&(n(),a<=U?t.current=setTimeout(s,a):z(t,s,Date.now()+a))}return{set:o,clear:n,handleRef:t}},[])}const we=()=>{};function ye(e,t,{disabled:n,clickTrigger:o}={}){const s=t||we;le(e,s,{disabled:n,clickTrigger:o});const a=pe(c=>{ie(c)&&s(c)});r.useEffect(()=>{if(n||e==null)return;const c=re(ue(e));let h=(c.defaultView||window).event;const u=ae(c,"keyup",d=>{if(d===h){h=void 0;return}a(d)});return()=>{u()}},[e,n,a])}const V=r.forwardRef((e,t)=>{const{flip:n,offset:o,placement:s,containerPadding:a,popperConfig:c={},transition:h,runTransition:u}=e,[d,R]=$(),[E,w]=$(),m=he(R,t),f=H(e.container),T=H(e.target),[i,p]=r.useState(!e.show),l=fe(T,d,de({placement:s,enableEvents:!!e.show,containerPadding:a||5,flip:n,offset:o,arrowElement:E,popperConfig:c}));e.show&&i&&p(!1);const x=(...b)=>{p(!0),e.onExited&&e.onExited(...b)},y=e.show||!i;if(ye(d,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!y)return null;const{onExit:F,onExiting:C,onEnter:O,onEntering:P,onEntered:_}=e;let M=e.children(Object.assign({},l.attributes.popper,{style:l.styles.popper,ref:m}),{popper:l,placement:s,show:!!e.show,arrowProps:Object.assign({},l.attributes.arrow,{style:l.styles.arrow,ref:w})});return M=ve(h,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:M,onExit:F,onExiting:C,onExited:x,onEnter:O,onEntering:P,onEntered:_}),f?ne.createPortal(M,f):null});V.displayName="Overlay";const X=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},s)=>(t=N(t,"popover-header"),v.jsx(n,{ref:s,className:D(e,t),...o})));X.displayName="PopoverHeader";const B=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},s)=>(t=N(t,"popover-body"),v.jsx(n,{ref:s,className:D(e,t),...o})));B.displayName="PopoverBody";function Y(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function q(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const G=r.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:o,children:s,body:a,arrowProps:c,hasDoneInitialMeasure:h,popper:u,show:d,...R},E)=>{const w=N(e,"popover"),m=A(),[f]=(t==null?void 0:t.split("-"))||[],T=Y(f,m);let i=o;return d&&!h&&(i={...o,...q(u==null?void 0:u.strategy)}),v.jsxs("div",{ref:E,role:"tooltip",style:i,"x-placement":f,className:D(n,w,f&&`bs-popover-${T}`),...R,children:[v.jsx("div",{className:"popover-arrow",...c}),a?v.jsx(B,{children:s}):s]})});G.displayName="Popover";const Oe=Object.assign(G,{Header:X,Body:B,POPPER_OFFSET:[0,8]}),J=r.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:o,children:s,arrowProps:a,hasDoneInitialMeasure:c,popper:h,show:u,...d},R)=>{e=N(e,"tooltip");const E=A(),[w]=(t==null?void 0:t.split("-"))||[],m=Y(w,E);let f=o;return u&&!c&&(f={...o,...q(h==null?void 0:h.strategy)}),v.jsxs("div",{ref:R,style:f,role:"tooltip","x-placement":w,className:D(n,e,`bs-tooltip-${m}`),...d,children:[v.jsx("div",{className:"tooltip-arrow",...a}),v.jsx("div",{className:`${e}-inner`,children:s})]})});J.displayName="Tooltip";const Te=Object.assign(J,{TOOLTIP_OFFSET:[0,6]});function xe(e){const t=r.useRef(null),n=N(void 0,"popover"),o=N(void 0,"tooltip"),s=r.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(I(t.current,n))return Oe.POPPER_OFFSET;if(I(t.current,o))return Te.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,o]);return[t,[s]]}function Ce(e,t){const{ref:n}=e,{ref:o}=t;e.ref=n.__wrapped||(n.__wrapped=s=>n(S(s))),t.ref=o.__wrapped||(o.__wrapped=s=>o(S(s)))}const Q=r.forwardRef(({children:e,transition:t=L,popperConfig:n={},rootClose:o=!1,placement:s="top",show:a=!1,...c},h)=>{const u=r.useRef({}),[d,R]=r.useState(null),[E,w]=xe(c.offset),m=W(h,E),f=t===!0?L:t||void 0,T=ge(i=>{R(i),n==null||n.onFirstUpdate==null||n.onFirstUpdate(i)});return me(()=>{d&&c.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[d,c.target]),r.useEffect(()=>{a||R(null)},[a]),v.jsx(V,{...c,ref:m,popperConfig:{...n,modifiers:w.concat(n.modifiers||[]),onFirstUpdate:T},transition:f,rootClose:o,placement:s,show:a,children:(i,{arrowProps:p,popper:l,show:x})=>{var y;Ce(i,p);const F=l==null?void 0:l.placement,C=Object.assign(u.current,{state:l==null?void 0:l.state,scheduleUpdate:l==null?void 0:l.update,placement:F,outOfBoundaries:(l==null||(y=l.state)==null||(y=y.modifiersData.hide)==null?void 0:y.isReferenceHidden)||!1,strategy:n.strategy}),O=!!d;return typeof e=="function"?e({...i,placement:F,show:x,...!t&&x&&{className:"show"},popper:C,arrowProps:p,hasDoneInitialMeasure:O}):r.cloneElement(e,{...i,placement:F,arrowProps:p,popper:C,hasDoneInitialMeasure:O,className:D(e.props.className,!t&&x&&"show"),style:{...e.props.style,...i.style}})}})});Q.displayName="Overlay";function Fe(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function K(e,t,n){const[o]=t,s=o.currentTarget,a=o.relatedTarget||o.nativeEvent[n];(!a||a!==s)&&!ee(s,a)&&e(...t)}te.oneOf(["click","hover","focus"]);const Le=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:o={},show:s,defaultShow:a=!1,onToggle:c,delay:h,placement:u,flip:d=u&&u.indexOf("auto")!==-1,...R})=>{const E=r.useRef(null),w=W(E,ce(n)),m=Ee(),f=r.useRef(""),[T,i]=se(s,a,c),p=Fe(h),{onFocus:l,onBlur:x,onClick:y}=typeof n!="function"?r.Children.only(n).props:{},F=g=>{w(S(g))},C=r.useCallback(()=>{if(m.clear(),f.current="show",!p.show){i(!0);return}m.set(()=>{f.current==="show"&&i(!0)},p.show)},[p.show,i,m]),O=r.useCallback(()=>{if(m.clear(),f.current="hide",!p.hide){i(!1);return}m.set(()=>{f.current==="hide"&&i(!1)},p.hide)},[p.hide,i,m]),P=r.useCallback((...g)=>{C(),l==null||l(...g)},[C,l]),_=r.useCallback((...g)=>{O(),x==null||x(...g)},[O,x]),M=r.useCallback((...g)=>{i(!T),y==null||y(...g)},[y,i,T]),b=r.useCallback((...g)=>{K(C,g,"fromElement")},[C]),Z=r.useCallback((...g)=>{K(O,g,"toElement")},[O]),j=e==null?[]:[].concat(e),k={ref:F};return j.indexOf("click")!==-1&&(k.onClick=M),j.indexOf("focus")!==-1&&(k.onFocus=P,k.onBlur=_),j.indexOf("hover")!==-1&&(k.onMouseOver=b,k.onMouseOut=Z),v.jsxs(v.Fragment,{children:[typeof n=="function"?n(k):r.cloneElement(n,k),v.jsx(Q,{...R,show:T,onHide:O,flip:d,placement:u,popperConfig:o,target:E.current,children:t})]})};export{Le as O,Te as T};
