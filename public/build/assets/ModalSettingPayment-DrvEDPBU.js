import{X as S,d as i,A as w,j as n}from"./ContextMenuProvider-C-NiMYiY.js";import{c as P,a as h,u as I}from"./index.esm-sQntuOkJ.js";import{s as l}from"./showToast-BUL3EPn5.js";import{u as k}from"./useTranslation-BNKLQupd.js";import{M as x}from"./Modal-B2xb3fXw.js";import{F as a}from"./Form-D2aw0oX0.js";import{B as y}from"./Button-Dx-n7Ou5.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./react-toastify.esm-FfPBQoob.js";import"./ThemeProvider-BgYZLYsX.js";import"./TransitionWrapper-CIOo0-du.js";import"./setPrototypeOf-B4fUID9J.js";import"./useEventCallback-BbnC7Pc4.js";import"./AbstractModalHeader-D7wlj6T7.js";import"./useEventCallback-Bqw6mw8o.js";import"./NoopTransition-HZfgzg2o.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-DPIqKeUN.js";import"./index-BIvY_0Em.js";import"./Fade-DLwfh3Nt.js";import"./divWithClassName-Ds82THrL.js";import"./Col-B9d4cz6j.js";import"./Button-4b-n1YSh.js";const oe=({show:_,onHide:g,dataEdit:r,refetchData:L})=>{const{t:s}=k(),v=!!r,o=S().props.errors,[F,b]=i.useState(!1),[j,d]=i.useState(!1),B=i.useMemo(()=>P({account_name:h().max(150,"Must be 150 characters or less").required(s("Please enter this field")),account_number:h().required(s("Please enter this field")),user_name:h().required(s("Please enter this field")),password:h().required(s("Please enter this field")),...j?{otp:h().required(s("Please enter this field"))}:{}}),[j,s]),e=I({initialValues:{account_name:(r==null?void 0:r.account_name)||"",account_number:(r==null?void 0:r.account_number)??"",user_name:(r==null?void 0:r.user_name)??"",password:(r==null?void 0:r.password)??"",otp:(r==null?void 0:r.otp)??""},validationSchema:B,onSubmit:m=>{const t=route("seller.payment-history.store");w[v?"put":"post"](t,m,{onSuccess:c=>{var u,p,N,C;if((p=(u=c.props)==null?void 0:u.message)!=null&&p.error){l(s(c.props.message.error),"error");return}e.resetForm(),g(),(C=(N=c.props)==null?void 0:N.message)!=null&&C.success&&l(s(c.props.message.success),"success"),L()}})}});return i.useEffect(()=>{_?(e.setValues({account_name:(r==null?void 0:r.account_name)||"",account_number:(r==null?void 0:r.account_number)??"",user_name:(r==null?void 0:r.user_name)??"",password:(r==null?void 0:r.password)??"",otp:(r==null?void 0:r.otp)??""}),d(!1)):e.resetForm()},[_,r]),n.jsx(x,{id:"myModal",backdrop:"static",show:_,onHide:()=>{e.resetForm(),g()},centered:!0,children:n.jsxs(a,{onSubmit:e.handleSubmit,noValidate:!0,children:[n.jsx(x.Header,{closeButton:!0,children:n.jsx("h5",{children:s("Setting Payment")})}),n.jsxs(x.Body,{children:[n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("Account name"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"account_name",type:"text",placeholder:s("Enter account name"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.account_name,isInvalid:!!(e.touched.account_name&&e.errors.account_name||o!=null&&o.account_name)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.account_name||(o==null?void 0:o.account_name))})]}),n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("Account number"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"account_number",type:"text",placeholder:s("Enter account number"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.account_number,isInvalid:!!(e.touched.account_number&&e.errors.account_number||o!=null&&o.account_number)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.account_number||(o==null?void 0:o.account_number))})]}),n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("User name"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"user_name",type:"text",placeholder:s("0974 xxx xxx"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.user_name,isInvalid:!!(e.touched.user_name&&e.errors.user_name||o!=null&&o.user_name)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.user_name||(o==null?void 0:o.user_name))})]}),n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("Password"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"password",type:"text",placeholder:s("Enter password"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.password,isInvalid:!!(e.touched.password&&e.errors.password||o!=null&&o.password)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.password||(o==null?void 0:o.password))})]}),n.jsx(y,{variant:"success",type:"button",className:"mb-3",disabled:F,onClick:async()=>{b(!0),e.setTouched({account_name:!0,account_number:!0,user_name:!0,password:!0,otp:e.touched.otp||!1});const m=await e.validateForm();if(m.account_name||m.account_number||m.user_name||m.password){l(s("Please enter this field"),"error"),b(!1);return}w.post(route("seller.payment-history.verify-payment"),{account_name:e.values.account_name,account_number:e.values.account_number,user_name:e.values.user_name,password:e.values.password},{preserveScroll:!0,onSuccess:t=>{var f,c,u,p;if((c=(f=t.props)==null?void 0:f.message)!=null&&c.error){l(s(t.props.message.error),"error");return}d(!0),l(s(((p=(u=t.props)==null?void 0:u.message)==null?void 0:p.success)||"Verified successfully"),"success")},onError:()=>{l(s("Verification failed"),"error")},onFinish:()=>{b(!1)}})},children:s("Verify Payment")}),j&&n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("OTP"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"otp",type:"text",placeholder:s("Enter OTP"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.otp,isInvalid:!!(e.touched.otp&&e.errors.otp||o!=null&&o.otp)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.otp||(o==null?void 0:o.otp))})]})]}),n.jsxs(x.Footer,{children:[n.jsx(y,{variant:"light",onClick:()=>{e.resetForm(),g()},children:s("Close")}),n.jsx(y,{variant:"primary",type:"submit",children:s(v?"Update":"Save changes")})]})]})})};export{oe as ModalSettingPayment};
