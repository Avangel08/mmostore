import{X as j,d as u,A as p,j as r}from"./ContextMenuProvider-C82May7t.js";import{h as C}from"./moment-C5S46NFB.js";import{T as y}from"./TableWithContextMenu-DdsqV72-.js";import{c as w}from"./sweetAlert-BmVWMoL6.js";import{s as l}from"./showToast-CqY4ZMHM.js";import P from"./SellerAccountFilter-CvDhoGC6.js";import{u as k}from"./useTranslation-D5up-W3A.js";import{C as n}from"./Col-CKjaKqqD.js";import{B as f}from"./Button-D_P_OII2.js";import"./index-DHFQiUfy.js";import"./ThemeProvider-DI4nib-B.js";import"./Row-D63r9usd.js";import"./Card-2h5v7kkJ.js";import"./CardHeaderContext-lBJTi2IY.js";import"./divWithClassName-CwNv_0EU.js";import"./react-select.esm-C57N-TcB.js";import"./setPrototypeOf-B4fUID9J.js";import"./extends-CF3RwP-h.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./useQueryParam-CENLs4gj.js";import"./react-toastify.esm-CFgZPtaV.js";import"./default-63Ii0IUz.js";import"./index-DJBfoLRJ.js";import"./Form-WynJEI3X.js";import"./Button-CpStjIdc.js";const J=()=>{const{t}=k(),{subProduct:o,accounts:g}=j().props,i=u.useCallback((a=1,e=10,s)=>{p.reload({only:["accounts"],replace:!0,data:{accountPage:a,accountPerPage:e,...s}})},[]),b=(a,e,s)=>{i(a,e,s)},h=u.useMemo(()=>[{header:t("Product"),cell:a=>{const e=a.row.original;return r.jsx("span",{children:`${e==null?void 0:e.key}|${e==null?void 0:e.data}`})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:t("Created date"),accessorKey:"created_at",enableColumnFilter:!1,enableSorting:!0,cell:a=>r.jsx("span",{children:C(a.getValue()).format("DD/MM/YYYY HH:mm")})},{header:t("Status"),accessorKey:"status",enableColumnFilter:!1,enableSorting:!0,cell:a=>{const e=a.getValue()||"Unknown",s={LIVE:"bg-success",BAN:"bg-danger",Unknown:"bg-dark"};return r.jsx("span",{className:`badge ${(s==null?void 0:s[e])||"bg-dark"} fs-6 fw-medium`,children:t(e)})}},{header:t("Order ID"),accessorKey:"order_id",enableColumnFilter:!1,enableSorting:!0}],[t]),x=async()=>{await w({title:t("Delete all unsold products?"),text:t("Unsold products will be deleted after all uploaded files have been processed"),confirmButtonText:t("Delete"),cancelButtonText:t("Cancel")})&&p.delete(route("seller.account.destroy",{id:(o==null?void 0:o.id)??0}),{replace:!0,preserveScroll:!0,preserveState:!0,onSuccess:e=>{var s,c,m,d;if((c=(s=e.props)==null?void 0:s.message)!=null&&c.error){l(t(e.props.message.error),"error");return}(d=(m=e.props)==null?void 0:m.message)!=null&&d.success&&l(t(e.props.message.success),"success")},onError:e=>{Object.keys(e).forEach(s=>{l(t(e==null?void 0:e[s]),"error")})}})};return r.jsxs(r.Fragment,{children:[r.jsx(n,{lg:12,className:"px-4",children:r.jsx(P,{onFilter:b})}),r.jsxs(n,{lg:12,className:"d-flex justify-content-between mb-4",children:[r.jsxs("h5",{children:[t("Product list")," (",(o==null?void 0:o.quantity)??0," ",t("products"),")"]}),r.jsxs("div",{className:"d-flex gap-2",children:[r.jsx(f,{variant:"danger",onClick:x,children:t("Delete all")}),r.jsx(f,{as:"a",href:route("seller.account.download-unsold-account",{subProductId:(o==null?void 0:o.id)||0}),variant:"success",children:t("Download unsold products")})]})]}),r.jsx(n,{lg:12,className:"",children:r.jsx("div",{children:r.jsx(y,{columns:h,data:g||[],divClass:"table-responsive table-card mb-3",tableClass:"table align-middle table-nowrap mb-0",theadClass:"table-light",enableContextMenu:!1,isPaginateTable:!0,isCursorPaginateTable:!0,keyPageParam:"accountPage",keyPerPageParam:"accountPerPage",onReloadTable:i,showPaginationEllipsis:!0,maxVisiblePages:7,perPageEntries:[100,200,500,1e3]})})})]})};export{J as default};
