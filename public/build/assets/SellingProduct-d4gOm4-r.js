import{X as j,d as n,A as p,j as r}from"./ContextMenuProvider-CUf15T8b.js";import{h as C}from"./moment-C5S46NFB.js";import{T as y}from"./TableWithContextMenu-9Gf94x8_.js";import{a as w}from"./sweetAlert-SIy78xZI.js";import{s as i}from"./showToast-BZsJ5i2w.js";import P from"./SellerAccountFilter-C7gnWZBE.js";import{u as k}from"./useTranslation-CcWHtvoZ.js";import{C as c}from"./Col-6EOqiNtv.js";import{B as f}from"./Button-D8tMtwFd.js";import"./index-IyYn2oib.js";import"./ThemeProvider-B97jU0sy.js";import"./Row-Cl0apHvl.js";import"./Card-kFH9kF2D.js";import"./CardHeaderContext-CqMd3CTm.js";import"./divWithClassName-F6D8z14O.js";import"./react-select.esm-CjmYAKcX.js";import"./inherits-0xqp8bJF.js";import"./setPrototypeOf-B4fUID9J.js";import"./extends-CF3RwP-h.js";import"./hoist-non-react-statics.cjs-BQLgnwv_.js";import"./useQueryParam-D7xq7Pe-.js";import"./sweetalert2.esm.all-5zhdP7Ax.js";import"./react-toastify.esm-ZGmoa_RU.js";import"./default-BGFmWfjn.js";import"./index-DKnNWrZg.js";import"./Form-tX-X8fEq.js";import"./Button-NCU6JKbY.js";const Q=()=>{const{t}=k(),{subProduct:o,accounts:g}=j().props,l=n.useCallback((a=1,e=10,s)=>{p.reload({only:["accounts"],replace:!0,data:{accountPage:a,accountPerPage:e,...s}})},[]);n.useEffect(()=>{setTimeout(()=>{l(1,100)},100)},[]);const b=(a,e,s)=>{l(a,e,s)},h=n.useMemo(()=>[{header:t("Product"),cell:a=>{const e=a.row.original;return r.jsx("span",{children:`${e==null?void 0:e.key}|${e==null?void 0:e.data}`})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:t("Created date"),accessorKey:"created_at",enableColumnFilter:!1,enableSorting:!0,cell:a=>r.jsx("span",{children:C(a.getValue()).format("DD/MM/YYYY HH:mm")})},{header:t("Status"),accessorKey:"status",enableColumnFilter:!1,enableSorting:!0,cell:a=>{const e=a.getValue()||"Unknown",s={LIVE:"bg-success",BAN:"bg-danger",Unknown:"bg-dark"};return r.jsx("span",{className:`badge ${(s==null?void 0:s[e])||"bg-dark"} fs-6 fw-medium`,children:t(e)})}},{header:t("Order ID"),accessorKey:"order_id",enableColumnFilter:!1,enableSorting:!0}],[t]),x=async()=>{await w({title:t("Delete all unsold products?"),text:t("Unsold products will be deleted after all uploaded files have been processed"),confirmButtonText:t("Delete"),cancelButtonText:t("Cancel")})&&p.delete(route("seller.account.destroy",{id:(o==null?void 0:o.id)??0}),{replace:!0,preserveScroll:!0,preserveState:!0,onSuccess:e=>{var s,m,d,u;if((m=(s=e.props)==null?void 0:s.message)!=null&&m.error){i(t(e.props.message.error),"error");return}(u=(d=e.props)==null?void 0:d.message)!=null&&u.success&&i(t(e.props.message.success),"success")},onError:e=>{Object.keys(e).forEach(s=>{i(t(e==null?void 0:e[s]),"error")})}})};return r.jsxs(r.Fragment,{children:[r.jsx(c,{lg:12,className:"px-4",children:r.jsx(P,{onFilter:b})}),r.jsxs(c,{lg:12,className:"d-flex justify-content-between mb-4",children:[r.jsxs("h5",{children:[t("Product list")," (",(o==null?void 0:o.quantity)??0," ",t("products"),")"]}),r.jsxs("div",{className:"d-flex gap-2",children:[r.jsx(f,{variant:"danger",onClick:x,children:t("Delete all")}),r.jsx(f,{as:"a",href:route("seller.account.download-unsold-account",{subProductId:(o==null?void 0:o.id)||0}),variant:"success",children:t("Download unsold products")})]})]}),r.jsx(c,{lg:12,className:"",children:r.jsx("div",{children:r.jsx(y,{columns:h,data:g||[],divClass:"table-responsive table-card mb-3",tableClass:"table align-middle table-nowrap mb-0",theadClass:"table-light",enableContextMenu:!1,isPaginateTable:!0,isCursorPaginateTable:!0,keyPageParam:"accountPage",keyPerPageParam:"accountPerPage",onReloadTable:l,showPaginationEllipsis:!0,maxVisiblePages:7,perPageEntries:[100,200,500,1e3]})})})]})};export{Q as default};
