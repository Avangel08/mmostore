import{A as P,d as p,j as e}from"./ContextMenuProvider-C-NiMYiY.js";import{c as y,a as n,b as x,u as C}from"./index.esm-sQntuOkJ.js";import{s as j}from"./showToast-BUL3EPn5.js";import{u as N}from"./useTranslation-BNKLQupd.js";import{M as l}from"./Modal-B2xb3fXw.js";import{F as r}from"./Form-D2aw0oX0.js";import{B as w}from"./Button-Dx-n7Ou5.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./react-toastify.esm-FfPBQoob.js";import"./ThemeProvider-BgYZLYsX.js";import"./TransitionWrapper-CIOo0-du.js";import"./setPrototypeOf-B4fUID9J.js";import"./useEventCallback-BbnC7Pc4.js";import"./AbstractModalHeader-D7wlj6T7.js";import"./useEventCallback-Bqw6mw8o.js";import"./NoopTransition-HZfgzg2o.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-DPIqKeUN.js";import"./index-BIvY_0Em.js";import"./Fade-DLwfh3Nt.js";import"./divWithClassName-Ds82THrL.js";import"./Col-B9d4cz6j.js";import"./Button-4b-n1YSh.js";const se=({show:i,onHide:d,dataEdit:o})=>{const{t:a}=N(),t=!!o,g=y({name:n().max(50,"Must be 50 characters or less").required(a("Please enter this field")),email:n().max(50,"Must be 50 characters or less").required(a("Please enter this field")),password:t?n().min(8,a("Password must be at least 8 characters")).max(20,"Must be 20 characters or less").optional():n().min(8,a("Password must be at least 8 characters")).max(20,"Must be 20 characters or less").required(a("Please enter this field")),confirmPassword:t?n().max(20,"Must be 20 characters or less").oneOf([x("password")],a("Passwords must match")).optional():n().max(20,"Must be 20 characters or less").oneOf([x("password")],a("Passwords must match")).required(a("Please enter this field")),type:n().required(a("Please enter this field")),status:n().required(a("Please enter this field"))}),s=C({initialValues:{name:"",email:"",password:"",confirmPassword:"",type:"",status:""},validationSchema:g,onSubmit:f=>{const v=t?route("admin.user.update",{id:o.id}):route("admin.user.add"),b=t?"put":"post",{confirmPassword:M,...m}=f;let h=m;if(t&&!m.password){const{password:c,...u}=m;h=u}P[b](v,h,{onSuccess:()=>{s.resetForm(),d()},onError:c=>{if(typeof c=="object"){const L=Object.values(c).flat().join(", ");j(L,"error")}else j("An error occurred","error")}})}});return p.useEffect(()=>{o?s.setValues({name:o.name||"",email:o.email||"",password:"",confirmPassword:"",type:o.type||"",status:o.status??""}):s.setValues({name:"",email:"",password:"",confirmPassword:"",type:"",status:""})},[o]),p.useEffect(()=>{i||s.resetForm()},[i]),e.jsx(l,{id:"myModal",backdrop:"static",show:i,onHide:()=>{s.resetForm(),d()},centered:!0,children:e.jsxs(r,{onSubmit:s.handleSubmit,noValidate:!0,children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx("h5",{children:a(t?"Edit":"Add")})}),e.jsxs(l.Body,{children:[e.jsxs(r.Group,{className:"mb-3",controlId:"name",children:[e.jsxs(r.Label,{children:[a("Name")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(r.Control,{type:"text",placeholder:a("Enter name"),maxLength:50,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.name,isInvalid:!!(s.touched.name&&s.errors.name)}),e.jsx(r.Control.Feedback,{type:"invalid",children:s.errors.name})]}),e.jsxs(r.Group,{className:"mb-3",controlId:"email",children:[e.jsxs(r.Label,{children:[a("Email")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(r.Control,{type:"text",placeholder:a("Enter email"),maxLength:50,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email,isInvalid:!!(s.touched.email&&s.errors.email)}),e.jsx(r.Control.Feedback,{type:"invalid",children:s.errors.email})]}),e.jsxs(r.Group,{className:"mb-3",controlId:"password",children:[e.jsxs(r.Label,{children:[a("Password"),!t&&e.jsx("span",{className:"text-danger",children:"*"}),t&&e.jsxs("small",{className:"text-muted",children:[" (",a("Leave blank to keep current password"),")"]})]}),e.jsx(r.Control,{type:"password",placeholder:a(t?"Enter new password":"Enter password"),maxLength:20,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password,isInvalid:!!(s.touched.password&&s.errors.password)}),e.jsx(r.Control.Feedback,{type:"invalid",children:s.errors.password})]}),e.jsxs(r.Group,{className:"mb-3",controlId:"confirmPassword",children:[e.jsxs(r.Label,{children:[a("Confirm Password"),!t&&e.jsx("span",{className:"text-danger",children:"*"}),t&&e.jsxs("small",{className:"text-muted",children:[" (",a("Leave blank to keep current password"),")"]})]}),e.jsx(r.Control,{type:"password",placeholder:a(t?"Confirm new password":"Confirm password"),maxLength:20,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.confirmPassword,isInvalid:!!(s.touched.confirmPassword&&s.errors.confirmPassword)}),e.jsx(r.Control.Feedback,{type:"invalid",children:s.errors.confirmPassword})]}),e.jsxs(r.Group,{className:"mb-3",controlId:"type",children:[e.jsxs(r.Label,{children:[a("Type")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(r.Select,{name:"type",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.type,isInvalid:!!(s.touched.type&&s.errors.type),children:[e.jsx("option",{value:"",children:a("Select type")}),e.jsx("option",{value:"ADMIN",children:"ADMIN"}),e.jsx("option",{value:"SELLER",children:"SELLER"})]}),e.jsx(r.Control.Feedback,{type:"invalid",children:s.errors.type})]}),e.jsxs(r.Group,{className:"mb-3",controlId:"status_user",children:[e.jsxs(r.Label,{children:[a("Status")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(r.Select,{name:"status",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.status,isInvalid:!!(s.touched.status&&s.errors.status),children:[e.jsx("option",{value:"",children:a("Select status")}),e.jsx("option",{value:"0",children:a("Inactive")}),e.jsx("option",{value:"1",children:a("Active")}),e.jsx("option",{value:"2",children:a("Block")})]}),e.jsx(r.Control.Feedback,{type:"invalid",children:s.errors.status})]})]}),e.jsxs(l.Footer,{children:[e.jsx(w,{variant:"light",onClick:()=>{s.resetForm(),d()},children:a("Close")}),e.jsx(w,{variant:"primary",type:"submit",children:a(t?"Update":"Save changes")})]})]})})};export{se as ModalDetail};
