import{d as i,j as a,A as z}from"./ContextMenuProvider-CS5vHxz6.js";import{F as B,_,v as $}from"./default-mQVhwpK_.js";import{S as C}from"./react-select.esm-Cxy5smUr.js";import{h as F}from"./moment-C5S46NFB.js";import{u as H}from"./useQueryParam-BmQAgWye.js";import{u as Q}from"./useTranslation-BoUhrstE.js";import{B as j}from"./Button-B-P6q23q.js";import{R as q}from"./Row-C1m23aPI.js";import{C as u}from"./Col-Bp2xmTzT.js";import{F as m}from"./Form-DZNj-NAF.js";import"./index-CUQA3Sg6.js";import"./setPrototypeOf-B4fUID9J.js";import"./extends-CF3RwP-h.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./ThemeProvider-2LlY9aUc.js";import"./Button-L5QJRgzd.js";const de=({onFilter:v})=>{const{t:s,i18n:N}=Q(),g=i.useRef(null),[f,E]=i.useState(!1),e=H(),b=(e==null?void 0:e.perPage)??"10",[p,P]=i.useState([]),k=()=>({name:(e==null?void 0:e.name)??"",category:(e==null?void 0:e.category)??"",createdDateStart:(e==null?void 0:e.createdDateStart)??"",createdDateEnd:(e==null?void 0:e.createdDateEnd)??"",status:(e==null?void 0:e.status)??""}),[o,x]=i.useState(k()),d=p.map(t=>({value:t==null?void 0:t.id,label:t==null?void 0:t.name}));d.unshift({value:"",label:s("All")});const h=[{value:"",label:s("All")},{value:"ACTIVE",label:s("Active")},{value:"INACTIVE",label:s("Inactive")}],[I,S]=i.useState(d[0]),[Y,y]=i.useState(h[0]);i.useEffect(()=>{const t=e==null?void 0:e.category;if(t!==null){const n=d.find(l=>{var c;return((c=l==null?void 0:l.value)==null?void 0:c.toString())===t});n&&S(n)}const r=e==null?void 0:e.status;if(r!==null){const n=h.find(l=>{var c;return((c=l==null?void 0:l.value)==null?void 0:c.toString())===r});n&&y(n)}},[]);const A=()=>{switch(N.language){case"vi":return $.Vietnamese;default:return _.english}},D=(t,r)=>{x(n=>({...n,[t]:r}))},R=t=>{const[r,n]=t;x(l=>({...l,createdDateStart:r?F(r).format("YYYY-MM-DD"):"",createdDateEnd:n?F(n).format("YYYY-MM-DD"):""}))},w=t=>{S(t),D("category",t.value)},M=t=>{y(t),D("status",t.value)},V=()=>{v(1,Number(b),o)},L=()=>{const t=(e==null?void 0:e.name)||"",r=(e==null?void 0:e.category)||"",n=(e==null?void 0:e.createdDateStart)||"",l=(e==null?void 0:e.createdDateEnd)||"",c=(e==null?void 0:e.status)||"";return t!==null&&t!==""||r!==null&&r!==""||n!==null&&n!==""||l!==null&&l!==""||c!==null&&c!==""},T=()=>{const t={name:"",category:"",createdDateStart:"",createdDateEnd:"",status:""};x(t),S(d[0]),y(h[0]),g.current&&g.current.flatpickr&&g.current.flatpickr.clear(),v(1,Number(b),t)},O=()=>{E(!f)};return a.jsxs("div",{className:"filter-container mb-3",children:[a.jsxs("div",{className:"mb-3 d-flex align-items-center gap-2",children:[a.jsxs(j,{variant:"outline-primary",onClick:O,className:"d-flex align-items-center",children:[a.jsx("i",{className:`ri-filter-${f?"off":"2"}-line align-bottom me-2`}),s(f?"Hide Filters":"Show Filters")]}),L()&&a.jsxs(j,{variant:"outline-secondary",onClick:T,className:"d-flex align-items-center",children:[a.jsx("i",{className:"ri-refresh-line align-bottom me-1"}),s("Reset")]})]}),f&&a.jsx("div",{className:"p-3 border rounded bg-light",children:a.jsxs(q,{className:"g-3",children:[a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-name",children:s("Product Name")}),a.jsx(m.Control,{type:"text",id:"filter-name",placeholder:s("Enter product name"),value:o.name,onChange:t=>D("name",t.target.value)})]}),a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-category",children:s("Category")}),a.jsx(C,{id:"filter-category",value:I,onChange:w,options:d,onMenuOpen:()=>{z.reload({only:["categories"],onSuccess:t=>{var n;const r=((n=t==null?void 0:t.props)==null?void 0:n.categories)||[];P(r)}})},classNamePrefix:"select",isSearchable:!0,placeholder:s("Select category"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-date",children:s("Created Date Range")}),a.jsx(B,{ref:g,className:"form-control",id:"filter-date",placeholder:s("Select date range"),options:{mode:"range",dateFormat:"d/m/Y",locale:A()},value:o.createdDateStart&&o.createdDateEnd?[new Date(o.createdDateStart),new Date(o.createdDateEnd)]:o.createdDateStart?[new Date(o.createdDateStart)]:[],onChange:R})]}),a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-status",children:s("Status")}),a.jsx(C,{id:"filter-status",value:Y,onChange:M,options:h,classNamePrefix:"select",isSearchable:!0,placeholder:s("Select status"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsx(u,{md:12,className:"d-flex justify-content-end",children:a.jsxs(j,{variant:"primary",onClick:V,children:[a.jsx("i",{className:"ri-search-line align-bottom me-1"}),s("Filter")]})})]})})]})};export{de as default};
