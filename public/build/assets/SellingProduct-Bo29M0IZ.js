import{X as S,d as l,A as p,j as r}from"./ContextMenuProvider-INnE3nXi.js";import{h as w}from"./moment-C5S46NFB.js";import{T as y}from"./TableWithContextMenu-DZdoAT-2.js";import{c as k}from"./sweetAlert-BmVWMoL6.js";import{s as n}from"./showToast-wYK_Q9O6.js";import D from"./SellerAccountFilter-DWO48BZ7.js";import{u as v}from"./useTranslation-BplHzdVE.js";import{C as c}from"./Col-D7PMVkNY.js";import{B as g}from"./Button-DE4omwnL.js";import"./index-CLNqkfFv.js";import"./ThemeProvider-BzG8hqOw.js";import"./Row-qq2XSHFz.js";import"./Card-CM5ptl3g.js";import"./CardHeaderContext-CmOgzsGf.js";import"./divWithClassName-DhtfUnxO.js";import"./react-select.esm-Ce41qeWO.js";import"./setPrototypeOf-B4fUID9J.js";import"./extends-CF3RwP-h.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./useQueryParam-DEfrjdNR.js";import"./react-toastify.esm-CuvQXgQc.js";import"./default-CSenijRt.js";import"./index-DpHVcmdC.js";import"./Form-DOga7u5W.js";import"./Button-DfBQkBHv.js";const re=()=>{const{t}=v(),{subProduct:o,accounts:f}=S().props,[A,b]=l.useState(1),[F,h]=l.useState(10),i=l.useCallback((s=1,e=10,a)=>{P(s,e),p.reload({only:["accounts"],replace:!0,data:{accountPage:s,accountPerPage:e,...a}})},[]),x=(s,e,a)=>{i(s,e,a)},P=(s,e)=>{b(s||1),h(e||10)},j=l.useMemo(()=>[{header:t("Product"),cell:s=>{const e=s.row.original;return r.jsx("span",{children:`${e==null?void 0:e.key}|${e==null?void 0:e.data}`})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:t("Created date"),accessorKey:"created_at",enableColumnFilter:!1,enableSorting:!0,cell:s=>r.jsx("span",{children:w(s.getValue()).format("DD/MM/YYYY HH:mm")})},{header:t("Status"),accessorKey:"status",enableColumnFilter:!1,enableSorting:!0,cell:s=>{const e=s.getValue()||"Unknown",a={LIVE:"bg-success",BAN:"bg-danger",Unknown:"bg-dark"};return r.jsx("span",{className:`badge ${(a==null?void 0:a[e])||"bg-dark"} fs-6 fw-medium`,children:t(e)})}},{header:t("Order ID"),accessorKey:"order_id",enableColumnFilter:!1,enableSorting:!0}],[t]),C=async()=>{await k({title:t("Delete all unsold products?"),text:t("Unsold products will be deleted after all uploaded files have been processed"),confirmButtonText:t("Delete"),cancelButtonText:t("Cancel")})&&p.delete(route("seller.account.destroy",{id:(o==null?void 0:o.id)??0}),{replace:!0,preserveScroll:!0,preserveState:!0,onSuccess:e=>{var a,u,m,d;if((u=(a=e.props)==null?void 0:a.message)!=null&&u.error){n(t(e.props.message.error),"error");return}(d=(m=e.props)==null?void 0:m.message)!=null&&d.success&&n(t(e.props.message.success),"success")},onError:e=>{Object.keys(e).forEach(a=>{n(t(e==null?void 0:e[a]),"error")})}})};return r.jsxs(r.Fragment,{children:[r.jsx(c,{lg:12,className:"px-4",children:r.jsx(D,{onFilter:x})}),r.jsxs(c,{lg:12,className:"d-flex justify-content-between mb-4",children:[r.jsx("h5",{children:t("Product list")}),r.jsxs("div",{className:"d-flex gap-2",children:[r.jsx(g,{variant:"danger",onClick:C,children:t("Delete all")}),r.jsx(g,{as:"a",href:route("seller.account.download-unsold-account",{subProductId:(o==null?void 0:o.id)||0}),variant:"success",children:t("Download unsold products")})]})]}),r.jsx(c,{lg:12,className:"",children:r.jsx("div",{children:r.jsx(y,{columns:j,data:f||[],divClass:"table-responsive table-card mb-3",tableClass:"table align-middle table-nowrap mb-0",theadClass:"table-light",enableContextMenu:!1,isPaginateTable:!0,keyPageParam:"accountPage",keyPerPageParam:"accountPerPage",onReloadTable:i,showPaginationEllipsis:!0,maxVisiblePages:7})})})]})};export{re as default};
