import{d,e as y,j as a}from"./ContextMenuProvider-DoI9LuTu.js";import{F as B,_ as $,v as H}from"./default-DKET8U34.js";import{S as Q}from"./react-select.esm-Ci0lS3LH.js";import{h as k}from"./moment-C5S46NFB.js";import{u as q}from"./useQueryParam-xm9iNkis.js";import{A as G}from"./index-C98xhMJs.js";import{u as J}from"./useTranslation-Bh5zzBC_.js";import{B as F}from"./Button-CdshqBqI.js";import{R as K}from"./Row-DaX0pFtU.js";import{C as m}from"./Col-BERnSmBs.js";import{F as i}from"./Form-C6Oq7frR.js";import"./index-B7rcZTdA.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-BsRiVy2U.js";import"./ThemeProvider-CQKb4rSK.js";import"./Button-lElTeqs9.js";const Se=({onFilter:N,subProductId:h})=>{const{t:l,i18n:P}=J(),g=d.useRef(null),[x,Y]=d.useState(!1),e=q(),E=(e==null?void 0:e.accountPerPage)??"10",M=()=>({product:(e==null?void 0:e.product)??"",createdDateStart:(e==null?void 0:e.createdDateStart)??"",createdDateEnd:(e==null?void 0:e.createdDateEnd)??"",status:(e==null?void 0:e.status)??"",orderNumber:(e==null?void 0:e.orderNumber)??"",sellStatus:(e==null?void 0:e.sellStatus)??"unsold"}),[o,D]=d.useState(M()),j=[{value:"",label:l("All")}],b=[{value:"",label:l("All")},{value:"unsold",label:l("Unsold")},{value:"sold",label:l("Sold")}],[O,f]=d.useState(j[0]),[R,C]=d.useState(b[0]);d.useEffect(()=>{const t=e==null?void 0:e.status;t&&h&&y.get(route("seller.account.status-options",{sub_product_id:h,search:"",page:1})).then(s=>{var S;const c=(((S=s==null?void 0:s.data)==null?void 0:S.results)??[]).find(u=>u.value.toString()===t);f(c?{value:c.value,label:l(c.label)}:{value:t,label:t})}).catch(()=>{f({value:t,label:t})});const n=(e==null?void 0:e.sellStatus)??"unsold",r=b.find(s=>s.value===n);r&&C(r)},[h]);const w=()=>{switch(P.language){case"vi":return H.Vietnamese;default:return $.english}},v=(t,n)=>{D(r=>({...r,[t]:n}))},_=t=>{const[n,r]=t;D(s=>({...s,createdDateStart:n?k(n).format("YYYY-MM-DD"):"",createdDateEnd:r?k(r).format("YYYY-MM-DD"):""}))},A=t=>{f(t),v("status",t.value)},L=t=>{C(t),v("sellStatus",t.value)},V=()=>{N(1,Number(E),o)},I=()=>{const t=e==null?void 0:e.product,n=e==null?void 0:e.createdDateStart,r=e==null?void 0:e.createdDateEnd,s=e==null?void 0:e.status,p=e==null?void 0:e.orderNumber,c=e==null?void 0:e.sellStatus;return t!==null&&t!==""||n!==null&&n!==""||r!==null&&r!==""||s!==null&&s!==""||p!==null&&p!==""||c!==null&&c!=="unsold"},T=()=>{const t={product:"",createdDateStart:"",createdDateEnd:"",status:"",orderNumber:"",sellStatus:"unsold"};D(t),f(j[0]),C(b[1]),g.current&&g.current.flatpickr&&g.current.flatpickr.clear(),N(1,Number(E),t)},z=()=>{Y(!x)};return a.jsxs("div",{className:"filter-container mb-3",children:[a.jsxs("div",{className:"mb-3 d-flex align-items-center gap-2",children:[a.jsxs(F,{variant:"outline-primary",onClick:z,className:"d-flex align-items-center",children:[a.jsx("i",{className:`ri-filter-${x?"off":"2"}-line align-bottom me-2`}),l(x?"Hide Filters":"Show Filters")]}),I()&&a.jsxs(F,{variant:"outline-danger",onClick:T,className:"d-flex align-items-center",children:[a.jsx("i",{className:"ri-refresh-line align-bottom me-1"}),l("Reset")]})]}),x&&a.jsx("div",{className:"p-3 border rounded bg-light",children:a.jsxs(K,{className:"g-3",children:[a.jsxs(m,{md:6,lg:2,children:[a.jsx(i.Label,{htmlFor:"filter-sell-status",children:l("Sell Status")}),a.jsx(Q,{id:"filter-sell-status",value:R,onChange:L,options:b,classNamePrefix:"select",isSearchable:!0,placeholder:l("Select sell status"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(m,{md:4,lg:3,children:[a.jsx(i.Label,{htmlFor:"filter-product",children:l("Product")}),a.jsx(i.Control,{type:"text",id:"filter-product",placeholder:l("Enter product"),value:o.product,onChange:t=>v("product",t.target.value)})]}),a.jsxs(m,{md:4,lg:3,children:[a.jsx(i.Label,{htmlFor:"filter-date",children:l("Created Date Range")}),a.jsx(B,{ref:g,className:"form-control",id:"filter-date",placeholder:l("Select date range"),options:{mode:"range",dateFormat:"d/m/Y",locale:w()},value:o.createdDateStart&&o.createdDateEnd?[new Date(o.createdDateStart),new Date(o.createdDateEnd)]:o.createdDateStart?[new Date(o.createdDateStart)]:[],onChange:_})]}),a.jsxs(m,{md:4,lg:2,children:[a.jsx(i.Label,{htmlFor:"filter-status",children:l("Status")}),a.jsx(G,{id:"filter-status",value:O,isClearable:!0,loadOptions:async(t,n,{page:r})=>{var c,S;if(!h)return{options:[],hasMore:!1};const s=await y.get(route("seller.account.status-options",{sub_product_id:h,search:t,page:r}));return{options:((S=(c=s==null?void 0:s.data)==null?void 0:c.results)==null?void 0:S.map(u=>({value:(u==null?void 0:u.value)??"",label:l(u.label)??""})))??[],hasMore:s.data.has_more,additional:{page:r+1}}},additional:{page:1},clearCacheOnMenuClose:!0,clearCacheOnSearchChange:!0,onChange:A,options:j,classNamePrefix:"select",placeholder:l("Select status"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(m,{md:6,lg:2,children:[a.jsx(i.Label,{htmlFor:"filter-order",children:l("Order ID")}),a.jsx(i.Control,{type:"text",id:"filter-order",placeholder:l("Enter Order ID"),value:o.orderNumber,onChange:t=>v("orderNumber",t.target.value)})]}),a.jsx(m,{md:12,children:a.jsxs(F,{variant:"primary",onClick:V,children:[a.jsx("i",{className:"ri-search-line align-bottom me-1"}),l("Filter")]})})]})})]})};export{Se as default};
