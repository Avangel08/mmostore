import{d as l,j as s}from"./ContextMenuProvider-BnbZ3Xw_.js";import{T as S}from"./TableWithContextMenu-Cfr3RPBK.js";import{h as x}from"./moment-C5S46NFB.js";import{u as C}from"./useTranslation-CtwHyjpC.js";import"./index-y1QhNd26.js";import"./index-H0Krwn6i.js";import"./Row-D4DhAVVB.js";import"./ThemeProvider-C0xt9VP8.js";import"./Card-bUFuojd-.js";import"./divWithClassName-Egl5q-Z9.js";import"./Col-DMyGedr-.js";import"./Table-BNpvKU-5.js";import"./Button-BRcUTJGP.js";import"./Button-C_zChQbi.js";import"./react-select.esm-BoayILgX.js";import"./inherits-C5_PO-Hh.js";import"./setPrototypeOf-DgZC2w_0.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./hoist-non-react-statics.cjs-D_S65KpP.js";import"./useQueryParam-C_CgcfIB.js";const B=({data:i,onReloadTable:h,onEdit:g,onDelete:f,onSelectionChange:u})=>{const{t:n}=C(),[p,m]=l.useState([]),[c,b]=l.useState(!1);l.useEffect(()=>{u&&u(p)},[p,u]),l.useEffect(()=>{m([]),b(!1)},[i]);const w=l.useCallback(()=>{var e;if(c)m([]);else{const t=((e=i==null?void 0:i.data)==null?void 0:e.map(r=>r.id))||[];m(t)}b(!c)},[c,i]),j=l.useCallback((e,t)=>{t?m(r=>[...r,e]):(m(r=>r.filter(a=>a!==e)),b(!1))},[]),y=l.useMemo(()=>[{header:n("Plan name"),accessorKey:"",enableColumnFilter:!1,enableSorting:!0,cell:e=>{var r,a;const t=((a=(r=e==null?void 0:e.row)==null?void 0:r.original)==null?void 0:a.checkout)||{};return s.jsx("span",{className:"text-break text-wrap",children:(t==null?void 0:t.name)??""})}},{header:n("User"),cell:e=>{var r,a;const t=((a=(r=e==null?void 0:e.row)==null?void 0:r.original)==null?void 0:a.user)||{};return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-break text-wrap",children:(t==null?void 0:t.name)??""}),s.jsx("br",{}),s.jsx("span",{className:"text-muted text-break text-wrap",children:(t==null?void 0:t.email)??""})]})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:n("Payment method"),cell:e=>{var r,a;const t=((a=(r=e==null?void 0:e.row)==null?void 0:r.original)==null?void 0:a.payment_method)||{};return s.jsx("span",{className:"text-break text-wrap",children:(t==null?void 0:t.name)??""})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:n("Plan type"),cell:e=>{var a,o;const t=((o=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:o.checkout)||{},r={0:"Default",1:"Normal"};return s.jsx("span",{className:"text-break text-wrap",children:r[t==null?void 0:t.type]??""})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:n("Transaction ID"),accessorKey:"transaction_id",enableColumnFilter:!1,enableSorting:!0,cell:e=>s.jsx("span",{className:"text-break text-wrap",children:e.getValue()})},{header:n("Plan price"),cell:e=>{var r,a;const t=((a=(r=e==null?void 0:e.row)==null?void 0:r.original)==null?void 0:a.checkout)||{};return s.jsx("span",{className:"text-break text-wrap",children:new Intl.NumberFormat("vi-VN").format((t==null?void 0:t.amount_vnd)??0)})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:n("Amount paid"),accessorKey:"amount_vnd",enableColumnFilter:!1,enableSorting:!0,cell:e=>{var a,o,d;const t=parseFloat(e.getValue()||0),r=parseFloat(((d=(o=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:o.checkout)==null?void 0:d.amount_vnd)||0);return s.jsx("span",{className:`fw-bold text-break text-wrap ${t<r?"text-warning":""}`,children:new Intl.NumberFormat("vi-VN").format(t)})}},{header:n("Expiration date"),cell:e=>{var r,a;const t=((a=(r=e==null?void 0:e.row)==null?void 0:r.original)==null?void 0:a.charge)||{};return s.jsx("span",{className:"text-break text-wrap",children:!!(t!=null&&t.expires_on)&&x(t==null?void 0:t.expires_on).format("DD/MM/YYYY HH:mm")})},accessorKey:"expires_on",enableColumnFilter:!1,enableSorting:!0},{header:n("Created by"),cell:e=>{var r,a,o;console.log((r=e==null?void 0:e.row)==null?void 0:r.original);const t=((o=(a=e==null?void 0:e.row)==null?void 0:a.original)==null?void 0:o.creator)||{};return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-break text-wrap",children:(t==null?void 0:t.name)??""}),s.jsx("br",{}),s.jsx("span",{className:"text-muted text-break text-wrap",children:(t==null?void 0:t.email)??""})]})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:n("Note"),accessorKey:"note",enableColumnFilter:!1,enableSorting:!0,cell:e=>s.jsx("span",{className:"text-break text-wrap",children:e.getValue()})},{header:n("System note"),accessorKey:"system_note",enableColumnFilter:!1,enableSorting:!0,cell:e=>s.jsx("span",{className:"text-break text-wrap",children:e.getValue()})},{header:n("Status"),accessorKey:"status",enableColumnFilter:!1,enableSorting:!0,cell:e=>{const t=e.getValue(),r={0:"Pending",1:"Completed",2:"Rejected"},a={0:"bg-info",1:"bg-success",2:"bg-danger"};return s.jsx("span",{className:`badge ${(a==null?void 0:a[t])||"bg-dark"} fs-6 fw-medium`,children:n((r==null?void 0:r[t])||"Unknown")})}},{header:n("Created date"),accessorKey:"created_at",enableColumnFilter:!1,enableSorting:!0,cell:e=>s.jsx("span",{className:"text-break text-wrap",children:x(e.getValue()).format("DD/MM/YYYY HH:mm")})}],[n,p,c,w,j,g,f]);return s.jsx("div",{children:s.jsx(S,{columns:y,data:i||[],divClass:"table-responsive table-card mb-3",tableClass:"table align-middle table-nowrap mb-0",theadClass:"table-light",SearchPlaceholder:n("Search..."),enableContextMenu:!1,isPaginateTable:!0,onReloadTable:h,divStyle:{height:"60vh"}})})};export{B as default};
