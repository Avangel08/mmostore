import{X as F,A as I,d as f,j as r}from"./ContextMenuProvider-BhVN3MI2.js";import{u as T,c as $,a as B}from"./index.esm-C_ZlIYoE.js";import{S as q}from"./react-select.esm-kG1LW6sX.js";import{s as L}from"./showToast-BKDwzp8a.js";import{u as G}from"./useTranslation-ZbZFIHja.js";import{M as n}from"./Modal-C594Uytt.js";import{F as a}from"./Form-B_1_SP-R.js";import{B as M}from"./Button-CT1W-dlW.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-3lIPCjJv.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./inherits-B2gPeQio.js";import"./react-toastify.esm-Bzp-JuTX.js";import"./ThemeProvider-CUiVOj3n.js";import"./useMergedRefs-BdX62CzH.js";import"./useEventCallback-DN7Xb1FR.js";import"./useWillUnmount-RaeYL0I0.js";import"./TransitionWrapper-CHWC6Aev.js";import"./AbstractModalHeader-ONgXPvo5.js";import"./useWindow-D06ww4p5.js";import"./querySelectorAll-BZjzdW4C.js";import"./useEventCallback-kYw4fXYA.js";import"./hasClass-Du0ceSUq.js";import"./NoopTransition-Ba3l4ZU6.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-D0xq5bFg.js";import"./index-CMi1q9xw.js";import"./Fade-DZUndS-E.js";import"./divWithClassName-DOGM4Upq.js";import"./Col-CDTbDU3W.js";import"./Button-ItoOpMhW.js";const xe=({show:u,onHide:i,dataEdit:s})=>{var y,x,S,j,d;const{t}=G(),c=!!s,h=F().props.errors,V=F().props.statusConst,l=Object.entries(V||{}).map(([o,p])=>{var g;return{value:(g=o??"")==null?void 0:g.toString(),label:t(p??"")}}),e=T({initialValues:{categoryName:(s==null?void 0:s.name)||"",categoryStatus:(s==null?void 0:s.status)??"ACTIVE"},validationSchema:$({categoryName:B().max(150,"Must be 150 characters or less").required(t("Please enter this field")),categoryStatus:B().required(t("Please select status"))}),onSubmit:o=>{const p=c?route("seller.category.update",{id:s.id}):route("seller.category.store");I[c?"put":"post"](p,o,{replace:!0,preserveScroll:!0,preserveState:!0,onSuccess:m=>{var v,N,b,C;if((N=(v=m.props)==null?void 0:v.message)!=null&&N.error){L(t(m.props.message.error),"error");return}e.resetForm(),i(),(C=(b=m.props)==null?void 0:b.message)!=null&&C.success&&L(t(m.props.message.success),"success")}})}}),A=(l==null?void 0:l.find(o=>(o==null?void 0:o.value)===e.values.categoryStatus))??null;return f.useEffect(()=>{u?e.setValues({categoryName:(s==null?void 0:s.name)||"",categoryStatus:(s==null?void 0:s.status)??"ACTIVE"}):e.resetForm()},[u,s]),f.useEffect(()=>{e.setErrors(h||{})},[h]),r.jsx(n,{id:"myModal",backdrop:"static",show:u,onHide:()=>{e.resetForm(),i()},centered:!0,children:r.jsxs(a,{onSubmit:e.handleSubmit,noValidate:!0,children:[r.jsx(n.Header,{closeButton:!0,children:r.jsx("h5",{children:t(c?"Edit category":"Add category")})}),r.jsxs(n.Body,{children:[r.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[r.jsxs(a.Label,{children:[t("Category name"),r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(a.Control,{type:"text",placeholder:t("Enter category name"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.categoryName,isInvalid:!!(e.touched.categoryName&&e.errors.categoryName)}),r.jsx(a.Control.Feedback,{type:"invalid",children:t(e.errors.categoryName??"")})]}),r.jsxs(a.Group,{className:"mb-3",controlId:"categoryStatus",children:[r.jsxs(a.Label,{children:[t("Status")," ",r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(q,{options:l,placeholder:t("Select status"),value:A,onChange:o=>{e.setFieldValue("categoryStatus",(o==null?void 0:o.value)??"")},onBlur:()=>e.setFieldTouched("categoryStatus",!0),className:(y=e==null?void 0:e.touched)!=null&&y.categoryStatus&&((x=e==null?void 0:e.errors)!=null&&x.categoryStatus)?"is-invalid":""}),((S=e==null?void 0:e.touched)==null?void 0:S.categoryStatus)&&((j=e==null?void 0:e.errors)==null?void 0:j.categoryStatus)&&r.jsx("div",{className:"invalid-feedback d-block",children:t(((d=e==null?void 0:e.errors)==null?void 0:d.categoryStatus)??"")}),r.jsx(a.Control.Feedback,{type:"invalid",children:t(e.errors.categoryStatus??"")})]})]}),r.jsxs(n.Footer,{children:[r.jsx(M,{variant:"light",onClick:()=>{e.resetForm(),i()},children:t("Close")}),r.jsx(M,{variant:"primary",type:"submit",children:t(c?"Update":"Save changes")})]})]})})};export{xe as ModalDetailCategory};
