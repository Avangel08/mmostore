import{X as I,d as T,A as R,j as e,R as A,S as V}from"./ContextMenuProvider-CUf15T8b.js";import{Q as U}from"./react-toastify.esm-ZGmoa_RU.js";import{u as z}from"./formik.esm-D3LnCktS.js";import{c as D,g as q}from"./index.esm-Dr9W4QE-.js";import{s as h}from"./showToast-BZsJ5i2w.js";import{L as O}from"./index-DYy9IffC.js";import{S as $,R as G}from"./RecentUpload-DVwiQx6Q.js";import H from"./SellingProduct-d4gOm4-r.js";import{u as M}from"./useTranslation-CcWHtvoZ.js";import{C as Q}from"./Container-BlrnZ9Ps.js";import{R as d}from"./Row-Cl0apHvl.js";import{C as x}from"./Col-6EOqiNtv.js";import{C as a}from"./Card-kFH9kF2D.js";import{B as L}from"./Button-D8tMtwFd.js";import{F as m}from"./Form-tX-X8fEq.js";import"./toString-DZQbVhdU.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-BQLgnwv_.js";import"./index-DKnNWrZg.js";import"./RightSidebar-BxaNc7D9.js";import"./Dropdown-Dk26w-PX.js";import"./ThemeProvider-B97jU0sy.js";import"./querySelectorAll-a65Eisif.js";import"./useMergedRefs-DxqJFB1B.js";import"./SSRProvider-BK0TK1ss.js";import"./useEventCallback-BkinHRQ0.js";import"./useIsomorphicEffect-7Ts4-1Xz.js";import"./useWindow-BmGtZXAu.js";import"./SelectableContext-Vjq9v8CG.js";import"./NavbarContext-Wd2oAS9m.js";import"./Button-NCU6JKbY.js";import"./DataKey-DjdvojM5.js";import"./hook-DbYEYK7e.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-B4fUID9J.js";import"./useEventCallback-D9rniTUJ.js";import"./Anchor-Bu2f26Hu.js";import"./InputGroupContext-Dg1iS0gZ.js";import"./thunk-rMgAJhEa.js";import"./index-DxlJFdn6.js";import"./throttle-CzOjd-at.js";import"./reselect-CiXCCDx7.js";import"./AbstractModalHeader-BnVnJchn.js";import"./hasClass-B-lVPIr_.js";import"./NoopTransition-CYuCxw2t.js";import"./TransitionWrapper-BiovwvO2.js";import"./CloseButton-CjwmBX8Z.js";import"./Fade-PIrusN3V.js";import"./divWithClassName-F6D8z14O.js";import"./Collapse-CMEv0_-t.js";import"./logo-dark-Dh4DV6bR.js";import"./logo-light-D3OEWz0M.js";import"./avatar-1-PHP4S1R6.js";import"./moment-C5S46NFB.js";import"./TableWithContextMenu-9Gf94x8_.js";import"./index-IyYn2oib.js";import"./react-select.esm-CjmYAKcX.js";import"./inherits-0xqp8bJF.js";import"./useQueryParam-D7xq7Pe-.js";import"./sweetAlert-SIy78xZI.js";import"./sweetalert2.esm.all-5zhdP7Ax.js";import"./SellerAccountFilter-C7gnWZBE.js";import"./default-BGFmWfjn.js";import"./CardHeaderContext-CqMd3CTm.js";const W=()=>{var u,g,y,N,S,w,v,_,C,B;const{t}=M(),n=I().props.errors,{subProduct:r}=I().props,[f,j]=T.useState(!1),p=((u=r==null?void 0:r.product)==null?void 0:u.category)&&((g=r==null?void 0:r.product)==null?void 0:g.product_type),o=z({initialValues:{file:null},validationSchema:D({file:q().required(t("Please select a file to upload")).test("fileType",t("Only .txt files are allowed"),i=>i?i.name.toLowerCase().endsWith(".txt"):!0).test("fileSize",t("The file must not be greater than 50MB"),i=>i?i.size<=50*1024*1024:!0)}),onSubmit:i=>{j(!0);const l=new FormData;l.append("sub_product_id",(r==null?void 0:r.id)||""),l.append("product_id",(r==null?void 0:r.product_id)||""),i.file&&l.append("file",i.file),R.post(route("seller.account.store"),l,{preserveScroll:!0,onSuccess:s=>{var k,F,b,E;if((F=(k=s.props)==null?void 0:k.message)!=null&&F.error){h(t(s.props.message.error),"error");return}(E=(b=s.props)==null?void 0:b.message)!=null&&E.success&&h(t(s.props.message.success),"success"),o.resetForm();const c=document.querySelector('input[type="file"]');c&&(c.value="")},onError:s=>{Object.keys(s).forEach(c=>{h(t(s[c]),"error")})},onFinish:()=>j(!1)})}});return e.jsxs(A.Fragment,{children:[e.jsx(V,{title:t("Account")}),e.jsxs("div",{className:"page-content",children:[e.jsx(U,{}),e.jsx(Q,{fluid:!0,children:e.jsx(d,{children:e.jsx(x,{xs:12,children:e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsx("h5",{className:"card-title mb-0",children:t("Account")})}),e.jsxs(a.Body,{children:[(!((y=r==null?void 0:r.product)!=null&&y.category)||!((N=r==null?void 0:r.product)!=null&&N.product_type))&&e.jsx(d,{style:{marginBottom:"32px"},children:e.jsx(x,{xs:12,children:e.jsx(a,{bg:"warning",text:"dark",className:"border-warning",children:e.jsx(a.Body,{children:e.jsxs("div",{className:"d-flex align-items-center gap-5",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"mb-2",children:[e.jsx("i",{className:"ri-alert-line me-2"}),t("Product Configuration Required")]}),e.jsxs("div",{className:"mb-1",children:[!((S=r==null?void 0:r.product)!=null&&S.category)&&!((w=r==null?void 0:r.product)!=null&&w.product_type)&&e.jsx("span",{children:t("Category and Product Type are not defined for this product")}),!((v=r==null?void 0:r.product)!=null&&v.category)&&((_=r==null?void 0:r.product)==null?void 0:_.product_type)&&e.jsx("span",{children:t("Category is not defined for this product")}),((C=r==null?void 0:r.product)==null?void 0:C.category)&&!((B=r==null?void 0:r.product)!=null&&B.product_type)&&e.jsx("span",{children:t("Product Type is not defined for this product")})]}),e.jsx("small",{className:"text-muted",children:t("Please configure the missing information to ensure proper product management")})]}),e.jsx("div",{children:e.jsxs(L,{variant:"dark",size:"sm",onClick:()=>{window.open(route("seller.product.edit",{id:r==null?void 0:r.product_id}),"_blank")},children:[e.jsx("i",{className:"ri-edit-line me-1"}),t("Edit Product")]})})]})})})})}),e.jsxs(d,{style:{marginBottom:"32px"},children:[e.jsxs(x,{lg:6,children:[!p&&e.jsx(a,{bg:"danger",text:"white",className:"mb-3 border-danger",children:e.jsxs(a.Body,{children:[e.jsxs("h6",{className:"mb-2",children:[e.jsx("i",{className:"ri-error-warning-line me-2"}),t("Import Disabled")]}),e.jsxs("p",{className:"mb-0",children:[t("You cannot import accounts until the product category and product type are configured.")," ",e.jsx("a",{href:route("seller.product.edit",{id:r==null?void 0:r.product_id}),className:"text-white text-decoration-underline",target:"_blank",children:t("Please edit the product first.")})]})]})}),e.jsxs(m,{onSubmit:o.handleSubmit,noValidate:!0,children:[e.jsxs(m.Group,{className:"mb-3",children:[e.jsxs(m.Label,{children:[t("Upload .txt file")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(m.Control,{type:"file",name:"file",accept:".txt",disabled:!p,onChange:i=>{var s;const l=((s=i.target.files)==null?void 0:s[0])||null;o.setFieldValue("file",l)},onBlur:o.handleBlur,isInvalid:!!(o.touched.file&&o.errors.file||n!=null&&n.file)}),e.jsx(m.Control.Feedback,{type:"invalid",children:t(o.errors.file||(n==null?void 0:n.file))}),!p&&e.jsx(m.Text,{className:"text-muted",children:t("File upload is disabled until product configuration is complete")})]}),e.jsx(L,{variant:"primary",type:"submit",disabled:f||!p,children:f?e.jsxs(e.Fragment,{children:[e.jsx($,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),t("Uploading"),"..."]}):t("Upload")})]})]}),e.jsx(x,{lg:6,children:e.jsx(a,{bg:"light",className:"mb-3",children:e.jsxs(a.Body,{children:[e.jsx("h5",{children:t("Note: Each line in the uploaded file will be 1 product")}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("strong",{children:[t("Format"),":"]}),e.jsxs("div",{className:"ms-2",children:["• ",e.jsx("code",{children:"key|data1|data2|..."}),e.jsx("br",{}),"• ",e.jsx("code",{children:"status:STATUS|key|data1|data2|..."})]})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("small",{children:[t("Define status after 'status:' keyword"),". ",t("If no status specified, default status is LIVE"),".",e.jsx("br",{}),e.jsx("strong",{children:t("LIVE means the product is ready for sale")}),"."]})}),e.jsx("div",{className:"mb-1",children:e.jsxs("strong",{children:[t("Examples"),":"]})}),e.jsxs("div",{className:"font-monospace small bg-white p-2 rounded",children:["status:LIVE|gameacc01|username123|password456|2fa_code",e.jsx("br",{}),"email001|john@example.com|mypass123|2fa_code (",t("default status is LIVE"),")",e.jsx("br",{}),"status:Ban|social01|@username|pass789|verified (",t("status is BAN"),")"]})]})})})]}),e.jsx("hr",{}),e.jsx(d,{className:"my-5",children:e.jsx(G,{})}),e.jsx("hr",{}),e.jsx(d,{className:"my-5",children:e.jsx(H,{})})]})]})})})})]})]})};W.layout=t=>e.jsx(O,{children:t});export{W as default};
