import{X as v,A as y,j as e,R as N}from"./ContextMenuProvider-DoI9LuTu.js";import{u as C,c as F,e as S,a as k,F as w,h as D}from"./index.esm-yjK6ua4W.js";import{s as d}from"./showToast-BFjkHmvN.js";import{u as R}from"./useTranslation-Bh5zzBC_.js";import{F as c}from"./Form-C6Oq7frR.js";import{R as j}from"./Row-DaX0pFtU.js";import{C as u}from"./Col-BERnSmBs.js";import{B as b}from"./Button-CdshqBqI.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-BsRiVy2U.js";import"./react-toastify.esm-8BWsAHON.js";import"./ThemeProvider-CQKb4rSK.js";import"./index-B7rcZTdA.js";import"./Button-lElTeqs9.js";const $=/^(?!-)[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)+$/,X=({activeTab:g})=>{const{t:a}=R(),{settings:o,domains:p,domainSuffix:l}=v().props,r=C({enableReinitialize:!0,initialValues:{domains:(o==null?void 0:o.domains)||[""]},validationSchema:F({domains:S().of(k().required(a("Please enter domain")).test("is-valid-domain","Domain format is invalid",s=>!s||$.test(s)).test("not-contain-suffix",`Domain cannot contain ${l}`,s=>!s||!s.toLowerCase().includes(l.toLowerCase()))).test("unique",a("Domains must be unique"),s=>s?new Set(s).size===s.length:!0).test("notInDefault",a("Cannot duplicate system domains"),s=>s?!s.some(n=>p.includes(n)):!0)}),onSubmit:s=>{const n=new FormData;n.append("domains",JSON.stringify(s.domains)),n.append("tab",g);const i=route("seller.theme-settings.update",{id:o.id});y.post(i,n,{preserveScroll:!0,onSuccess:t=>{var m,h,f,x;if((h=(m=t.props)==null?void 0:m.message)!=null&&h.error){d(a(t.props.message.error),"error");return}(x=(f=t.props)==null?void 0:f.message)!=null&&x.success?(d(a(t.props.message.success),"success"),r.resetForm()):d(a("Settings updated successfully"),"success")},onError:t=>{Object.keys(t).forEach(m=>{d(a(t[m]),"error")})}})}});return e.jsx(N.Fragment,{children:e.jsx(w,{value:r,children:e.jsxs(c,{noValidate:!0,onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h5",{className:"mb-2",children:[a("Domain"),e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("p",{className:"text-muted fs-14 mb-1",children:a("To ensure that a website can be recognized and displayed to users, it must always have a primary domain name. Only one domain can be selected as the main domain")}),e.jsxs("p",{className:"text-muted fs-14 mb-3",children:[a("Current domain"),":"," ",e.jsx("span",{className:"fst-italic",children:p.find(s=>s.includes(l))})]}),e.jsx(j,{children:e.jsxs(u,{children:[e.jsx(D,{name:"domains",render:s=>e.jsx("div",{className:"mb-3",children:r.values.domains.map((n,i)=>e.jsxs(j,{className:"mb-2",children:[e.jsx(u,{children:e.jsx(c.Control,{type:"text",className:"form-control",id:"setting-domain",value:n,onChange:r.handleChange,onBlur:r.handleBlur,name:`domains[${i}]`,placeholder:a("Enter your domain")})}),r.values.domains.length>1&&e.jsx(u,{xs:"auto",children:e.jsx(b,{variant:"danger",onClick:()=>s.remove(i),children:e.jsx("i",{className:"ri-indeterminate-circle-line"})})})]},i))})}),e.jsxs(c.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:[" ",r.errors.domains," "]})]})})]}),e.jsx("div",{className:"text-start",children:e.jsx(b,{type:"submit",variant:"success",children:a("Update")})})]})})})};export{X as default};
