import{A as P,d as p,j as e}from"./ContextMenuProvider-DSIAf6_I.js";import{c as y,a as n,b as x,u as C}from"./index.esm-Bin9-eUK.js";import{s as j}from"./showToast-B_axlP3a.js";import{u as N}from"./useTranslation-49euhmcM.js";import{M as l}from"./Modal-XP_dort1.js";import{F as a}from"./Form--TVfZSDf.js";import{B as w}from"./Button-dF3JTjah.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./react-toastify.esm-Cm0IYqj3.js";import"./ThemeProvider-Dp1LrSTH.js";import"./TransitionWrapper-Yjlz25S7.js";import"./setPrototypeOf-B4fUID9J.js";import"./useEventCallback-12PyCo-_.js";import"./useWillUnmount-EavtZY7N.js";import"./AbstractModalHeader-CfLG6-zR.js";import"./hasClass-wiVgLGye.js";import"./NoopTransition-ZAkQKiwn.js";import"./useEventCallback-BqnkSNJB.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-Ms1qjZQT.js";import"./index-9jpn6ojX.js";import"./Fade-usg0rP7s.js";import"./divWithClassName-BFGhCr0m.js";import"./Col-febpeRkL.js";import"./Button-CnTasM7B.js";const ae=({show:i,onHide:d,dataEdit:o})=>{const{t:r}=N(),t=!!o,g=y({name:n().max(50,"Must be 50 characters or less").required(r("Please enter this field")),email:n().max(50,"Must be 50 characters or less").required(r("Please enter this field")),password:t?n().min(8,r("Password must be at least 8 characters")).max(20,"Must be 20 characters or less").optional():n().min(8,r("Password must be at least 8 characters")).max(20,"Must be 20 characters or less").required(r("Please enter this field")),confirmPassword:t?n().max(20,"Must be 20 characters or less").oneOf([x("password")],r("Passwords must match")).optional():n().max(20,"Must be 20 characters or less").oneOf([x("password")],r("Passwords must match")).required(r("Please enter this field")),type:n().required(r("Please enter this field")),status:n().required(r("Please enter this field"))}),s=C({initialValues:{name:"",email:"",password:"",confirmPassword:"",type:"",status:""},validationSchema:g,onSubmit:f=>{const v=t?route("admin.user.update",{id:o.id}):route("admin.user.add"),b=t?"put":"post",{confirmPassword:M,...m}=f;let h=m;if(t&&!m.password){const{password:c,...u}=m;h=u}P[b](v,h,{onSuccess:()=>{s.resetForm(),d()},onError:c=>{if(typeof c=="object"){const L=Object.values(c).flat().join(", ");j(L,"error")}else j("An error occurred","error")}})}});return p.useEffect(()=>{o?s.setValues({name:o.name||"",email:o.email||"",password:"",confirmPassword:"",type:o.type||"",status:o.status??""}):s.setValues({name:"",email:"",password:"",confirmPassword:"",type:"",status:""})},[o]),p.useEffect(()=>{i||s.resetForm()},[i]),e.jsx(l,{id:"myModal",backdrop:"static",show:i,onHide:()=>{s.resetForm(),d()},centered:!0,children:e.jsxs(a,{onSubmit:s.handleSubmit,noValidate:!0,children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx("h5",{children:r(t?"Edit":"Add")})}),e.jsxs(l.Body,{children:[e.jsxs(a.Group,{className:"mb-3",controlId:"name",children:[e.jsxs(a.Label,{children:[r("Name")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(a.Control,{type:"text",placeholder:r("Enter name"),maxLength:50,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.name,isInvalid:!!(s.touched.name&&s.errors.name)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.name})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"email",children:[e.jsxs(a.Label,{children:[r("Email")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(a.Control,{type:"text",placeholder:r("Enter email"),maxLength:50,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email,isInvalid:!!(s.touched.email&&s.errors.email)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.email})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"password",children:[e.jsxs(a.Label,{children:[r("Password"),!t&&e.jsx("span",{className:"text-danger",children:"*"}),t&&e.jsxs("small",{className:"text-muted",children:[" (",r("Leave blank to keep current password"),")"]})]}),e.jsx(a.Control,{type:"password",placeholder:r(t?"Enter new password":"Enter password"),maxLength:20,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password,isInvalid:!!(s.touched.password&&s.errors.password)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.password})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"confirmPassword",children:[e.jsxs(a.Label,{children:[r("Confirm Password"),!t&&e.jsx("span",{className:"text-danger",children:"*"}),t&&e.jsxs("small",{className:"text-muted",children:[" (",r("Leave blank to keep current password"),")"]})]}),e.jsx(a.Control,{type:"password",placeholder:r(t?"Confirm new password":"Confirm password"),maxLength:20,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.confirmPassword,isInvalid:!!(s.touched.confirmPassword&&s.errors.confirmPassword)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.confirmPassword})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"type",children:[e.jsxs(a.Label,{children:[r("Type")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(a.Select,{name:"type",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.type,isInvalid:!!(s.touched.type&&s.errors.type),children:[e.jsx("option",{value:"",children:r("Select type")}),e.jsx("option",{value:"ADMIN",children:"ADMIN"}),e.jsx("option",{value:"SELLER",children:"SELLER"})]}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.type})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"status_user",children:[e.jsxs(a.Label,{children:[r("Status")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(a.Select,{name:"status",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.status,isInvalid:!!(s.touched.status&&s.errors.status),children:[e.jsx("option",{value:"",children:r("Select status")}),e.jsx("option",{value:"0",children:r("Inactive")}),e.jsx("option",{value:"1",children:r("Active")}),e.jsx("option",{value:"2",children:r("Block")})]}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.status})]})]}),e.jsxs(l.Footer,{children:[e.jsx(w,{variant:"light",onClick:()=>{s.resetForm(),d()},children:r("Close")}),e.jsx(w,{variant:"primary",type:"submit",children:r(t?"Update":"Save changes")})]})]})})};export{ae as ModalDetail};
