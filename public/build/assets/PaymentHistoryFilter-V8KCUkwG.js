import{d as m,e as N,j as a}from"./ContextMenuProvider-DoI9LuTu.js";import{F as k,_ as ee,v as te}from"./default-DKET8U34.js";import{S as O}from"./react-select.esm-Ci0lS3LH.js";import{h as P}from"./moment-C5S46NFB.js";import{u as ae}from"./useQueryParam-xm9iNkis.js";import{A as R}from"./index-C98xhMJs.js";import{u as ne}from"./useTranslation-Bh5zzBC_.js";import{R as le}from"./Row-DaX0pFtU.js";import{C as h}from"./Col-BERnSmBs.js";import{F as x}from"./Form-C6Oq7frR.js";import{B as E}from"./Button-CdshqBqI.js";import"./index-B7rcZTdA.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-BsRiVy2U.js";import"./ThemeProvider-CQKb4rSK.js";import"./Button-lElTeqs9.js";const Ce=({onFilter:I,additionalButtons:T})=>{const{t:n,i18n:A}=ne(),D=m.useRef(null),S=m.useRef(null),[b,_]=m.useState(!1),e=ae(),Y=(e==null?void 0:e.perPage)??"10",L=()=>({createdDateStart:(e==null?void 0:e.createdDateStart)??"",createdDateEnd:(e==null?void 0:e.createdDateEnd)??"",status:(e==null?void 0:e.status)??"",planName:(e==null?void 0:e.planName)??"",userId:(e==null?void 0:e.userId)??"",paymentMethodId:(e==null?void 0:e.paymentMethodId)??"",planType:(e==null?void 0:e.planType)??"",expirationDateStart:(e==null?void 0:e.expirationDateStart)??"",expirationDateEnd:(e==null?void 0:e.expirationDateEnd)??""}),[o,v]=m.useState(L()),j=[{value:"",label:n("All")},{value:"0",label:n("Pending")},{value:"1",label:n("Completed")},{value:"2",label:n("Rejected")}],C=[{value:"",label:n("All")},{value:"0",label:n("Default")},{value:"1",label:n("Normal")}],[z,F]=m.useState(j[0]),[V,p]=m.useState({value:"",label:n("All")}),[$,g]=m.useState({value:"",label:n("All")}),[H,M]=m.useState(C[0]);m.useEffect(()=>{const t=e==null?void 0:e.status;if(t!==null){const r=j.find(d=>d.value.toString()===t);r&&F(r)}const s=e==null?void 0:e.userId;s&&N.get(route("admin.user.list-user",{search:"",page:1})).then(r=>{var c;const u=(((c=r==null?void 0:r.data)==null?void 0:c.results)??[]).find(f=>f.value.toString()===s);p(u||{value:s,label:s})}).catch(()=>{p({value:s,label:s})});const l=e==null?void 0:e.paymentMethodId;l&&N.get(route("admin.payment-method.list-method",{search:"",page:1})).then(r=>{var c;const u=(((c=r==null?void 0:r.data)==null?void 0:c.results)??[]).find(f=>f.value.toString()===l);g(u||{value:l,label:l})}).catch(()=>{g({value:l,label:l})});const i=e==null?void 0:e.planType;if(i!==null){const r=C.find(d=>d.value.toString()===i);r&&M(r)}},[]);const w=()=>{switch(A.language){case"vi":return te.Vietnamese;default:return ee.english}},y=(t,s)=>{v(l=>({...l,[t]:s}))},B=t=>{const[s,l]=t;v(i=>({...i,createdDateStart:s?P(s).format("YYYY-MM-DD"):"",createdDateEnd:l?P(l).format("YYYY-MM-DD"):""}))},Q=t=>{const[s,l]=t;v(i=>({...i,expirationDateStart:s?P(s).format("YYYY-MM-DD"):"",expirationDateEnd:l?P(l).format("YYYY-MM-DD"):""}))},q=t=>{F(t),y("status",t.value)},G=t=>{p(t),y("userId",t.value)},J=t=>{g(t),y("paymentMethodId",t.value)},K=t=>{M(t),y("planType",t.value)},W=()=>{I(1,Number(Y),o)},X=()=>{const t=(e==null?void 0:e.createdDateStart)||"",s=(e==null?void 0:e.createdDateEnd)||"",l=(e==null?void 0:e.status)||"",i=(e==null?void 0:e.planName)||"",r=(e==null?void 0:e.userId)||"",d=(e==null?void 0:e.paymentMethodId)||"",u=(e==null?void 0:e.planType)||"",c=(e==null?void 0:e.expirationDateStart)||"",f=(e==null?void 0:e.expirationDateEnd)||"";return t!==null&&t!==""||s!==null&&s!==""||l!==null&&l!==""||i!==null&&i!==""||r!==null&&r!==""||d!==null&&d!==""||u!==null&&u!==""||c!==null&&c!==""||f!==null&&f!==""},Z=()=>{const t={createdDateStart:"",createdDateEnd:"",status:"",planName:"",userId:"",paymentMethodId:"",planType:"",expirationDateStart:"",expirationDateEnd:""};v(t),F(j[0]),p({value:"",label:n("All")}),g({value:"",label:n("All")}),M(C[0]),D.current&&D.current.flatpickr&&D.current.flatpickr.clear(),S.current&&S.current.flatpickr&&S.current.flatpickr.clear(),I(1,Number(Y),t)},U=()=>{_(!b)};return a.jsxs("div",{className:"filter-container mb-3",children:[b&&a.jsx("div",{className:"p-3 border rounded bg-light mb-3",children:a.jsxs(le,{className:"g-3",children:[a.jsxs(h,{md:6,lg:3,children:[a.jsx(x.Label,{htmlFor:"filter-plan-name",children:n("Plan name")}),a.jsx(x.Control,{type:"text",id:"filter-plan-name",placeholder:n("Enter plan name"),value:o.planName,onChange:t=>y("planName",t.target.value)})]}),a.jsxs(h,{md:6,lg:3,children:[a.jsx(x.Label,{htmlFor:"filter-user",children:n("User")}),a.jsx(R,{id:"filter-user",value:V,isClearable:!0,loadOptions:async(t,s,{page:l})=>{var d,u;const i=await N.get(route("admin.user.list-user",{search:t,page:l}));return{options:((u=(d=i==null?void 0:i.data)==null?void 0:d.results)==null?void 0:u.map(c=>({value:(c==null?void 0:c.value)??"",label:(c==null?void 0:c.label)??""})))??[],hasMore:i.data.has_more,additional:{page:l+1}}},additional:{page:1},clearCacheOnMenuClose:!0,clearCacheOnSearchChange:!0,onChange:G,classNamePrefix:"select",placeholder:n("Select user"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(h,{md:6,lg:3,children:[a.jsx(x.Label,{htmlFor:"filter-payment-method",children:n("Payment Method")}),a.jsx(R,{id:"filter-payment-method",value:$,isClearable:!0,loadOptions:async(t,s,{page:l})=>{var d;const i=await N.get(route("admin.payment-method.list-method",{search:t,page:l}));return{options:((d=i==null?void 0:i.data)==null?void 0:d.results)??[],hasMore:i.data.has_more,additional:{page:l+1}}},additional:{page:1},clearCacheOnMenuClose:!0,clearCacheOnSearchChange:!0,onChange:J,classNamePrefix:"select",placeholder:n("Select payment method"),menuPortalTarget:document.body,formatOptionLabel:t=>a.jsxs("div",{className:"d-flex flex-column",children:[a.jsx("span",{className:"fw-semibold",children:t.label}),(t.type||t.account_name)&&a.jsxs("small",{className:"text-muted",children:[t.type&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"fw-medium",children:[n("Type"),":"]})," ",t.type]}),t.type&&t.account_name&&" | ",t.account_name&&a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"fw-medium",children:[n("Account"),"  :"]})," ",t.account_name,t.account_number&&` - ${t.account_number}`]})]})]}),styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(h,{md:6,lg:3,children:[a.jsx(x.Label,{htmlFor:"filter-plan-type",children:n("Plan type")}),a.jsx(O,{id:"filter-plan-type",value:H,onChange:K,options:C,classNamePrefix:"select",isSearchable:!0,placeholder:n("Select plan type"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(h,{md:6,lg:3,children:[a.jsx(x.Label,{htmlFor:"filter-status",children:n("Status")}),a.jsx(O,{id:"filter-status",value:z,onChange:q,options:j,classNamePrefix:"select",isSearchable:!0,placeholder:n("Select status"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(h,{md:6,lg:3,children:[a.jsx(x.Label,{htmlFor:"filter-expiration-date",children:n("Expiration date range")}),a.jsx(k,{ref:S,className:"form-control",id:"filter-expiration-date",placeholder:n("Select expiration date range"),options:{mode:"range",dateFormat:"d/m/Y",locale:w()},value:o.expirationDateStart&&o.expirationDateEnd?[new Date(o.expirationDateStart),new Date(o.expirationDateEnd)]:o.expirationDateStart?[new Date(o.expirationDateStart)]:[],onChange:Q})]}),a.jsxs(h,{md:6,lg:3,children:[a.jsx(x.Label,{htmlFor:"filter-date",children:n("Created Date Range")}),a.jsx(k,{ref:D,className:"form-control",id:"filter-date",placeholder:n("Select date range"),options:{mode:"range",dateFormat:"d/m/Y",locale:w()},value:o.createdDateStart&&o.createdDateEnd?[new Date(o.createdDateStart),new Date(o.createdDateEnd)]:o.createdDateStart?[new Date(o.createdDateStart)]:[],onChange:B})]}),a.jsx(h,{md:12,children:a.jsxs(E,{variant:"primary",onClick:W,children:[a.jsx("i",{className:"ri-search-line align-bottom me-1"}),n("Filter")]})})]})}),a.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsxs(E,{variant:"outline-primary",onClick:U,className:"d-flex align-items-center",children:[a.jsx("i",{className:`ri-filter-${b?"off":"2"}-line align-bottom me-2`}),n(b?"Hide Filters":"Show Filters")]}),X()&&a.jsxs(E,{variant:"outline-danger",onClick:Z,className:"d-flex align-items-center",children:[a.jsx("i",{className:"ri-refresh-line align-bottom me-1"}),n("Reset")]})]}),T&&a.jsx("div",{className:"d-flex align-items-center gap-2",children:T})]})]})};export{Ce as default};
