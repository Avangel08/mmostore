import{X as R,d as l,G as E,j as s,R as P,S as F,t as e,x as B}from"./ContextMenuProvider-DoI9LuTu.js";import{l as M}from"./logo-light-D3OEWz0M.js";import{G as V}from"./GuestLayout-YFUlxgu5.js";import{C as G}from"./Container-AKEw1NBh.js";import{R as x}from"./Row-DaX0pFtU.js";import{C as h}from"./Col-BERnSmBs.js";import{C as f}from"./Card-BP66js0B.js";import{F as i}from"./Form-C6Oq7frR.js";import{A as u}from"./Alert-DmeDZGUk.js";import{B as L}from"./Button-CdshqBqI.js";import"./ApplicationLogo-FnpUeiwx.js";import"./reselect-CiXCCDx7.js";import"./ThemeProvider-CQKb4rSK.js";import"./divWithClassName-Ct-4CK0x.js";import"./index-B7rcZTdA.js";import"./hook-Crll79d-.js";import"./extends-CF3RwP-h.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./useEventCallback-BA23UYAQ.js";import"./Anchor-B8rOyTnZ.js";import"./useEventCallback-Bsoi2xyD.js";import"./Button-lElTeqs9.js";import"./Fade-iG7JUvQW.js";import"./TransitionWrapper-CRtjL7Sb.js";import"./useMergedRefs-Cm3LQ1VB.js";import"./setPrototypeOf-DgZC2w_0.js";import"./CloseButton-feMrj_cP.js";const ms=({token:j,email:N})=>{const{props:O}=R(),[o,c]=l.useState({}),[b,g]=l.useState(!1),[m,v]=l.useState(!1),[p,C]=l.useState(!1),{data:a,setData:w,post:S,processing:_,errors:t,reset:y}=E({token:j,email:N,password:"",password_confirmation:""}),k=n=>{n.preventDefault(),c({}),g(!0);const r={};if(a.password?a.password.length<8&&(r.password=e("Password must be at least 8 characters")):r.password=e("Password is required"),a.password_confirmation?a.password!==a.password_confirmation&&(r.password_confirmation=e("Passwords must match")):r.password_confirmation=e("Please confirm your password"),Object.keys(r).length>0){c(r);return}S(route("home.reset-password.post"),{onSuccess:()=>{window.open(route("home.login")+"?reset=success","_self")},onError:()=>{}})};return l.useEffect(()=>()=>{y("password","password_confirmation")},[]),s.jsx(P.Fragment,{children:s.jsxs(V,{children:[s.jsx(F,{title:e("Reset password")+" | MMO Store"}),s.jsx("div",{className:"auth-page-content mt-lg-5",children:s.jsxs(G,{children:[s.jsx(x,{children:s.jsx(h,{lg:12,children:s.jsxs("div",{className:"text-center mt-sm-5 mb-4 text-white-50",children:[s.jsx("div",{children:s.jsx(B,{href:"/",className:"d-inline-block auth-logo",children:s.jsx("img",{src:M,alt:"",height:"20"})})}),s.jsx("p",{className:"mt-3 fs-15 fw-medium",children:"MMO Store Platform"})]})})}),s.jsx(x,{className:"justify-content-center",children:s.jsxs(h,{md:8,lg:6,xl:5,children:[s.jsx(f,{className:"mt-4",children:s.jsxs(f.Body,{className:"p-4",children:[s.jsxs("div",{className:"text-center mt-2",children:[s.jsx("h5",{className:"text-primary",children:e("Reset password")}),s.jsx("p",{className:"text-muted",children:e("Enter your new password")})]}),s.jsx("div",{className:"p-2 mt-4",children:s.jsxs(i,{noValidate:!0,validated:b,onSubmit:k,children:[t.email&&s.jsx("div",{className:"mb-3",children:s.jsxs(u,{className:"border-0 alert-danger",style:{backgroundColor:"#fdecea",color:"#611a15",fontSize:"14px",borderRadius:"8px"},children:[s.jsx("i",{className:"ri-error-warning-line me-2"}),e(String(t.email))]})}),s.jsx("div",{className:"mb-3",children:s.jsxs(u,{className:"border-0 alert-success",style:{backgroundColor:"#d1fae5",color:"#065f46",fontSize:"14px",borderRadius:"8px"},children:[s.jsx("i",{className:"ri-shield-check-line me-2"}),s.jsx("strong",{children:e("Reset password for:")})," ",a.email]})}),s.jsxs("div",{className:"mb-3",children:[s.jsxs(i.Label,{htmlFor:"password",children:[e("New Password")," ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"position-relative auth-pass-inputgroup",children:[s.jsx(i.Control,{type:m?"text":"password",id:"password",placeholder:e("Enter new password"),className:t.password||o.password?"is-invalid":"",autoComplete:"new-password",value:a.password,onChange:n=>{w("password",n.target.value),o.password&&c(r=>{const d={...r};return delete d.password,d})}}),s.jsx("button",{className:"btn btn-link position-absolute end-0 top-0 text-decoration-none text-muted password-addon",type:"button",onClick:()=>v(!m),children:s.jsx("i",{className:`ri-eye${m?"":"-off"}-fill align-middle`})}),s.jsx(i.Control.Feedback,{type:"invalid",className:"d-block mt-2",children:o.password?o.password:t.password?e(String(t.password)):null})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs(i.Label,{htmlFor:"password_confirmation",children:[e("Confirm Password")," ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"position-relative auth-pass-inputgroup",children:[s.jsx(i.Control,{type:p?"text":"password",id:"password_confirmation",placeholder:e("Confirm new password"),className:t.password_confirmation||o.password_confirmation?"is-invalid":"",autoComplete:"new-password",value:a.password_confirmation,onChange:n=>{w("password_confirmation",n.target.value),o.password_confirmation&&c(r=>{const d={...r};return delete d.password_confirmation,d})}}),s.jsx("button",{className:"btn btn-link position-absolute end-0 top-0 text-decoration-none text-muted password-addon",type:"button",onClick:()=>C(!p),children:s.jsx("i",{className:`ri-eye${p?"":"-off"}-fill align-middle`})}),s.jsx(i.Control.Feedback,{type:"invalid",className:"d-block mt-2",children:o.password_confirmation?o.password_confirmation:t.password_confirmation?e(String(t.password_confirmation)):null})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx(L,{variant:"success",className:"w-100",type:"submit",disabled:_,children:e("Reset password")})})]})})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("a",{href:route("home.login"),children:[s.jsx("i",{className:"ri-arrow-left-line"})," ",e("Back to login")]})})]})})]})})]})})};export{ms as default};
