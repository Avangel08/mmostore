import{X as M,A as $,d as V,j as r}from"./ContextMenuProvider-DCdb8j9t.js";import{u as G,c as q,a as h}from"./index.esm-CC-SwQOh.js";import{S as z}from"./react-select.esm-Bx-RY50u.js";import{s as I}from"./showToast-5wcdUU64.js";import{C as D}from"./CustomCKEditor-AgSZ8sIt.js";import{u as K}from"./useTranslation-BeBCG-tb.js";import{M as l}from"./Modal-PiC5wIE_.js";import{F as p}from"./Form-BwWb-AQG.js";import{B as f}from"./Button-DkR4lkD4.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-Cl0fTsAK.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./inherits-B2gPeQio.js";import"./react-toastify.esm-Bwsw1aoB.js";import"./ThemeProvider-B2_W_dCu.js";import"./useMergedRefs-qO3RddUr.js";import"./useEventCallback-Blih2yEw.js";import"./useWillUnmount-ClVsaD3q.js";import"./TransitionWrapper-WlnnEX3_.js";import"./AbstractModalHeader-BzQN1u3g.js";import"./useWindow-XMw1SZRE.js";import"./querySelectorAll-BUF6GxAr.js";import"./useEventCallback-B3WkzC8o.js";import"./hasClass-CFrhebZ5.js";import"./NoopTransition-DV-WmqrX.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-DmCN2KAW.js";import"./index-BSRKPwsw.js";import"./Fade-_gEJg8B2.js";import"./divWithClassName-CMPxMdR0.js";import"./Col-BKpEL2i4.js";import"./Button-DW89RreQ.js";const be=({show:a,onHide:i,dataEdit:s})=>{var y,S,T,j,v,b,N,g;const{t}=K(),c=!!s,x=M().props.errors,A=M().props.statusConst,u=Object.entries(A||{}).map(([o,m])=>{var d;return{value:(d=o??"")==null?void 0:d.toString(),label:t(m??"")}}),e=G({initialValues:{productTypeName:(s==null?void 0:s.name)||"",productTypeStatus:(s==null?void 0:s.status)??"ACTIVE",description:(s==null?void 0:s.description)??""},validationSchema:q({productTypeName:h().max(150,"Must be 150 characters or less").required(t("Please enter this field")),productTypeStatus:h().required(t("Please select status")),description:h()}),onSubmit:o=>{const m=c?route("admin.product-types.update",{id:s.id}):route("admin.product-types.store");$[c?"put":"post"](m,o,{replace:!0,preserveScroll:!0,preserveState:!0,onSuccess:n=>{var C,F,B,L;if((F=(C=n.props)==null?void 0:C.message)!=null&&F.error){I(t(n.props.message.error),"error");return}e.resetForm(),i(),(L=(B=n.props)==null?void 0:B.message)!=null&&L.success&&I(t(n.props.message.success),"success")}})}}),P=(u==null?void 0:u.find(o=>(o==null?void 0:o.value)===e.values.productTypeStatus))??null;return V.useEffect(()=>{a?e.setValues({productTypeName:(s==null?void 0:s.name)||"",productTypeStatus:(s==null?void 0:s.status)??"ACTIVE",description:(s==null?void 0:s.description)??""}):e.resetForm()},[a,s]),V.useEffect(()=>{e.setErrors(x||{})},[x]),r.jsx(l,{id:"myModal",backdrop:"static",show:a,onHide:()=>{e.resetForm(),i()},centered:!0,size:"xl",children:r.jsxs(p,{onSubmit:e.handleSubmit,noValidate:!0,children:[r.jsx(l.Header,{closeButton:!0,children:r.jsx("h5",{children:t(c?"Edit product type":"Add product type")})}),r.jsxs(l.Body,{children:[r.jsxs(p.Group,{className:"mb-3",controlId:"productTypeName",children:[r.jsxs(p.Label,{children:[t("Product type name"),r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(p.Control,{type:"text",placeholder:t("Enter product type name"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.productTypeName,isInvalid:!!(e.touched.productTypeName&&e.errors.productTypeName)}),r.jsx(p.Control.Feedback,{type:"invalid",children:t(e.errors.productTypeName??"")})]}),r.jsxs(p.Group,{className:"mb-3",controlId:"productTypeStatus",children:[r.jsxs(p.Label,{children:[t("Status")," ",r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(z,{options:u,placeholder:t("Select status"),value:P,onChange:o=>{e.setFieldValue("productTypeStatus",(o==null?void 0:o.value)??"")},onBlur:()=>e.setFieldTouched("productTypeStatus",!0),className:(y=e==null?void 0:e.touched)!=null&&y.productTypeStatus&&((S=e==null?void 0:e.errors)!=null&&S.productTypeStatus)?"is-invalid":""}),((T=e==null?void 0:e.touched)==null?void 0:T.productTypeStatus)&&((j=e==null?void 0:e.errors)==null?void 0:j.productTypeStatus)&&r.jsx("div",{className:"invalid-feedback d-block",children:t(((v=e==null?void 0:e.errors)==null?void 0:v.productTypeStatus)??"")}),r.jsx(p.Control.Feedback,{type:"invalid",children:t(e.errors.productTypeStatus??"")})]}),r.jsxs(p.Group,{className:"mb-3",controlId:"description",children:[r.jsx(p.Label,{children:t("Description")}),r.jsx(D,{data:e.values.description,onChange:o=>{e.setFieldValue("description",o)},onBlur:()=>e.setFieldTouched("description",!0),placeholder:t("Enter product type description")}),((b=e==null?void 0:e.touched)==null?void 0:b.description)&&((N=e==null?void 0:e.errors)==null?void 0:N.description)&&r.jsx("div",{className:"invalid-feedback d-block",children:t(((g=e==null?void 0:e.errors)==null?void 0:g.description)??"")})]})]}),r.jsxs(l.Footer,{children:[r.jsx(f,{variant:"light",onClick:()=>{e.resetForm(),i()},children:t("Close")}),r.jsx(f,{variant:"primary",type:"submit",children:t(c?"Update":"Save changes")})]})]})})};export{be as ModelProductType};
