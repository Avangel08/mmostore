import{X as g,A as v,j as e,R as N}from"./ContextMenuProvider-1cB75p-p.js";import{u as y,c as C,d as F,a as S,F as k,h as w}from"./index.esm-AjD9Q23E.js";import{s as d}from"./showToast-BmC33B7c.js";import{u as D}from"./useTranslation-C7Yq1257.js";import{F as l}from"./Form-vqhQI7d8.js";import{R as b}from"./Row-Cp0Qg_e-.js";import{C as c}from"./Col-D0392pNZ.js";import{B as u}from"./Button-DzpAM0nN.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DfFFbtXD.js";import"./react-toastify.esm-CMP2010h.js";import"./ThemeProvider-CK0LS3qr.js";import"./index-hS6bo2zO.js";import"./Button-BmeryA7r.js";const R=/^(?!-)[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)+$/,U=()=>{const{t:a}=D(),{settings:o,domains:p,domainSuffix:h}=g().props,n=y({enableReinitialize:!0,initialValues:{domains:(o==null?void 0:o.domains)||[""]},validationSchema:C({domains:F().of(S().required(a("Please enter domain")).test("is-valid-domain","Domain format is invalid",s=>!s||R.test(s)).test("not-contain-suffix",`Domain cannot contain ${h}`,s=>!s||!s.toLowerCase().includes(h.toLowerCase()))).test("unique",a("Domains must be unique"),s=>s?new Set(s).size===s.length:!0).test("notInDefault",a("Cannot duplicate system domains"),s=>s?!s.some(i=>p.includes(i)):!0)}),onSubmit:s=>{const i=new FormData;i.append("domains",JSON.stringify(s.domains));const t=route("seller.theme-settings.update",{id:o.id});v.post(t,i,{preserveScroll:!0,onSuccess:r=>{var m,x,f,j;if((x=(m=r.props)==null?void 0:m.message)!=null&&x.error){d(a(r.props.message.error),"error");return}(j=(f=r.props)==null?void 0:f.message)!=null&&j.success?(d(a(r.props.message.success),"success"),n.resetForm()):d(a("Settings updated successfully"),"success")},onError:r=>{Object.keys(r).forEach(m=>{d(a(r[m]),"error")})}})}});return e.jsx(N.Fragment,{children:e.jsx(k,{value:n,children:e.jsxs(l,{noValidate:!0,onSubmit:n.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h5",{className:"mb-2",children:[a("Domain"),e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("p",{className:"text-muted fs-14 mb-1",children:a("To ensure that a website can be recognized and displayed to users, it must always have a primary domain name. Only one domain can be selected as the main domain")}),e.jsxs("p",{className:"text-muted fs-14 mb-3",children:["Tên miền mặc định:"," ",e.jsx("span",{className:"fst-italic",children:p})]}),e.jsx(b,{children:e.jsxs(c,{children:[e.jsx(w,{name:"domains",render:s=>e.jsxs("div",{className:"mb-3",children:[n.values.domains.map((i,t)=>e.jsxs(b,{className:"mb-2",children:[e.jsx(c,{children:e.jsx(l.Control,{type:"text",className:"form-control",id:"setting-domain",value:i,onChange:n.handleChange,onBlur:n.handleBlur,name:`domains[${t}]`,placeholder:a("Enter your domain")})}),n.values.domains.length>1&&e.jsx(c,{xs:"auto",children:e.jsx(u,{variant:"danger",onClick:()=>s.remove(t),children:e.jsx("i",{className:"ri-indeterminate-circle-line"})})})]},t)),e.jsxs(u,{variant:"secondary",onClick:()=>s.push(""),disabled:!0,children:[e.jsx("i",{className:"ri-add-circle-line"})," ",a("Add domain")]})]})}),e.jsxs(l.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:[" ",n.errors.domains," "]})]})})]}),e.jsx("div",{className:"text-start",children:e.jsx(u,{type:"submit",variant:"success",children:a("Update")})})]})})})};export{U as default};
