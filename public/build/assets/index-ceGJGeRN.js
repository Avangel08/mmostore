import{d as a,j as t,R as F,S as T,e as B}from"./ContextMenuProvider-CUf15T8b.js";import D from"./PageHeader-CUpgElbp.js";import A from"./index-BSDGPA6c.js";import{c as H,f as L,a as R}from"./index.esm-Dr9W4QE-.js";import{u as E}from"./formik.esm-D3LnCktS.js";import{s as f}from"./showToast-BZsJ5i2w.js";import{Q as I}from"./react-toastify.esm-ZGmoa_RU.js";import{ModalDeposit as $}from"./ModalDeposit-BQZQ0O1r.js";import{LayoutContext as q}from"./LayoutContext-x4nNfEt6.js";import{u as K}from"./useTranslation-CcWHtvoZ.js";import{C as O}from"./Container-BlrnZ9Ps.js";import{C as m}from"./Card-kFH9kF2D.js";import{F as n}from"./Form-tX-X8fEq.js";import{B as j}from"./Button-D8tMtwFd.js";import"./Row-Cl0apHvl.js";import"./ThemeProvider-B97jU0sy.js";import"./Col-6EOqiNtv.js";import"./thunk-rMgAJhEa.js";import"./index-DxlJFdn6.js";import"./throttle-CzOjd-at.js";import"./isSymbol-CYvIzdD2.js";import"./reselect-CiXCCDx7.js";import"./Navbar-B7sPeIVy.js";import"./scrollspy-B9hUgogq.js";import"./useEventCallback-D9rniTUJ.js";import"./NavbarContext-Wd2oAS9m.js";import"./inherits-0xqp8bJF.js";import"./setPrototypeOf-B4fUID9J.js";import"./index-DKnNWrZg.js";import"./logo-light-D3OEWz0M.js";import"./Dropdown-Dk26w-PX.js";import"./querySelectorAll-a65Eisif.js";import"./useMergedRefs-DxqJFB1B.js";import"./SSRProvider-BK0TK1ss.js";import"./useEventCallback-BkinHRQ0.js";import"./useIsomorphicEffect-7Ts4-1Xz.js";import"./useWindow-BmGtZXAu.js";import"./SelectableContext-Vjq9v8CG.js";import"./Button-NCU6JKbY.js";import"./DataKey-DjdvojM5.js";import"./hook-DbYEYK7e.js";import"./extends-CF3RwP-h.js";import"./Anchor-Bu2f26Hu.js";import"./InputGroupContext-Dg1iS0gZ.js";import"./Tab-giqs5KUv.js";import"./TabContext-4dsOJsIb.js";import"./NoopTransition-CYuCxw2t.js";import"./TransitionWrapper-BiovwvO2.js";import"./Fade-PIrusN3V.js";import"./Nav-E4wHda6I.js";import"./NavLink-DHHS74kT.js";import"./CardHeaderContext-CqMd3CTm.js";import"./ModalLogin-sLDId9Ph.js";import"./Modal-Cq5Iof0F.js";import"./useWillUnmount-CgiG1D_7.js";import"./AbstractModalHeader-BnVnJchn.js";import"./hasClass-B-lVPIr_.js";import"./CloseButton-CjwmBX8Z.js";import"./divWithClassName-F6D8z14O.js";import"./toString-DZQbVhdU.js";import"./hoist-non-react-statics.cjs-BQLgnwv_.js";import"./Collapse-CMEv0_-t.js";import"./sweetalert2.esm.all-5zhdP7Ax.js";const Q="/build/assets/icon-vcb-DvunKd-K.png",Y=()=>{const[l,y]=a.useState("bankTransfer"),[b,d]=a.useState(null),[u,h]=a.useState(null),[v,x]=a.useState(!1),[g,S]=a.useState(null),c=a.useContext(q),N=c==null?void 0:c.pingDeposit,p=a.useRef([]),{t:o}=K(),k=async()=>{C();const e=setInterval(async()=>{await N()&&clearInterval(e)},3e3);p.current.push(e)},C=()=>{p.current.forEach(e=>clearInterval(e)),p.current=[]},w=e=>{y(e),s.setFieldValue("paymentMethod",e)},M=e=>{d(e),h(e),s.setFieldValue("amount",e)},V=e=>{h(e),d(null),s.setFieldValue("amount",e)},P=a.useMemo(()=>H({paymentMethod:R().required(o("Please select payment method")),amount:L().min(1e4,o("Amount must be at least 10000")).required(o("Please enter amount"))}),[o]),s=E({initialValues:{paymentMethod:"bankTransfer",amount:0},validationSchema:P,onSubmit:async e=>{const i=route("buyer.deposit.checkout");await B.post(i,e).then(r=>{r.data.status==="success"?(x(!0),S(r.data.data)):f(o(r.data.message),"error")}).catch(r=>{f(o(r.response.data.message),"error")})}});return t.jsxs(F.Fragment,{children:[t.jsx($,{show:v,onHide:()=>x(!1),data:g}),t.jsx(T,{title:"Deposit"}),t.jsx(I,{}),t.jsx(D,{title:"Hỗ Trợ và Chính Sách Bảo Hành"}),t.jsx(O,{className:"mt-4",children:t.jsx(m,{className:"shadow-sm p-2",style:{minHeight:"50vh"},children:t.jsx(m.Body,{children:t.jsx(n,{onSubmit:s.handleSubmit,noValidate:!0,children:t.jsx("div",{className:"deposit-section",children:t.jsxs("div",{className:"row",children:[t.jsxs("div",{className:"col-md-6",children:[t.jsxs("h6",{children:["1. ",o("Select your subscription method")]}),t.jsx("div",{className:"payment-methods",children:t.jsx(m,{children:t.jsx(m.Body,{children:t.jsx(n.Check,{type:"radio",id:"bankTransfer",name:"paymentMethod",label:t.jsxs("div",{className:"d-flex align-items-center",children:[t.jsx("span",{className:"d-block justify-content-center",children:o("You cab transfer money directly via Vietcombank")}),t.jsx("img",{src:Q,alt:"Bank Transfer",className:"ms-3",style:{height:"30px"}})]}),checked:l==="bankTransfer",onChange:()=>w("bankTransfer"),className:"mb-3"})})})})]}),t.jsxs("div",{className:"col-md-6",children:[t.jsxs("h6",{children:["2. ",o("Deposit amount")]}),t.jsx("div",{className:"amount-options mb-3",children:t.jsx("div",{className:"btn-group w-100",children:[1e4,2e4,5e4,1e5,5e5].map(e=>t.jsx(j,{variant:b===e?"primary":"outline-secondary",onClick:()=>M(e),children:e.toLocaleString("vi-VN")},e))})}),t.jsxs("div",{className:"mb-3",children:[t.jsxs(n.Label,{children:[o("Or enter custom amount"),":"]}),t.jsx(n.Control,{name:"amount",type:"text",placeholder:o("Enter amount"),value:u?u.toLocaleString("vi-VN"):"",onChange:e=>{const i=e.target.value.replace(/\./g,""),r=i?Number(i):null;V(r),s.setFieldValue("amount",r)},onBlur:s.handleBlur,className:`form-control ${s.touched.amount&&s.errors.amount?"is-invalid":""}`}),t.jsx(n.Control.Feedback,{type:"invalid",children:o(s.errors.amount||"")})]}),t.jsx(j,{variant:"primary",className:"w-100",type:"submit",disabled:s.isSubmitting,onClick:k,children:s.isSubmitting?o("Processing..."):o("Pay now")})]})]})})})})})})]})};Y.layout=l=>t.jsx(A,{children:l});export{Y as default};
