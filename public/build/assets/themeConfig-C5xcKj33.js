import{d as y,X as h,A as $,j as e,R as _}from"./ContextMenuProvider-DK3oxQYr.js";import{u as w,c as B,a as g,g as H}from"./index.esm-BSLmOO6X.js";import{C as D}from"./CustomCKEditor-D37qhtp9.js";import{s as p}from"./showToast-CF18EvDS.js";import{S as E}from"./react-select.esm-BelfbI4k.js";import{F as R,r as P,p as V,a as M}from"./filepond-plugin-image-preview.esm-B6H3BrX9.js";import{i as q,a as G,b as U}from"./theme-store-3-P91gzE90.js";import{u as z}from"./useTranslation-DPKXtvuf.js";import{F as i}from"./Form-BL_QAQYe.js";import{R as k}from"./Row-yXb5PzTN.js";import{C as F}from"./Col-CTtgbep0.js";import{B as A}from"./Button-CFXbok-i.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-CLORWFEJ.js";import"./react-toastify.esm-9xgEgjS9.js";import"./inherits-BJ6TuR_q.js";import"./setPrototypeOf-DgZC2w_0.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-BFqQA52f.js";import"./ThemeProvider-Ct_rgNLL.js";import"./index-DBORkYtJ.js";import"./Button-V6sZ7J-q.js";P(V,M);const K=[{key:"theme_1",label:"Theme 1",image:q},{key:"theme_2",label:"Theme 2",image:G},{key:"theme_3",label:"Theme 3",image:U}],xe=()=>{var j,f;const{t}=z(),[C,T]=y.useState(null),[I,L]=y.useState([]),l=h().props.errors,c=h().props.storageUrl,{settings:a,currency_options:x}=h().props,u=!!a,r=w({enableReinitialize:!0,initialValues:{theme:(a==null?void 0:a.theme)||"theme_1",storeName:(a==null?void 0:a.storeName)||"",storeLogo:(a==null?void 0:a.storeLogo)||"",pageHeaderImage:(a==null?void 0:a.pageHeaderImage)||"",pageHeaderText:(a==null?void 0:a.pageHeaderText)||"Hello, welcome to my store",currency:(a==null?void 0:a.currency)||"VND",metaDescription:(a==null?void 0:a.metaDescription)||""},validationSchema:B({storeName:g().required("Please enter store name"),pageHeaderImage:H().required("Please select a image"),storeLogo:H().required("Please select a logo store"),pageHeaderText:g().required("Please enter page header text"),currency:g().required(t("Please choose currency"))}),onSubmit:s=>{const o=new FormData;o.append("theme",s.theme),o.append("storeName",s.storeName),o.append("storeLogo",s.storeLogo),o.append("pageHeaderImage",s.pageHeaderImage),o.append("pageHeaderText",s.pageHeaderText),o.append("currency",s.currency);const n=route("seller.theme-settings.update",{id:a.id});$.post(n,o,{preserveScroll:!0,onSuccess:d=>{var m,b,N,v;if((b=(m=d.props)==null?void 0:m.message)!=null&&b.error){p(t(d.props.message.error),"error");return}(v=(N=d.props)==null?void 0:N.message)!=null&&v.success?(p(t(d.props.message.success),"success"),r.resetForm()):p(t("Settings updated successfully"),"success")},onError:d=>{Object.keys(d).forEach(m=>{p(t(d[m]),"error")})}})}}),S=s=>{const o=s.target.files[0],n=new FileReader;n.onload=d=>{T(d.target.result),r.setFieldValue("storeLogo",o),r.setFieldTouched("storeLogo",!0)},n.readAsDataURL(o)};return e.jsx(_.Fragment,{children:e.jsxs(i,{noValidate:!0,onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h5",{className:"mb-0",children:t("Store")}),e.jsx("div",{className:"d-flex gap-2",children:e.jsxs("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-success",children:[e.jsx("i",{className:"ri-eye-line align-bottom me-1"}),t("View store")]})})]}),e.jsx(k,{children:e.jsxs(F,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fs-13 mb-3 fw-medium",children:e.jsxs("span",{children:[t("Theme")," ",e.jsx("span",{className:"text-danger",children:"*"})]})}),e.jsx(k,{children:K.map(s=>e.jsx(F,{xs:"4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:s.image,className:"rounded avatar-xl mb-2"}),e.jsxs(i.Group,{className:"d-flex align-items-center justify-content-center gap-2",children:[e.jsx(i.Check,{type:"radio",name:"theme",value:String(s.key),id:`${s.key}`,disabled:s.key==="theme_2"||s.key==="theme_3",onChange:r.handleChange,onBlur:r.handleBlur,checked:r.values.theme===String(s.key)}),e.jsx(i.Label,{htmlFor:`${s.key}`,className:`text-muted mb-0 ${s.key==="theme_2"||s.key==="theme_3"?"cursor-default":"cursor-pointer"}`,children:t(s.label)})]}),s.key==="theme_2"||s.key==="theme_3"?e.jsx("div",{style:{fontSize:12,fontStyle:"italic",color:"#fd7e14"},children:t("Coming soon")}):null]})},s.key))})]}),e.jsx("div",{className:"mb-3",children:e.jsxs(i.Group,{controlId:"currency",children:[e.jsxs(i.Label,{children:[t("Currency")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(E,{options:x,placeholder:t("Select currency"),name:"currency",value:x.find(s=>s.value===r.values.currency),onChange:s=>{r.setFieldValue("currency",(s==null?void 0:s.value)||"")},onBlur:()=>r.setFieldTouched("currency",!0)}),(r.touched.currency&&r.errors.currency||(l==null?void 0:l.currency))&&e.jsx("div",{className:"invalid-feedback d-block",children:t(r.errors.currency||(l==null?void 0:l.currency))})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(i.Group,{children:[e.jsxs(i.Label,{className:"form-label",htmlFor:"setting-title-input",children:[t("Store name")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(i.Control,{type:"text",className:"form-control",onChange:r.handleChange,onBlur:r.handleBlur,name:"storeName",id:"setting-title-input",placeholder:t("Enter name store"),value:r.values.storeName,isInvalid:!!((j=r.touched)!=null&&j.storeName&&((f=r.errors)!=null&&f.storeName))})]}),e.jsxs(i.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:[" ",r.errors.storeName," "]})]}),u&&(a==null?void 0:a.storeLogo)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fs-13 mb-3 fw-medium",children:e.jsx("span",{children:t("Current store logo")})}),e.jsx("a",{target:"_blank",href:`${c}/${a==null?void 0:a.storeLogo}`,children:e.jsx("img",{src:`${c}/${a==null?void 0:a.storeLogo}?v=${Date.now()}`,style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain",border:"1px solid #dee2e6",borderRadius:"4px"}})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"fs-14 mb-2",children:[t("Logo")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("p",{className:"text-muted fst-italic",children:"KÃ­ch thÆ°á»›c tá»‘i thiá»ƒu: 124 Ã— 17 px"}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("div",{className:"position-absolute top-100 start-100 translate-middle",children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{htmlFor:"customer-image-input",className:"mb-0","data-bs-toggle":"tooltip","data-bs-placement":"right",title:"Select Image",children:e.jsx("div",{className:"avatar-xs cursor-pointer",children:e.jsx("div",{className:"avatar-title bg-light border rounded-circle text-muted",children:e.jsx("i",{className:"ri-image-fill"})})})}),e.jsx(i.Control,{className:"form-control d-none",id:"customer-image-input",type:"file",name:"storeLogo",accept:"image/png, image/gif, image/jpeg",onChange:S})]})}),e.jsx("div",{className:"avatar-lg",children:e.jsx("div",{className:"avatar-title bg-light rounded",children:e.jsx("img",{src:C,id:"product-img",alt:"",className:"avatar-md h-auto"})})})]})}),r.errors.storeLogo&&r.touched.storeLogo?e.jsx("div",{className:"invalid-feedback d-block",children:t(r.errors.storeLogo||(l==null?void 0:l.storeLogo))}):null]}),u&&(a==null?void 0:a.pageHeaderImage)&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fs-13 mb-3 fw-medium",children:e.jsx("span",{children:t("Current page header image")})}),e.jsx("a",{target:"_blank",href:`${c}/${a==null?void 0:a.pageHeaderImage}`,children:e.jsx("img",{src:`${c}/${a==null?void 0:a.pageHeaderImage}?v=${Date.now()}`,style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain",border:"1px solid #dee2e6",borderRadius:"4px"}})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(i.Label,{children:[t("Page header image")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("p",{className:"text-muted fst-italic",children:"KÃ­ch thÆ°á»›c yÃªu cáº§u: 262 Ã— 195 px"}),e.jsx(R,{files:I,onupdatefiles:s=>{if(L(s),s.length>0&&s[0].file){const o=s[0].file;r.setFieldValue("pageHeaderImage",o),r.setFieldTouched("pageHeaderImage",!0)}else r.setFieldValue("pageHeaderImage",null),r.setFieldTouched("pageHeaderImage",!0)},allowMultiple:!1,maxFiles:1,name:"pageHeaderImage",acceptedFileTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],labelIdle:t(`ðŸ“· ${t("Drag & Drop your image or")} <span class="filepond--label-action">${t("Choose file")}</span>`),maxFileSize:"2MB",instantUpload:!1,credits:!1,className:r.touched.pageHeaderImage&&r.errors.pageHeaderImage||l!=null&&l.pageHeaderImage?"is-invalid":""}),(r.touched.pageHeaderImage&&r.errors.pageHeaderImage||(l==null?void 0:l.pageHeaderImage))&&e.jsx(i.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:t(r.errors.pageHeaderImage||(l==null?void 0:l.pageHeaderImage))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(i.Label,{children:t("Page header text")}),e.jsx(D,{data:r.values.pageHeaderText,onChange:s=>{r.setFieldValue("pageHeaderText",s)},onBlur:()=>r.setFieldTouched("pageHeaderText",!0),placeholder:t("Enter detailed description")}),(r.touched.pageHeaderText&&r.errors.pageHeaderText||(l==null?void 0:l.pageHeaderText))&&e.jsx(i.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:t(r.errors.pageHeaderText||(l==null?void 0:l.pageHeaderText))})]}),e.jsx("h5",{className:"mb-3",children:t("Meta tags")}),e.jsx("div",{className:"mb-3",children:e.jsxs(i.Group,{children:[e.jsx(i.Label,{className:"form-label",htmlFor:"setting-meta-description-input",children:t("Meta description")}),e.jsx(i.Control,{type:"text",className:"form-control",onChange:r.handleChange,onBlur:r.handleBlur,name:"metaDescription",id:"setting-meta-description-input",placeholder:t("Enter meta description"),value:r.values.metaDescription})]})})]})})]}),e.jsx("div",{className:"text-start",children:e.jsx(A,{type:"submit",variant:"success",children:t("Update")})})]})})};export{xe as default};
