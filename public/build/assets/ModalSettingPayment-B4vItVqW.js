import{X as G,d as b,A as P,j as s}from"./ContextMenuProvider-C6Zbl1jY.js";import{c as M,a as i,u as O}from"./index.esm-DDmU3ThL.js";import{s as p}from"./showToast-fbb08ABK.js";import{u as T}from"./useTranslation-BhZFnGss.js";import{M as _}from"./Modal-872qn2Lf.js";import{F as a}from"./Form-BfHf_XRV.js";import{B as C}from"./Button-Chz4fRXx.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./react-toastify.esm-CuUT_FeT.js";import"./ThemeProvider-pZJi_k1m.js";import"./useMergedRefs-B6t_QqDd.js";import"./useEventCallback-D1I9Eqpd.js";import"./useWillUnmount-DBOrVC9s.js";import"./TransitionWrapper-CaF58Jrg.js";import"./setPrototypeOf-B4fUID9J.js";import"./AbstractModalHeader-C5r8ZRHZ.js";import"./useWindow-CLBUEokQ.js";import"./querySelectorAll-D2irIcMG.js";import"./useEventCallback-BrpCD40C.js";import"./hasClass-pPcchvBp.js";import"./NoopTransition-Dpcpe6YD.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-zBsxik1D.js";import"./index-DCwKZfII.js";import"./Fade-DeSGF47Y.js";import"./divWithClassName-BLdvSJyI.js";import"./Col-L5NkX0nX.js";import"./Button-CsU7cm0L.js";const ge=({show:f,onHide:j,dataEdit:o,listBank:v})=>{var w,L,S,F;const{t:n}=T(),r=G().props.errors,[I,m]=b.useState(!1),[k,N]=b.useState(!1),[V,d]=b.useState(!1),q=b.useMemo(()=>M({key:i().required(n("Please select a bank")),account_name:i().max(150,"Must be 150 characters or less").required(n("Please enter this field")),account_number:i().required(n("Please enter this field")),user_name:i().required(n("Please enter this field")),password:i().required(n("Please enter this field")),...k?{otp:i().required(n("Please enter this field"))}:{}}),[k,n]),e=O({initialValues:{key:(o==null?void 0:o.key)||"",account_name:((w=o==null?void 0:o.details)==null?void 0:w.account_name)||"",account_number:((L=o==null?void 0:o.details)==null?void 0:L.account_number)??"",user_name:((S=o==null?void 0:o.details)==null?void 0:S.user_name)??"",password:((F=o==null?void 0:o.details)==null?void 0:F.password)??"",otp:""},validationSchema:q,onSubmit:l=>{const t=route("seller.payment-history.store");P["post"](t,l,{onSuccess:c=>{var h,x,g,y;if((x=(h=c.props)==null?void 0:h.message)!=null&&x.error){p(n(c.props.message.error),"error");return}e.resetForm(),j(),(y=(g=c.props)==null?void 0:g.message)!=null&&y.success&&p(n(c.props.message.success),"success")}})}});return b.useEffect(()=>{var l,t,u,c;f?(e.setValues({key:(o==null?void 0:o.key)||"",account_name:((l=o==null?void 0:o.details)==null?void 0:l.account_name)||"",account_number:((t=o==null?void 0:o.details)==null?void 0:t.account_number)??"",user_name:((u=o==null?void 0:o.details)==null?void 0:u.user_name)??"",password:((c=o==null?void 0:o.details)==null?void 0:c.password)??"",otp:""}),N(!1),d(!1),m(!1)):e.resetForm()},[f,o]),s.jsx(_,{id:"myModal",backdrop:"static",show:f,onHide:()=>{e.resetForm(),j()},centered:!0,children:s.jsxs(a,{onSubmit:e.handleSubmit,noValidate:!0,children:[s.jsx(_.Header,{closeButton:!0,children:s.jsx("h5",{children:n("Setting Payment")})}),s.jsxs(_.Body,{children:[s.jsxs(a.Group,{className:"mb-3",controlId:"key",children:[s.jsxs(a.Label,{children:[n("Bank")," ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs(a.Select,{name:"key",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.key,isInvalid:!!(e.touched.key&&e.errors.key||r!=null&&r.key),children:[s.jsx("option",{value:"",children:n("Select bank")}),v&&Object.keys(v).map(l=>s.jsx("option",{value:l,selected:e.values.key===l,children:n(v[l])},l))]}),s.jsx(a.Control.Feedback,{type:"invalid",children:n(e.errors.key||(r==null?void 0:r.key))})]}),s.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[s.jsxs(a.Label,{children:[n("Account name"),s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(a.Control,{name:"account_name",type:"text",placeholder:n("Enter account name"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.account_name,isInvalid:!!(e.touched.account_name&&e.errors.account_name||r!=null&&r.account_name)}),s.jsx(a.Control.Feedback,{type:"invalid",children:n(e.errors.account_name||(r==null?void 0:r.account_name))})]}),s.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[s.jsxs(a.Label,{children:[n("Account number"),s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(a.Control,{name:"account_number",type:"text",placeholder:n("Enter account number"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.account_number,isInvalid:!!(e.touched.account_number&&e.errors.account_number||r!=null&&r.account_number)}),s.jsx(a.Control.Feedback,{type:"invalid",children:n(e.errors.account_number||(r==null?void 0:r.account_number))})]}),s.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[s.jsxs(a.Label,{children:[n("User name"),s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(a.Control,{name:"user_name",type:"text",placeholder:n("0974 xxx xxx"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.user_name,isInvalid:!!(e.touched.user_name&&e.errors.user_name||r!=null&&r.user_name)}),s.jsx(a.Control.Feedback,{type:"invalid",children:n(e.errors.user_name||(r==null?void 0:r.user_name))})]}),s.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[s.jsxs(a.Label,{children:[n("Password"),s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(a.Control,{name:"password",type:"text",placeholder:n("Enter password"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.password,isInvalid:!!(e.touched.password&&e.errors.password||r!=null&&r.password)}),s.jsx(a.Control.Feedback,{type:"invalid",children:n(e.errors.password||(r==null?void 0:r.password))})]}),s.jsx(C,{variant:"success",type:"button",className:"mb-3",disabled:I,onClick:async l=>{l.preventDefault(),l.stopPropagation(),m(!0),e.setTouched({key:!0,account_name:!0,account_number:!0,user_name:!0,password:!0,otp:e.touched.otp||!1});const t=await e.validateForm();if(t.key||t.account_name||t.account_number||t.user_name||t.password){p(n("Please enter this field"),"error"),m(!1);return}P.post(route("seller.payment-history.verify-payment"),{key:e.values.key,account_name:e.values.account_name,account_number:e.values.account_number,user_name:e.values.user_name,password:e.values.password,otp:e.values.otp??null},{preserveScroll:!0,preserveState:!0,only:[],onSuccess:u=>{var c,h,x,g,y,B;if((h=(c=u.props)==null?void 0:c.message)!=null&&h.error){p(n(u.props.message.error),"error"),d(!1),m(!1);return}if((g=(x=u.props)==null?void 0:x.message)!=null&&g.info){p(n(u.props.message.info),"success"),N(!0),d(!0),m(!0);return}p(n(((B=(y=u.props)==null?void 0:y.message)==null?void 0:B.success)||"Verified successfully"),"success"),d(!0),m(!0)},onError:()=>{p(n("Verification failed"),"error"),m(!1)},onFinish:()=>{}})},children:n("Verify Payment")}),k&&s.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[s.jsxs(a.Label,{children:[n("OTP"),s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx(a.Control,{name:"otp",type:"text",placeholder:n("Enter OTP"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.otp,isInvalid:!!(e.touched.otp&&e.errors.otp||r!=null&&r.otp)}),s.jsx(a.Control.Feedback,{type:"invalid",children:n(e.errors.otp||(r==null?void 0:r.otp))})]})]}),s.jsxs(_.Footer,{children:[s.jsx(C,{variant:"light",onClick:()=>{e.resetForm(),j()},children:n("Close")}),s.jsx(C,{variant:"primary",type:"submit",disabled:!V,children:n("Save changes")})]})]})})};export{ge as ModalSettingPayment};
