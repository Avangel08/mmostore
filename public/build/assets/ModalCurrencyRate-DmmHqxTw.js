import{X as y,d as h,A as k,j as r}from"./ContextMenuProvider-DK3oxQYr.js";import{c as N,a as b,f as B,u as R}from"./index.esm-BSLmOO6X.js";import{s as f}from"./showToast-CF18EvDS.js";import{F as d,_ as L,v as V}from"./default-gjMU6hcX.js";import{h as u}from"./moment-C5S46NFB.js";import{u as I}from"./useTranslation-DPKXtvuf.js";import{M as i}from"./Modal-BfVe3cAO.js";import{F as n}from"./Form-BL_QAQYe.js";import{B as M}from"./Button-CFXbok-i.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-CLORWFEJ.js";import"./react-toastify.esm-9xgEgjS9.js";import"./index-DBORkYtJ.js";import"./ThemeProvider-Ct_rgNLL.js";import"./useMergedRefs-DpVwXFtQ.js";import"./useEventCallback-vOopJezb.js";import"./useWillUnmount-Dgjk51VS.js";import"./TransitionWrapper-Cd1cgGa9.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./setPrototypeOf-DgZC2w_0.js";import"./AbstractModalHeader-CvVyook-.js";import"./useWindow-C0YEyK7V.js";import"./querySelectorAll-DyAC2eix.js";import"./useEventCallback-CkenMm09.js";import"./hasClass-FKaqrMiU.js";import"./NoopTransition-CTkquFTR.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-moyFQeDE.js";import"./Fade-BVcVAuqg.js";import"./divWithClassName-D5EYi2Il.js";import"./Col-CTtgbep0.js";import"./Button-V6sZ7J-q.js";const ve=({show:a,onHide:p,dataEdit:e,dataOptions:m})=>{const{t:s,i18n:D}=I(),t=y().props.errors,F=h.useRef(null),v=!!e,_=()=>{switch(D.language){case"vi":return V.Vietnamese;default:return L.english}},C=h.useMemo(()=>N({to_vnd:B().required(s("Please enter this field")).min(1e3,s("Must be greater than or equal to 1000")),date:b().required(s("Please select this field")),status:b().required(s("Please select this field"))}),[s]),o=R({initialValues:{id:(e==null?void 0:e.id)||"",to_vnd:(e==null?void 0:e.to_vnd)||1e3,date:(e==null?void 0:e.date)||u().format("YYYY-MM-DD"),status:e!=null&&e.status?String(e.status):"1"},validationSchema:C,enableReinitialize:!0,onSubmit:l=>{const S=v?route("seller.currency-rate.update",{id:e.id}):route("seller.currency-rate.store");k[v?"put":"post"](S,l,{onSuccess:c=>{var x,j,g,Y;if((j=(x=c.props)==null?void 0:x.message)!=null&&j.error){f(s(c.props.message.error),"error");return}o.resetForm(),p(),(Y=(g=c.props)==null?void 0:g.message)!=null&&Y.success&&f(s(c.props.message.success),"success")},onError:c=>{console.log("Submit errors:",c),f(s("An error occurred"),"error")}})}});return h.useEffect(()=>{a?o.setValues({id:(e==null?void 0:e.id)||"",to_vnd:(e==null?void 0:e.to_vnd)||1e3,date:(e==null?void 0:e.date)||u().format("YYYY-MM-DD"),status:e!=null&&e.status?String(e.status):"1"}):o.resetForm()},[a,e]),console.log("Current date:",u().format("YYYY-MM-DD")),console.log("New Date():",new Date),console.log("Moment new Date():",u(new Date).format("YYYY-MM-DD")),r.jsx(i,{id:"myModal",backdrop:"static",show:a,onHide:()=>{o.resetForm(),p()},centered:!0,children:r.jsxs(n,{onSubmit:o.handleSubmit,noValidate:!0,children:[r.jsx(i.Header,{closeButton:!0,children:r.jsx("h5",{children:s("Currency Rate")})}),r.jsxs(i.Body,{children:[r.jsxs(n.Group,{className:"mb-3",controlId:"to_vnd",children:[r.jsxs(n.Label,{children:[s("VND Rate"),r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(n.Control,{name:"to_vnd",type:"number",placeholder:s("Enter VND Rate"),step:"1000",min:"1000",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.to_vnd,isInvalid:!!(o.touched.to_vnd&&o.errors.to_vnd||t!=null&&t.to_vnd)}),r.jsx(n.Control.Feedback,{type:"invalid",children:s(o.errors.to_vnd||(t==null?void 0:t.to_vnd))})]}),r.jsxs(n.Group,{className:"mb-3",controlId:"date",children:[r.jsxs(n.Label,{children:[s("Effective from date"),r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(d,{name:"date",ref:F,className:"form-control",placeholder:s("Select date"),options:{dateFormat:"Y-m-d",locale:_()},value:o.values.date,onChange:l=>{o.setFieldValue("date",l[0]?u(l[0]).format("YYYY-MM-DD"):"")}}),r.jsx(n.Control.Feedback,{type:"invalid",children:s(o.errors.date||(t==null?void 0:t.date))})]}),r.jsxs(n.Group,{className:"mb-3",controlId:"name",children:[r.jsxs(n.Label,{children:[s("Status")," ",r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsxs(n.Select,{name:"status",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.status,isInvalid:!!(o.touched.status&&o.errors.status||t!=null&&t.status),children:[r.jsx("option",{value:"",children:s("Select status")}),(m==null?void 0:m.statusList)&&Object.keys(m.statusList).map(l=>r.jsx("option",{value:l,children:s(m==null?void 0:m.statusList[l])},l))]}),r.jsx(n.Control.Feedback,{type:"invalid",children:s(o.errors.status||(t==null?void 0:t.status))})]})]}),r.jsxs(i.Footer,{children:[r.jsx(M,{variant:"light",onClick:()=>{o.resetForm(),p()},children:s("Close")}),r.jsx(M,{variant:"primary",type:"submit",children:s("Save changes")})]})]})})};export{ve as ModalCurrencyRate};
