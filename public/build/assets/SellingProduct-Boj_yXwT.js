import{X as y,d as l,A as p,j as r}from"./ContextMenuProvider-DSIAf6_I.js";import{h as S}from"./moment-C5S46NFB.js";import{T as w}from"./TableWithContextMenu-saszmt85.js";import{c as k}from"./sweetAlert-BmVWMoL6.js";import{s as n}from"./showToast-B_axlP3a.js";import D from"./SellerAccountFilter-yM83R39s.js";import{u as v}from"./useTranslation-49euhmcM.js";import{C as c}from"./Col-febpeRkL.js";import{B as g}from"./Button-dF3JTjah.js";import"./index-V-hNmBuP.js";import"./ThemeProvider-Dp1LrSTH.js";import"./Row-DPRA5jRj.js";import"./Card-Cs7ckeC6.js";import"./CardHeaderContext-DF8dp8g4.js";import"./divWithClassName-BFGhCr0m.js";import"./react-select.esm-DWbzI1uw.js";import"./setPrototypeOf-B4fUID9J.js";import"./extends-CF3RwP-h.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./useQueryParam-CtqmYf93.js";import"./react-toastify.esm-Cm0IYqj3.js";import"./default-BhaHl593.js";import"./index-9jpn6ojX.js";import"./Form--TVfZSDf.js";import"./Button-CnTasM7B.js";const re=()=>{const{t}=v(),{subProduct:o,accounts:f}=y().props,[T,b]=l.useState(1),[A,h]=l.useState(10),i=l.useCallback((a=1,e=10,s)=>{P(a,e),p.reload({only:["accounts"],replace:!0,data:{accountPage:a,accountPerPage:e,...s}})},[]),x=(a,e,s)=>{i(a,e,s)},P=(a,e)=>{b(a||1),h(e||10)},j=l.useMemo(()=>[{header:t("Product"),cell:a=>{const e=a.row.original;return r.jsx("span",{children:`${e==null?void 0:e.key}|${e==null?void 0:e.data}`})},accessorKey:"",enableColumnFilter:!1,enableSorting:!0},{header:t("Created date"),accessorKey:"created_at",enableColumnFilter:!1,enableSorting:!0,cell:a=>r.jsx("span",{children:S(a.getValue()).format("DD/MM/YYYY HH:mm")})},{header:t("Status"),accessorKey:"status",enableColumnFilter:!1,enableSorting:!0,cell:a=>{const e=a.getValue()||"Unknown",s={LIVE:"bg-success",BAN:"bg-danger",Unknown:"bg-dark"};return r.jsx("span",{className:`badge ${(s==null?void 0:s[e])||"bg-dark"} fs-6 fw-medium`,children:t(e)})}},{header:t("Order ID"),accessorKey:"order_id",enableColumnFilter:!1,enableSorting:!0}],[t]),C=async()=>{await k({title:t("Delete all unsold products?"),text:t("Unsold products will be deleted after all uploaded files have been processed"),confirmButtonText:t("Delete"),cancelButtonText:t("Cancel")})&&p.delete(route("seller.account.destroy",{id:(o==null?void 0:o.id)??0}),{replace:!0,preserveScroll:!0,preserveState:!0,onSuccess:e=>{var s,u,m,d;if((u=(s=e.props)==null?void 0:s.message)!=null&&u.error){n(t(e.props.message.error),"error");return}(d=(m=e.props)==null?void 0:m.message)!=null&&d.success&&n(t(e.props.message.success),"success")},onError:e=>{Object.keys(e).forEach(s=>{n(t(e==null?void 0:e[s]),"error")})}})};return r.jsxs(r.Fragment,{children:[r.jsx(c,{lg:12,className:"px-4",children:r.jsx(D,{onFilter:x})}),r.jsxs(c,{lg:12,className:"d-flex justify-content-between mb-4",children:[r.jsxs("h5",{children:[t("Product list")," (",(o==null?void 0:o.quantity)??0," ",t("products"),")"]}),r.jsxs("div",{className:"d-flex gap-2",children:[r.jsx(g,{variant:"danger",onClick:C,children:t("Delete all")}),r.jsx(g,{as:"a",href:route("seller.account.download-unsold-account",{subProductId:(o==null?void 0:o.id)||0}),variant:"success",children:t("Download unsold products")})]})]}),r.jsx(c,{lg:12,className:"",children:r.jsx("div",{children:r.jsx(w,{columns:j,data:f||[],divClass:"table-responsive table-card mb-3",tableClass:"table align-middle table-nowrap mb-0",theadClass:"table-light",enableContextMenu:!1,isPaginateTable:!0,isCursorPaginateTable:!0,keyPageParam:"accountPage",keyPerPageParam:"accountPerPage",onReloadTable:i,showPaginationEllipsis:!0,maxVisiblePages:7,perPageEntries:[100,200,500,1e3]})})})]})};export{re as default};
