import{R as ae,d as R,X as Ue,A as fe,j as o}from"./ContextMenuProvider-DFREiPcv.js";import{u as Ge,c as We,a as Ve,e as qe}from"./index.esm-Czd_L4t5.js";import{S as ze}from"./react-select.esm-DTCSRypL.js";import{T as Ze}from"./TableWithContextMenu-ynr7VDOp.js";import{s as te}from"./showToast-CeZv7gLT.js";import{c as He}from"./sweetAlert-BmVWMoL6.js";import{u as Xe}from"./useTranslation-D39YeQFB.js";import{O as xe,T as be}from"./OverlayTrigger-BbiRh_dV.js";import{B as Y}from"./Button-BsBmyVLd.js";import{M as oe}from"./Modal-OScjm0ij.js";import{R as de}from"./Row-FJwLRO1g.js";import{C as se}from"./Col-DBI5tkGA.js";import{F as z}from"./Form-Cjorq_0x.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./setPrototypeOf-B4fUID9J.js";import"./extends-CF3RwP-h.js";import"./inherits-B2gPeQio.js";import"./index-tr3B8MnC.js";import"./ThemeProvider-BDla6bcB.js";import"./Card-2aziMDW6.js";import"./CardHeaderContext-AAbOcQG0.js";import"./divWithClassName-JXg38tL1.js";import"./useQueryParam-vwuH2Sgz.js";import"./react-toastify.esm-DomHVano.js";import"./hasClass-BjxCIM-n.js";import"./TransitionWrapper-C34d5mhF.js";import"./NoopTransition-BAZ5VDex.js";import"./useEventCallback-Dzm3lM-z.js";import"./index-CQRQ5BRm.js";import"./useWillUnmount-BLUcktTi.js";import"./hook-CsAGpoGN.js";import"./useIsomorphicEffect-BBP_sHaO.js";import"./useEventCallback-Bo6dkO2h.js";import"./Fade-BueSG0hR.js";import"./Button-DuratkUs.js";import"./AbstractModalHeader-B7aGwBMQ.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-BtGLr2Uv.js";function Ee(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a}var le;(function(e){e.event="event",e.props="prop"})(le||(le={}));function Q(){}function Je(e){var t,a=void 0;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];return t&&r.length===t.length&&r.every(function(i,u){return i===t[u]})||(t=r,a=e.apply(void 0,r)),a}}function ue(e){return!!(e||"").match(/\d/)}function ne(e){return e==null}function Qe(e){return typeof e=="number"&&isNaN(e)}function Pe(e){return ne(e)||Qe(e)||typeof e=="number"&&!isFinite(e)}function Te(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Ye(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function er(e,t,a){var r=Ye(a),n=e.search(/[1-9]/);return n=n===-1?e.length:n,e.substring(0,n)+e.substring(n,e.length).replace(r,"$1"+t)}function rr(e){var t=R.useRef(e);t.current=e;var a=R.useRef(function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];return t.current.apply(t,r)});return a.current}function Ne(e,t){t===void 0&&(t=!0);var a=e[0]==="-",r=a&&t;e=e.replace("-","");var n=e.split("."),i=n[0],u=n[1]||"";return{beforeDecimal:i,afterDecimal:u,hasNegation:a,addNegation:r}}function tr(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var a=e.split("."),r=a[0].replace(/^0+/,"")||"0",n=a[1]||"";return(t?"-":"")+r+(n?"."+n:"")}function Ae(e,t,a){for(var r="",n=a?"0":"",i=0;i<=t-1;i++)r+=e[i]||n;return r}function Ce(e,t){return Array(t+1).join(e)}function Be(e){var t=e+"",a=t[0]==="-"?"-":"";a&&(t=t.substring(1));var r=t.split(/[eE]/g),n=r[0],i=r[1];if(i=Number(i),!i)return a+n;n=n.replace(".","");var u=1+i,b=n.length;return u<0?n="0."+Ce("0",Math.abs(u))+n:u>=b?n=n+Ce("0",u-b):n=(n.substring(0,u)||"0")+"."+n.substring(u),a+n}function je(e,t,a){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||a)&&t,n=Ne(e),i=n.beforeDecimal,u=n.afterDecimal,b=n.hasNegation,I=parseFloat("0."+(u||"0")),N=u.length<=t?"0."+u:I.toFixed(t),w=N.split("."),h=i;i&&Number(w[0])&&(h=i.split("").reverse().reduce(function(D,T,m){return D.length>m?(Number(D[0])+Number(T)).toString()+D.substring(1,D.length):T+D},w[0]));var V=Ae(w[1]||"",t,a),p=b?"-":"",v=r?".":"";return""+p+h+v+V}function ee(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",t),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Fe=Je(function(e,t){for(var a=0,r=0,n=e.length,i=t.length;e[a]===t[a]&&a<n;)a++;for(;e[n-1-r]===t[i-1-r]&&i-r>a&&n-r>a;)r++;return{from:{start:a,end:n-r},to:{start:a,end:i-r}}}),ar=function(e,t){var a=Math.min(e.selectionStart,t);return{from:{start:a,end:e.selectionEnd},to:{start:a,end:t}}};function nr(e,t,a){return Math.min(Math.max(e,t),a)}function Se(e){return Math.max(e.selectionStart,e.selectionEnd)}function ir(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function or(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function sr(e){var t=e.currentValue,a=e.formattedValue,r=e.currentValueIndex,n=e.formattedValueIndex;return t[r]===a[n]}function lr(e,t,a,r,n,i,u){u===void 0&&(u=sr);var b=n.findIndex(function(W){return W}),I=e.slice(0,b);!t&&!a.startsWith(I)&&(t=I,a=I+a,r=r+I.length);for(var N=a.length,w=e.length,h={},V=new Array(N),p=0;p<N;p++){V[p]=-1;for(var v=0,D=w;v<D;v++){var T=u({currentValue:a,lastValue:t,formattedValue:e,currentValueIndex:p,formattedValueIndex:v});if(T&&h[v]!==!0){V[p]=v,h[v]=!0;break}}}for(var m=r;m<N&&(V[m]===-1||!i(a[m]));)m++;var _=m===N||V[m]===-1?w:V[m];for(m=r-1;m>0&&V[m]===-1;)m--;var O=m===-1||V[m]===-1?0:V[m]+1;return O>_?_:r-O<_-r?O:_}function Ie(e,t,a,r){var n=e.length;if(t=nr(t,0,n),r==="left"){for(;t>=0&&!a[t];)t--;t===-1&&(t=a.indexOf(!0))}else{for(;t<=n&&!a[t];)t++;t>n&&(t=a.lastIndexOf(!0))}return t===-1&&(t=n),t}function ur(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),a=0,r=t.length;a<r;a++)t[a]=!!(ue(e[a])||ue(e[a-1]));return t}function Re(e,t,a,r,n,i){i===void 0&&(i=Q);var u=rr(function(v,D){var T,m;return Pe(v)?(m="",T=""):typeof v=="number"||D?(m=typeof v=="number"?Be(v):v,T=r(m)):(m=n(v,void 0),T=r(m)),{formattedValue:T,numAsString:m}}),b=R.useState(function(){return u(ne(e)?t:e,a)}),I=b[0],N=b[1],w=function(v,D){v.formattedValue!==I.formattedValue&&N({formattedValue:v.formattedValue,numAsString:v.value}),i(v,D)},h=e,V=a;ne(e)&&(h=I.numAsString,V=!0);var p=u(h,V);return R.useMemo(function(){N(p)},[p.formattedValue]),[I,w]}function cr(e){return e.replace(/[^0-9]/g,"")}function fr(e){return e}function dr(e){var t=e.type;t===void 0&&(t="text");var a=e.displayType;a===void 0&&(a="input");var r=e.customInput,n=e.renderText,i=e.getInputRef,u=e.format;u===void 0&&(u=fr);var b=e.removeFormatting;b===void 0&&(b=cr);var I=e.defaultValue,N=e.valueIsNumericString,w=e.onValueChange,h=e.isAllowed,V=e.onChange;V===void 0&&(V=Q);var p=e.onKeyDown;p===void 0&&(p=Q);var v=e.onMouseUp;v===void 0&&(v=Q);var D=e.onFocus;D===void 0&&(D=Q);var T=e.onBlur;T===void 0&&(T=Q);var m=e.value,_=e.getCaretBoundary;_===void 0&&(_=ur);var O=e.isValidInputCharacter;O===void 0&&(O=ue);var W=e.isCharacterSame,K=Ee(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=Re(m,I,!!N,u,b,w),q=S[0],C=q.formattedValue,$=q.numAsString,Z=S[1],d=R.useRef(),x=R.useRef({formattedValue:C,numAsString:$}),E=function(s,l){x.current={formattedValue:s.formattedValue,numAsString:s.value},Z(s,l)},y=R.useState(!1),U=y[0],f=y[1],c=R.useRef(null),j=R.useRef({setCaretTimeout:null,focusTimeout:null});R.useEffect(function(){return f(!0),function(){clearTimeout(j.current.setCaretTimeout),clearTimeout(j.current.focusTimeout)}},[]);var F=u,M=function(s,l){var g=parseFloat(l);return{formattedValue:s,value:l,floatValue:isNaN(g)?void 0:g}},k=function(s,l,g){s.selectionStart===0&&s.selectionEnd===s.value.length||(ee(s,l),j.current.setCaretTimeout=setTimeout(function(){s.value===g&&s.selectionStart!==l&&ee(s,l)},0))},L=function(s,l,g){return Ie(s,l,_(s),g)},re=function(s,l,g){var A=_(l),G=lr(l,C,s,g,A,O,W);return G=Ie(l,G,A),G},me=function(s){var l=s.formattedValue;l===void 0&&(l="");var g=s.input,A=s.source,G=s.event,B=s.numAsString,P;if(g){var H=s.inputValue||g.value,X=Se(g);g.value=l,P=re(H,l,X),P!==void 0&&k(g,P,l)}l!==C&&E(M(l,B),{event:G,source:A})};R.useEffect(function(){var s=x.current,l=s.formattedValue,g=s.numAsString;(C!==l||$!==g)&&E(M(C,$),{event:void 0,source:le.props})},[C,$]);var ie=c.current?Se(c.current):void 0,ce=typeof window<"u"?R.useLayoutEffect:R.useEffect;ce(function(){var s=c.current;if(C!==x.current.formattedValue&&s){var l=re(x.current.formattedValue,C,ie);s.value=C,k(s,l,C)}},[C]);var ge=function(s,l,g){var A=l.target,G=d.current?ar(d.current,A.selectionEnd):Fe(C,s),B=Object.assign(Object.assign({},G),{lastValue:C}),P=b(s,B),H=F(P);if(P=b(H,void 0),h&&!h(M(H,P))){var X=l.target,J=Se(X),pe=re(s,C,J);return X.value=C,k(X,pe,C),!1}return me({formattedValue:H,numAsString:P,inputValue:s,event:l,source:g,input:l.target}),!0},he=function(s,l){l===void 0&&(l=0);var g=s.selectionStart,A=s.selectionEnd;d.current={selectionStart:g,selectionEnd:A+l}},ke=function(s){var l=s.target,g=l.value,A=ge(g,s,le.event);A&&V(s),d.current=void 0},Oe=function(s){var l=s.target,g=s.key,A=l.selectionStart,G=l.selectionEnd,B=l.value;B===void 0&&(B="");var P;g==="ArrowLeft"||g==="Backspace"?P=Math.max(A-1,0):g==="ArrowRight"?P=Math.min(A+1,B.length):g==="Delete"&&(P=A);var H=0;g==="Delete"&&A===G&&(H=1);var X=g==="ArrowLeft"||g==="ArrowRight";if(P===void 0||A!==G&&!X){p(s),he(l,H);return}var J=P;if(X){var pe=g==="ArrowLeft"?"left":"right";J=L(B,P,pe),J!==P&&s.preventDefault()}else g==="Delete"&&!O(B[P])?J=L(B,P,"right"):g==="Backspace"&&!O(B[P])&&(J=L(B,P,"left"));J!==P&&k(l,J,B),p(s),he(l,H)},Me=function(s){var l=s.target,g=function(){var A=l.selectionStart,G=l.selectionEnd,B=l.value;if(B===void 0&&(B=""),A===G){var P=L(B,A);P!==A&&k(l,P,B)}};g(),requestAnimationFrame(function(){g()}),v(s),he(l)},_e=function(s){s.persist&&s.persist();var l=s.target,g=s.currentTarget;c.current=l,j.current.focusTimeout=setTimeout(function(){var A=l.selectionStart,G=l.selectionEnd,B=l.value;B===void 0&&(B="");var P=L(B,A);P!==A&&!(A===0&&G===B.length)&&k(l,P,B),D(Object.assign(Object.assign({},s),{currentTarget:g}))},0)},Le=function(s){c.current=null,clearTimeout(j.current.focusTimeout),clearTimeout(j.current.setCaretTimeout),T(s)},Ke=U&&ir()?"numeric":void 0,ye=Object.assign({inputMode:Ke},K,{type:t,value:C,onChange:ke,onKeyDown:Oe,onMouseUp:Me,onFocus:_e,onBlur:Le});if(a==="text")return n?ae.createElement(ae.Fragment,null,n(C,K)||null):ae.createElement("span",Object.assign({},K,{ref:i}),C);if(r){var $e=r;return ae.createElement($e,Object.assign({},ye,{ref:i}))}return ae.createElement("input",Object.assign({},ye,{ref:i}))}function we(e,t){var a=t.decimalScale,r=t.fixedDecimalScale,n=t.prefix;n===void 0&&(n="");var i=t.suffix;i===void 0&&(i="");var u=t.allowNegative,b=t.thousandsGroupStyle;if(b===void 0&&(b="thousand"),e===""||e==="-")return e;var I=ve(t),N=I.thousandSeparator,w=I.decimalSeparator,h=a!==0&&e.indexOf(".")!==-1||a&&r,V=Ne(e,u),p=V.beforeDecimal,v=V.afterDecimal,D=V.addNegation;return a!==void 0&&(v=Ae(v,a,!!r)),N&&(p=er(p,N,b)),n&&(p=n+p),i&&(v=v+i),D&&(p="-"+p),e=p+(h&&w||"")+v,e}function ve(e){var t=e.decimalSeparator;t===void 0&&(t=".");var a=e.thousandSeparator,r=e.allowedDecimalSeparators;return a===!0&&(a=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:a,allowedDecimalSeparators:r}}function vr(e,t){e===void 0&&(e="");var a=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),n=a.test(e),i=r.test(e);return e=e.replace(/-/g,""),n&&!i&&t&&(e="-"+e),e}function mr(e,t){return new RegExp("(^-)|[0-9]|"+Te(e),"g")}function gr(e,t,a){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(a!=null&&a.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function hr(e,t,a){var r;t===void 0&&(t=or(e));var n=a.allowNegative,i=a.prefix;i===void 0&&(i="");var u=a.suffix;u===void 0&&(u="");var b=a.decimalScale,I=t.from,N=t.to,w=N.start,h=N.end,V=ve(a),p=V.allowedDecimalSeparators,v=V.decimalSeparator,D=e[h]===v;if(ue(e)&&(e===i||e===u)&&t.lastValue==="")return e;if(h-w===1&&p.indexOf(e[w])!==-1){var T=b===0?"":v;e=e.substring(0,w)+T+e.substring(w+1,e.length)}var m=function(c,j,F){var M=!1,k=!1;i.startsWith("-")?M=!1:c.startsWith("--")?(M=!1,k=!0):u.startsWith("-")&&c.length===u.length?M=!1:c[0]==="-"&&(M=!0);var L=M?1:0;return k&&(L=2),L&&(c=c.substring(L),j-=L,F-=L),{value:c,start:j,end:F,hasNegation:M}},_=m(e,w,h),O=_.hasNegation;r=_,e=r.value,w=r.start,h=r.end;var W=m(t.lastValue,I.start,I.end),K=W.start,S=W.end,q=W.value,C=e.substring(w,h);e.length&&q.length&&(K>q.length-u.length||S<i.length)&&!(C&&u.startsWith(C))&&(e=q);var $=0;e.startsWith(i)?$+=i.length:w<i.length&&($=w),e=e.substring($),h-=$;var Z=e.length,d=e.length-u.length;e.endsWith(u)?Z=d:(h>d||h>e.length-u.length)&&(Z=h),e=e.substring(0,Z),e=vr(O?"-"+e:e,n),e=(e.match(mr(v))||[]).join("");var x=e.indexOf(v);e=e.replace(new RegExp(Te(v),"g"),function(c,j){return j===x?".":""});var E=Ne(e,n),y=E.beforeDecimal,U=E.afterDecimal,f=E.addNegation;return N.end-N.start<I.end-I.start&&y===""&&D&&!parseFloat(U)&&(e=f?"-":""),e}function pr(e,t){var a=t.prefix;a===void 0&&(a="");var r=t.suffix;r===void 0&&(r="");var n=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";n.fill(!1,0,a.length+(i?1:0));var u=e.length;return n.fill(!1,u-r.length+1,u+1),n}function xr(e){var t=ve(e),a=t.thousandSeparator,r=t.decimalSeparator,n=e.prefix;n===void 0&&(n="");var i=e.allowNegative;if(i===void 0&&(i=!0),a===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+a+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return n.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+n+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function br(e){e=xr(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,a=e.allowNegative,r=e.allowLeadingZeros,n=e.onKeyDown;n===void 0&&(n=Q);var i=e.onBlur;i===void 0&&(i=Q);var u=e.thousandSeparator,b=e.decimalScale,I=e.fixedDecimalScale,N=e.prefix;N===void 0&&(N="");var w=e.defaultValue,h=e.value,V=e.valueIsNumericString,p=e.onValueChange,v=Ee(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),D=ve(e),T=D.decimalSeparator,m=D.allowedDecimalSeparators,_=function(f){return we(f,e)},O=function(f,c){return hr(f,c,e)},W=ne(h)?w:h,K=V??gr(W,N,t);ne(h)?ne(w)||(K=K||typeof w=="number"):K=K||typeof h=="number";var S=function(f){return Pe(f)?f:(typeof f=="number"&&(f=Be(f)),K&&typeof b=="number"?je(f,b,!!I):f)},q=Re(S(h),S(w),!!K,_,O,p),C=q[0],$=C.numAsString,Z=C.formattedValue,d=q[1],x=function(f){var c=f.target,j=f.key,F=c.selectionStart,M=c.selectionEnd,k=c.value;if(k===void 0&&(k=""),(j==="Backspace"||j==="Delete")&&M<N.length){f.preventDefault();return}if(F!==M){n(f);return}j==="Backspace"&&k[0]==="-"&&F===N.length+1&&a&&ee(c,1),b&&I&&(j==="Backspace"&&k[F-1]===T?(ee(c,F-1),f.preventDefault()):j==="Delete"&&k[F]===T&&f.preventDefault()),m!=null&&m.includes(j)&&k[F]===T&&ee(c,F+1);var L=u===!0?",":u;j==="Backspace"&&k[F-1]===L&&ee(c,F-1),j==="Delete"&&k[F]===L&&ee(c,F+1),n(f)},E=function(f){var c=$;if(c.match(/\d/g)||(c=""),r||(c=tr(c)),I&&b&&(c=je(c,b,I)),c!==$){var j=we(c,e);d({formattedValue:j,value:c,floatValue:parseFloat(c)},{event:f,source:le.event})}i(f)},y=function(f){return f===T?!0:ue(f)},U=function(f){var c=f.currentValue,j=f.lastValue,F=f.formattedValue,M=f.currentValueIndex,k=f.formattedValueIndex,L=c[M],re=F[k],me=Fe(j,c),ie=me.to,ce=function(ge){return O(ge).indexOf(".")+N.length};return h===0&&I&&b&&c[ie.start]===T&&ce(c)<M&&ce(F)>k?!1:M>=ie.start&&M<ie.end&&m&&m.includes(L)&&re===T?!0:L===re};return Object.assign(Object.assign({},v),{value:Z,valueIsNumericString:!1,isValidInputCharacter:y,isCharacterSame:U,onValueChange:d,format:_,removeFormatting:O,getCaretBoundary:function(f){return pr(f,e)},onKeyDown:x,onBlur:E})}function De(e){var t=br(e);return ae.createElement(dr,Object.assign({},t))}const it=({show:e,onHide:t,productId:a})=>{const{t:r}=Xe(),[n,i]=R.useState(null),[u,b]=R.useState(null),I=Ue().props.errors,[N,w]=R.useState(1),[h,V]=R.useState(10),[p,v]=R.useState(!1),[D,T]=R.useState(null),m=(d,x)=>{a&&setTimeout(()=>{_(d,x),fe.reload({only:["subProduct"],data:{product_id:a,subProductPage:d,subProductPerPage:x},onSuccess:E=>{var U,f,c,j,F;const y=(U=E==null?void 0:E.props)==null?void 0:U.subProduct;y&&i(y),(c=(f=y==null?void 0:y.data)==null?void 0:f[0])!=null&&c.product&&b((F=(j=y==null?void 0:y.data)==null?void 0:j[0])==null?void 0:F.product)}})},500)},_=(d,x)=>{w(d||1),V(x||10)};R.useEffect(()=>{a&&e&&m()},[a,e]);const O=50,W=999999999,K=[{value:"ACTIVE",label:r("Active")},{value:"INACTIVE",label:r("Inactive")}],S=Ge({initialValues:{subProductName:"",price:"",status:"ACTIVE"},validationSchema:We({subProductName:Ve().max(O,`Must be ${O} characters or less`).required(r("Please enter item name")),price:qe().positive(r("Price must be positive")).max(W,`Price must be less than ${W}`).required(r("Please enter price")),status:Ve().required(r("Please select status"))}),onSubmit:d=>{if(!a){te(r("Product ID is required"),"error");return}const x=p&&D?route("seller.sub-product.update",{id:D==null?void 0:D.id}):route("seller.sub-product.store");fe[p&&D?"put":"post"](x,{...d,productId:a},{replace:!0,onSuccess:y=>{var U,f,c,j;if((f=(U=y==null?void 0:y.props)==null?void 0:U.message)!=null&&f.error){te(r(y.props.message.error),"error"),m(N,h);return}(j=(c=y.props)==null?void 0:c.message)!=null&&j.success&&(te(r(y.props.message.success),"success"),p&&D?C():S.resetForm(),m(N,h))}})}});R.useEffect(()=>{S.setErrors(I||{})},[I]);const q=d=>{v(!0),T(d),S.setValues({subProductName:d.name||"",price:d.price||"",status:d.status||"ACTIVE"})},C=()=>{v(!1),T(null),S.resetForm()},$=async d=>{await He({title:r("Delete this sub-product?"),text:r("Once deleted, you will not be able to recover it."),confirmButtonText:r("Delete now"),cancelButtonText:r("Cancel")})&&fe.delete(route("seller.sub-product.destroy",{id:d}),{onSuccess:E=>{var y,U,f,c;if((U=(y=E==null?void 0:E.props)==null?void 0:y.message)!=null&&U.error){te(r(E.props.message.error),"error"),m(N,h);return}(c=(f=E.props)==null?void 0:f.message)!=null&&c.success&&(te(r(E.props.message.success),"success"),m(N,h))},onError:E=>{Object.keys(E).forEach(y=>{te(r(E[y]),"error")})}})},Z=R.useMemo(()=>[{header:r("Item name"),cell:d=>o.jsx("span",{className:"fw-semibold",children:d.getValue()}),accessorKey:"name",enableColumnFilter:!1,enableSorting:!0},{header:r("Price"),accessorKey:"price",enableColumnFilter:!1,enableSorting:!0,cell:d=>o.jsx(De,{value:d.getValue()||0,displayType:"text",thousandSeparator:".",decimalSeparator:","})},{header:r("Status"),accessorKey:"status",enableColumnFilter:!1,enableSorting:!0,cell:d=>{const x=d.getValue(),E={ACTIVE:"bg-success",INACTIVE:"bg-danger"},y={ACTIVE:"Active",INACTIVE:"Inactive"};return o.jsx("span",{className:`badge ${(E==null?void 0:E[x])||"bg-dark"} fs-6 fw-medium`,children:r((y==null?void 0:y[x])||"Unknown")})}},{header:r("Stock"),accessorKey:"quantity",enableColumnFilter:!1,enableSorting:!0,cell:d=>o.jsx("span",{children:d.getValue()??0})},{header:r("Actions"),cell:d=>{const x=d.row.original;return o.jsxs("div",{className:"d-flex gap-2",children:[o.jsx(xe,{placement:"top",overlay:o.jsx(be,{children:r("Add account")}),children:o.jsx(Y,{size:"sm",variant:"outline-success",onClick:()=>{x!=null&&x.id&&fe.get(route("seller.account.edit",{id:x==null?void 0:x.id}))},children:o.jsx("i",{className:"ri-add-line"})})}),o.jsx(xe,{placement:"top",overlay:o.jsx(be,{children:r("Edit")}),children:o.jsx(Y,{size:"sm",variant:"outline-info",onClick:()=>q(x),children:o.jsx("i",{className:"ri-pencil-line"})})}),o.jsx(xe,{placement:"top",overlay:o.jsx(be,{children:r("Delete")}),children:o.jsx(Y,{variant:"outline-danger",size:"sm",onClick:()=>$(x==null?void 0:x.id),children:o.jsx("i",{className:"ri-delete-bin-fill"})})})]})},id:"actions",enableSorting:!1}],[r,n]);return o.jsxs(oe,{show:e,onHide:()=>{C(),i(null),b(null),t()},centered:!0,size:"xl",backdrop:"static",children:[o.jsx(oe.Header,{closeButton:!0,children:o.jsx(oe.Title,{children:r("Stock Management")})}),o.jsxs(oe.Body,{children:[o.jsx("div",{className:"mb-4",children:o.jsx(de,{children:o.jsx(se,{children:o.jsxs("div",{className:"d-flex items-center gap-2",children:[o.jsxs("span",{className:"fw-bold",children:[r("Product name"),":"]}),o.jsx("span",{children:(u==null?void 0:u.name)??""})]})})})}),o.jsx("div",{className:"mb-5",children:o.jsxs(z,{onSubmit:S.handleSubmit,noValidate:!0,children:[o.jsxs(de,{children:[o.jsx(se,{md:6,children:o.jsxs(z.Group,{className:"mb-3",controlId:"subProductName",children:[o.jsxs(z.Label,{children:[r("Item name")," ",o.jsx("span",{className:"text-danger",children:"*"})]}),o.jsx(z.Control,{type:"text",placeholder:r("Enter item name"),maxLength:O,onChange:S.handleChange,onBlur:S.handleBlur,value:S.values.subProductName,isInvalid:!!(S.touched.subProductName&&S.errors.subProductName)}),o.jsx(z.Control.Feedback,{type:"invalid",children:S.errors.subProductName})]})}),o.jsx(se,{md:6,children:o.jsxs(z.Group,{className:"mb-3",controlId:"price",children:[o.jsxs(z.Label,{children:[r("Price")," ",o.jsx("span",{className:"text-danger",children:"*"})]}),o.jsx(De,{customInput:z.Control,decimalSeparator:",",placeholder:r("Enter price"),decimalScale:2,fixedDecimalScale:!1,allowNegative:!1,isAllowed:d=>{const{floatValue:x}=d;return x===void 0||x<=W},onValueChange:d=>{S.setFieldValue("price",d.floatValue||"")},onBlur:S.handleBlur,value:S.values.price,isInvalid:!!(S.touched.price&&S.errors.price)}),o.jsx(z.Control.Feedback,{type:"invalid",children:S.errors.price})]})})]}),p&&o.jsx(de,{children:o.jsx(se,{md:6,children:o.jsxs(z.Group,{className:"mb-3",controlId:"status",children:[o.jsxs(z.Label,{children:[r("Status")," ",o.jsx("span",{className:"text-danger",children:"*"})]}),o.jsx(ze,{options:K,value:K.find(d=>d.value===S.values.status),onChange:d=>{S.setFieldValue("status",(d==null?void 0:d.value)||"ACTIVE")},placeholder:r("Select status"),isClearable:!1,isSearchable:!1,className:S.touched.status&&S.errors.status?"is-invalid":""}),S.touched.status&&S.errors.status&&o.jsx("div",{className:"invalid-feedback d-block",children:S.errors.status})]})})}),o.jsx(de,{children:o.jsx(se,{md:6,className:"d-flex align-items-center gap-2",children:p?o.jsxs(o.Fragment,{children:[o.jsxs(Y,{variant:"primary",type:"submit",children:[o.jsx("i",{className:"ri-save-line align-bottom me-1"}),r("Update")]}),o.jsxs(Y,{variant:"secondary",onClick:C,children:[o.jsx("i",{className:"ri-close-line align-bottom me-1"}),r("Cancel")]})]}):o.jsxs(Y,{variant:"primary",type:"submit",children:[o.jsx("i",{className:"ri-add-line align-bottom me-1"}),r("Add")]})})})]})}),!p&&o.jsx("div",{className:"mb-4 px-3",children:o.jsx(Ze,{columns:Z,data:n,divClass:"table-responsive table-card mb-3",tableClass:"table align-middle table-nowrap mb-0",theadClass:"table-light",enableContextMenu:!1,isPaginateTable:!0,onReloadTable:m,keyPageParam:"subProductPage",keyPerPageParam:"subProductPerPage"})})]}),o.jsx(oe.Footer,{children:o.jsx(Y,{variant:"light",onClick:()=>{C(),i(null),b(null),t()},children:r("Close")})})]})};export{it as ModalStockManagement};
