import{X as C,d as P,A as D,j as t,R,S as O}from"./ContextMenuProvider-BhVN3MI2.js";import{L as Z}from"./index-H4T1inf0.js";import{Q as k}from"./react-toastify.esm-Bzp-JuTX.js";import{B as $}from"./BreadCrumb-Cm564y_Y.js";import{u as X,c as Y,g as B,a as b}from"./index.esm-C_ZlIYoE.js";import{S as M}from"./react-select.esm-kG1LW6sX.js";import{s as y}from"./showToast-BKDwzp8a.js";import{C as U}from"./CustomCKEditor-CsdO-mld.js";import{F as W,r as H,p as J,a as K}from"./filepond-plugin-image-preview.esm-z-TgdsDQ.js";import{u as Q}from"./useTranslation-ZbZFIHja.js";import{C as q}from"./Container-DaelVuOS.js";import{R as f}from"./Row-DTCryV-T.js";import{C as _}from"./Col-CDTbDU3W.js";import{C as G}from"./Card-CRQW63gX.js";import{F as n}from"./Form-B_1_SP-R.js";import{B as z}from"./Button-CT1W-dlW.js";import"./index-CMi1q9xw.js";import"./moment-C5S46NFB.js";import"./RightSidebar-DjJvT3Hw.js";import"./thunk-CNTob9NR.js";/* empty css                      */import"./LightDark-DREMPlwr.js";import"./Dropdown-DAdvUZKT.js";import"./ThemeProvider-CUiVOj3n.js";import"./querySelectorAll-BZjzdW4C.js";import"./useMergedRefs-BdX62CzH.js";import"./SSRProvider-CdYR2PPq.js";import"./useEventCallback-kYw4fXYA.js";import"./useIsomorphicEffect-0xLopGc7.js";import"./useWindow-D06ww4p5.js";import"./SelectableContext-C5rX9-0C.js";import"./NavbarContext-DFScsAQa.js";import"./Button-ItoOpMhW.js";import"./DataKey-DjdvojM5.js";import"./hook-Dwnxsckw.js";import"./extends-CF3RwP-h.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./useEventCallback-DN7Xb1FR.js";import"./Anchor-Dcci9ZUU.js";import"./InputGroupContext-BOLuIn5_.js";import"./isSymbol-CYvIzdD2.js";import"./reselect-CiXCCDx7.js";import"./AbstractModalHeader-ONgXPvo5.js";import"./hasClass-Du0ceSUq.js";import"./NoopTransition-Ba3l4ZU6.js";import"./TransitionWrapper-CHWC6Aev.js";import"./setPrototypeOf-DgZC2w_0.js";import"./CloseButton-D0xq5bFg.js";import"./Fade-DZUndS-E.js";import"./divWithClassName-DOGM4Upq.js";import"./Collapse-jWBU_wvy.js";import"./logo-dark-CCAAFdaA.js";import"./logo-light-D3OEWz0M.js";import"./user-dummy-img-BMkyJzBF.js";import"./avatar-1-PHP4S1R6.js";import"./hoist-non-react-statics.cjs-3lIPCjJv.js";import"./inherits-B2gPeQio.js";/*!
 * FilePondPluginFileValidateType 1.2.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const w=({addFilter:a,utils:l})=>{const{Type:d,isString:F,replaceInString:p,guesstimateMimeType:i,getExtensionFromFilename:o,getFilenameFromURL:u}=l,T=(r,e)=>{const c=(/^[^/]+/.exec(r)||[]).pop(),s=e.slice(0,-2);return c===s},j=(r,e)=>r.some(c=>/\*$/.test(c)?T(e,c):c===e),x=r=>{let e="";if(F(r)){const c=u(r),s=o(c);s&&(e=i(s))}else e=r.type;return e},E=(r,e,c)=>{if(e.length===0)return!0;const s=x(r);return c?new Promise((h,g)=>{c(r,s).then(m=>{j(e,m)?h():g()}).catch(g)}):j(e,s)},L=r=>e=>r[e]===null?!1:r[e]||e;return a("SET_ATTRIBUTE_TO_OPTION_MAP",r=>Object.assign(r,{accept:"acceptedFileTypes"})),a("ALLOW_HOPPER_ITEM",(r,{query:e})=>e("GET_ALLOW_FILE_TYPE_VALIDATION")?E(r,e("GET_ACCEPTED_FILE_TYPES")):!0),a("LOAD_FILE",(r,{query:e})=>new Promise((c,s)=>{if(!e("GET_ALLOW_FILE_TYPE_VALIDATION")){c(r);return}const h=e("GET_ACCEPTED_FILE_TYPES"),g=e("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),m=E(r,h,g),I=()=>{const S=h.map(L(e("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(N=>N!==!1),A=S.filter((N,v)=>S.indexOf(N)===v);s({status:{main:e("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:p(e("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:A.join(", "),allButLastType:A.slice(0,-1).join(", "),lastType:A[A.length-1]})}})};if(typeof m=="boolean")return m?c(r):I();m.then(()=>{c(r)}).catch(I)})),{options:{allowFileTypeValidation:[!0,d.BOOLEAN],acceptedFileTypes:[[],d.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",d.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",d.STRING],fileValidateTypeLabelExpectedTypesMap:[{},d.OBJECT],fileValidateTypeDetectType:[null,d.FUNCTION]}}},ee=typeof window<"u"&&typeof window.document<"u";ee&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:w}));/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const V=({addFilter:a,utils:l})=>{const{Type:d,replaceInString:F,toNaturalFileSize:p}=l;return a("ALLOW_HOPPER_ITEM",(i,{query:o})=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const u=o("GET_MAX_FILE_SIZE");if(u!==null&&i.size>u)return!1;const T=o("GET_MIN_FILE_SIZE");return!(T!==null&&i.size<T)}),a("LOAD_FILE",(i,{query:o})=>new Promise((u,T)=>{if(!o("GET_ALLOW_FILE_SIZE_VALIDATION"))return u(i);const j=o("GET_FILE_VALIDATE_SIZE_FILTER");if(j&&!j(i))return u(i);const x=o("GET_MAX_FILE_SIZE");if(x!==null&&i.size>x){T({status:{main:o("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:F(o("GET_LABEL_MAX_FILE_SIZE"),{filesize:p(x,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const E=o("GET_MIN_FILE_SIZE");if(E!==null&&i.size<E){T({status:{main:o("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:F(o("GET_LABEL_MIN_FILE_SIZE"),{filesize:p(E,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}const L=o("GET_MAX_TOTAL_FILE_SIZE");if(L!==null&&o("GET_ACTIVE_ITEMS").reduce((e,c)=>e+c.fileSize,0)>L){T({status:{main:o("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:F(o("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:p(L,".",o("GET_FILE_SIZE_BASE"),o("GET_FILE_SIZE_LABELS",o))})}});return}u(i)})),{options:{allowFileSizeValidation:[!0,d.BOOLEAN],maxFileSize:[null,d.INT],minFileSize:[null,d.INT],maxTotalFileSize:[null,d.INT],fileValidateSizeFilter:[null,d.FUNCTION],labelMinFileSizeExceeded:["File is too small",d.STRING],labelMinFileSize:["Minimum file size is {filesize}",d.STRING],labelMaxFileSizeExceeded:["File is too large",d.STRING],labelMaxFileSize:["Maximum file size is {filesize}",d.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",d.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",d.STRING]}}},te=typeof window<"u"&&typeof window.document<"u";te&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:V}));H(J,K,w,V);function ie(){const{t:a}=Q(),{product:l,categories:d,productTypes:F}=C().props,p=!!l,i=C().props.errors,o=C().props.storageUrl,[u,T]=P.useState(d||[]),[j,x]=P.useState([]),E=u==null?void 0:u.map(s=>({value:s.id,label:s.name})),L=[{value:"ACTIVE",label:a("Active")},{value:"INACTIVE",label:a("Inactive")}],r=F.map(s=>({value:(s==null?void 0:s.id)??"",label:a((s==null?void 0:s.name)??"")})),e=X({initialValues:{productName:(l==null?void 0:l.name)||"",categoryId:(l==null?void 0:l.category_id)||"",status:(l==null?void 0:l.status)||"ACTIVE",productTypeId:(l==null?void 0:l.product_type_id)||"",shortDescription:(l==null?void 0:l.short_description)||"",detailDescription:(l==null?void 0:l.detail_description)||"",image:null},validationSchema:Y({productName:b().max(255,a("Must be 255 characters or less")).required(a("Please enter product name")),categoryId:b().required(a("Please select a category")),status:b().required(a("Please select status")),productTypeId:b().required(a("Please select product type")),shortDescription:b().max(150,a("Must be 150 characters or less")).required(a("Please enter short description")),detailDescription:b().required(a("Please enter detailed description")),image:p?B().nullable():B().required(a("Please select a product image"))}),onSubmit:s=>{const h=p?route("seller.product.update",{id:l.id}):route("seller.product.store"),g=p?"put":"post",m=new FormData;m.append("productName",s.productName),m.append("categoryId",s.categoryId),m.append("status",s.status),m.append("productTypeId",s.productTypeId),m.append("shortDescription",s.shortDescription),m.append("detailDescription",s.detailDescription),s.image&&m.append("image",s.image),g==="put"&&m.append("_method","PUT"),D.post(h,m,{preserveScroll:!0,onSuccess:I=>{var S,A,N,v;if((A=(S=I.props)==null?void 0:S.message)!=null&&A.error){y(a(I.props.message.error),"error");return}(v=(N=I.props)==null?void 0:N.message)!=null&&v.success&&y(a(I.props.message.success),"success"),p?x([]):setTimeout(()=>{D.get(route("seller.product.index"))},1500)},onError:I=>{Object.keys(I).forEach(S=>{y(a(I[S]),"error")})}})}}),c=(E==null?void 0:E.find(s=>(s==null?void 0:s.value)===e.values.categoryId))||null;return t.jsxs(R.Fragment,{children:[t.jsx(O,{title:a(p?"Edit product":"Add product")}),t.jsxs("div",{className:"page-content",children:[t.jsx(k,{}),t.jsxs(q,{fluid:!0,children:[t.jsx($,{title:a(p?"Edit product":"Add product"),pageTitle:a("Product Management")}),t.jsx(f,{className:"px-3",children:t.jsx(_,{xs:12,children:t.jsxs(G,{children:[t.jsx(G.Header,{children:t.jsx("h5",{className:"card-title mb-0",children:a(p?"Edit product":"Add product")})}),t.jsx(G.Body,{children:t.jsxs(n,{onSubmit:e.handleSubmit,noValidate:!0,className:"p-2",children:[t.jsxs(f,{className:"mb-4",children:[t.jsx(_,{md:6,children:t.jsxs(n.Group,{controlId:"productName",children:[t.jsxs(n.Label,{children:[a("Product name")," ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx(n.Control,{type:"text",placeholder:a("Enter product name"),name:"productName",maxLength:255,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.productName,isInvalid:!!(e.touched.productName&&e.errors.productName||i!=null&&i.productName)}),t.jsx(n.Control.Feedback,{type:"invalid",children:a(e.errors.productName||(i==null?void 0:i.name))})]})}),t.jsx(_,{md:6,children:t.jsxs(n.Group,{controlId:"categoryId",children:[t.jsxs(n.Label,{children:[a("Category")," ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx(M,{options:E,placeholder:a("Select category"),value:c,onChange:s=>{e.setFieldValue("categoryId",(s==null?void 0:s.value)||"")},onBlur:()=>e.setFieldTouched("categoryId",!0),onMenuOpen:()=>{D.reload({only:["categories"],onSuccess:s=>{var g;const h=((g=s==null?void 0:s.props)==null?void 0:g.categories)||[];T(h)}})},className:e.touched.categoryId&&e.errors.categoryId||i!=null&&i.categoryId?"is-invalid":""}),(e.touched.categoryId&&e.errors.categoryId||(i==null?void 0:i.categoryId))&&t.jsx("div",{className:"invalid-feedback d-block",children:a(e.errors.categoryId||(i==null?void 0:i.categoryId))})]})})]}),t.jsxs(f,{className:"mb-4",children:[t.jsx(_,{md:6,children:t.jsxs(n.Group,{controlId:"productType",children:[t.jsxs(n.Label,{children:[a("Product type")," ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx(M,{options:r,placeholder:a("Select product type"),onMenuOpen:()=>{D.reload({only:["productTypes"],replace:!0})},value:r.find(s=>s.value==e.values.productTypeId),onChange:s=>{e.setFieldValue("productTypeId",(s==null?void 0:s.value)||"")},onBlur:()=>e.setFieldTouched("productTypeId",!0),className:e.touched.productTypeId&&e.errors.productTypeId||i!=null&&i.productTypeId?"is-invalid":""}),(e.touched.productTypeId&&e.errors.productTypeId||(i==null?void 0:i.productTypeId))&&t.jsx("div",{className:"invalid-feedback d-block",children:a(e.errors.productTypeId||(i==null?void 0:i.productTypeId))})]})}),t.jsx(_,{md:6,children:t.jsxs(n.Group,{controlId:"status",children:[t.jsxs(n.Label,{children:[a("Status")," ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx(M,{options:L,placeholder:a("Select status"),value:L.find(s=>s.value===e.values.status),onChange:s=>{e.setFieldValue("status",(s==null?void 0:s.value)||"")},onBlur:()=>e.setFieldTouched("status",!0),className:e.touched.status&&e.errors.status||i!=null&&i.status?"is-invalid":""}),(e.touched.status&&e.errors.status||(i==null?void 0:i.status))&&t.jsx("div",{className:"invalid-feedback d-block",children:a(e.errors.status||(i==null?void 0:i.status))})]})})]}),t.jsx(f,{className:"mb-4",children:t.jsx(_,{md:12,children:t.jsxs(n.Group,{controlId:"shortDescription",children:[t.jsxs(n.Label,{children:[a("Short description")," ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx(n.Control,{as:"textarea",rows:3,placeholder:a("Enter short description"),name:"shortDescription",maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.shortDescription,isInvalid:!!(e.touched.shortDescription&&e.errors.shortDescription||i!=null&&i.shortDescription)}),t.jsx(n.Control.Feedback,{type:"invalid",children:a(e.errors.shortDescription||(i==null?void 0:i.shortDescription))})]})})}),t.jsx(f,{className:"mb-4",children:t.jsx(_,{md:12,children:t.jsxs(n.Group,{controlId:"detailDescription",children:[t.jsxs(n.Label,{children:[a("Detail description")," ",t.jsx("span",{className:"text-danger",children:"*"})]}),t.jsx(U,{data:e.values.detailDescription,onChange:s=>{e.setFieldValue("detailDescription",s)},onBlur:()=>e.setFieldTouched("detailDescription",!0),placeholder:a("Enter detailed description")}),(e.touched.detailDescription&&e.errors.detailDescription||(i==null?void 0:i.detailDescription))&&t.jsx("div",{className:"invalid-feedback d-block",children:a(e.errors.detailDescription||(i==null?void 0:i.detailDescription))})]})})}),p&&(l==null?void 0:l.image)&&t.jsx(f,{className:"mb-4",children:t.jsx(_,{md:12,children:t.jsxs(n.Group,{children:[t.jsx(n.Label,{children:a("Current product image")}),t.jsx("div",{children:t.jsx("a",{target:"_blank",href:`${o}/${l.image}`,children:t.jsx("img",{src:`${o}/${l.image}`,alt:l.name||a("Product image"),style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain",border:"1px solid #dee2e6",borderRadius:"4px"}})})})]})})}),t.jsx(f,{className:"mb-3",children:t.jsx(_,{md:12,children:t.jsxs(n.Group,{controlId:"image",children:[t.jsxs(n.Label,{children:[a(p?"New product image":"Product image"),!p&&t.jsx("span",{className:"text-danger",children:" *"})]}),t.jsx(W,{files:j,onupdatefiles:s=>{if(x(s),s.length>0&&s[0].file){const h=s[0].file;e.setFieldValue("image",h),e.setFieldTouched("image",!0)}else e.setFieldValue("image",null),e.setFieldTouched("image",!0)},allowMultiple:!1,maxFiles:1,acceptedFileTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],labelIdle:a(`ðŸ“· ${a("Drag & Drop your image or")} <span class="filepond--label-action">${a("Choose file")}</span>`),maxFileSize:"2MB",allowRevert:!0,allowRemove:!0,instantUpload:!1,credits:!1,className:e.touched.image&&e.errors.image||i!=null&&i.image?"is-invalid":""}),(e.touched.image&&e.errors.image||(i==null?void 0:i.image))&&t.jsx("div",{className:"invalid-feedback d-block",children:a(e.errors.image||(i==null?void 0:i.image))})]})})}),t.jsx(f,{children:t.jsx(_,{md:12,children:t.jsxs("div",{className:"d-flex gap-3",children:[t.jsx(z,{variant:"light",onClick:()=>{e.resetForm(),x([]),D.visit(route("seller.product.index"))},children:a("Back")}),t.jsx(z,{variant:"success",type:"submit",children:a(p?"Update":"Save")})]})})})]})})]})})})]})]})]})}ie.layout=a=>t.jsx(Z,{children:a});export{ie as default};
