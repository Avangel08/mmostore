import{d as o,j as a}from"./ContextMenuProvider-DCdb8j9t.js";import{F as _,_ as $,v as H}from"./default-BvN15SVT.js";import{S as k}from"./react-select.esm-Bx-RY50u.js";import{h as w}from"./moment-C5S46NFB.js";import{u as Q}from"./useQueryParam-cDD8Df1K.js";import{u as q}from"./useTranslation-BeBCG-tb.js";import{B as D}from"./Button-DkR4lkD4.js";import{R as P}from"./Row-DcrQzJSf.js";import{C as m}from"./Col-BKpEL2i4.js";import{F as u}from"./Form-BwWb-AQG.js";import"./index-BSRKPwsw.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-Cl0fTsAK.js";import"./ThemeProvider-B2_W_dCu.js";import"./Button-DW89RreQ.js";const me=({onFilter:b,status:y,type:h})=>{const{t:n,i18n:T}=q(),f=o.useRef(null),[g,Y]=o.useState(!1),e=Q(),v=(e==null?void 0:e.perPage)??"10",R=()=>({name:(e==null?void 0:e.name)??"",email:(e==null?void 0:e.email)??"",type:(e==null?void 0:e.type)??"",createdDateStart:(e==null?void 0:e.createdDateStart)??"",createdDateEnd:(e==null?void 0:e.createdDateEnd)??"",status:(e==null?void 0:e.status)??""}),[i,j]=o.useState(R()),c=o.useMemo(()=>[{value:"",label:n("All")},...Object.keys(h||{}).map(t=>({value:h[t],label:n(h[t])}))],[h,n]),d=o.useMemo(()=>[{value:"",label:n("All")},...Object.entries(y||{}).map(([t,s])=>({value:t,label:n(t)}))],[y,n]),[M,x]=o.useState({value:"",label:n("All")}),[L,S]=o.useState({value:"",label:n("All")});o.useEffect(()=>{c.length>0&&x(c[0]),d.length>0&&S(d[0])},[c,d]),o.useEffect(()=>{const t=e==null?void 0:e.type;if(t!==null){const l=c.find(r=>r.value.toString()===t);l&&x(l)}const s=e==null?void 0:e.status;if(s!==null){const l=d.find(r=>r.value.toString()===s);l&&S(l)}},[e==null?void 0:e.type,e==null?void 0:e.status,c,d]);const A=()=>{switch(T.language){case"vi":return H.Vietnamese;default:return $.english}},p=(t,s)=>{j(l=>({...l,[t]:s}))},I=t=>{const[s,l]=t;j(r=>({...r,createdDateStart:s?w(s).format("YYYY-MM-DD"):"",createdDateEnd:l?w(l).format("YYYY-MM-DD"):""}))},O=t=>{x(t),p("type",t.value)},V=t=>{S(t),p("status",t.value)},F=()=>{b(1,Number(v),i)},E=t=>{t.key==="Enter"&&F()},B=()=>{const t=(e==null?void 0:e.name)||"",s=(e==null?void 0:e.email)||"",l=(e==null?void 0:e.type)||"",r=(e==null?void 0:e.createdDateStart)||"",C=(e==null?void 0:e.createdDateEnd)||"",N=(e==null?void 0:e.status)||"";return t!==null&&t!==""||s!==null&&s!==""||l!==null&&l!==""||r!==null&&r!==""||C!==null&&C!==""||N!==null&&N!==""},K=()=>{const t={name:"",email:"",type:"",createdDateStart:"",createdDateEnd:"",status:""};j(t),x(c[0]),S(d[0]),f.current&&f.current.flatpickr&&f.current.flatpickr.clear(),b(1,Number(v),t)},z=()=>{Y(!g)};return a.jsxs("div",{className:"filter-container mb-3",children:[a.jsxs("div",{className:"mb-3 d-flex align-items-center gap-2",children:[a.jsxs(D,{variant:"outline-primary",onClick:z,className:"d-flex align-items-center",children:[a.jsx("i",{className:`ri-filter-${g?"off":"2"}-line align-bottom me-2`}),n(g?"Hide Filters":"Show Filters")]}),B()&&a.jsxs(D,{variant:"outline-danger",onClick:K,className:"d-flex align-items-center",children:[a.jsx("i",{className:"ri-refresh-line align-bottom me-1"}),n("Reset")]})]}),g&&a.jsxs("div",{className:"p-3 border rounded bg-light",children:[a.jsxs(P,{className:"g-3",style:{marginBottom:"20px"},children:[a.jsxs(m,{md:3,children:[a.jsx(u.Label,{htmlFor:"filter-name",children:n("Name")}),a.jsx(u.Control,{type:"text",id:"filter-name",placeholder:n("Enter name"),value:i.name,onChange:t=>p("name",t.target.value),onKeyDown:E})]}),a.jsxs(m,{md:3,children:[a.jsx(u.Label,{htmlFor:"filter-email",children:n("Email")}),a.jsx(u.Control,{type:"text",id:"filter-email",placeholder:n("Enter email"),value:i.email,onChange:t=>p("email",t.target.value),onKeyDown:E})]}),a.jsxs(m,{md:3,children:[a.jsx(u.Label,{htmlFor:"filter-date",children:n("Created Date Range")}),a.jsx(_,{ref:f,className:"form-control",id:"filter-date",placeholder:n("Select date range"),options:{mode:"range",dateFormat:"d/m/Y",locale:A()},value:i.createdDateStart&&i.createdDateEnd?[new Date(i.createdDateStart),new Date(i.createdDateEnd)]:i.createdDateStart?[new Date(i.createdDateStart)]:[],onChange:I})]})]}),a.jsxs(P,{className:"g-3",children:[a.jsxs(m,{md:3,children:[a.jsx(u.Label,{htmlFor:"filter-type",children:n("Type")}),a.jsx(k,{id:"filter-type",value:M,onChange:O,options:c,classNamePrefix:"select",isSearchable:!0,placeholder:n("Select type"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(m,{md:3,children:[a.jsx(u.Label,{htmlFor:"filter-status",children:n("Status")}),a.jsx(k,{id:"filter-status",value:L,onChange:V,options:d,classNamePrefix:"select",isSearchable:!0,placeholder:n("Select status"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsx(m,{md:12,children:a.jsxs(D,{variant:"primary",onClick:F,children:[a.jsx("i",{className:"ri-search-line align-bottom me-1"}),n("Filter")]})})]})]})]})};export{me as default};
