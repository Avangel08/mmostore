import{X as g,A as v,j as e,R as N}from"./ContextMenuProvider-DK3oxQYr.js";import{u as y,c as C,d as F,a as S,F as k,h as w}from"./index.esm-BSLmOO6X.js";import{s as d}from"./showToast-CF18EvDS.js";import{u as D}from"./useTranslation-DPKXtvuf.js";import{F as c}from"./Form-BL_QAQYe.js";import{R as b}from"./Row-yXb5PzTN.js";import{C as u}from"./Col-CTtgbep0.js";import{B as p}from"./Button-CFXbok-i.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-CLORWFEJ.js";import"./react-toastify.esm-9xgEgjS9.js";import"./ThemeProvider-Ct_rgNLL.js";import"./index-DBORkYtJ.js";import"./Button-V6sZ7J-q.js";const R=/^(?!-)[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)+$/,U=()=>{const{t:a}=D(),{settings:o,domains:h,domainSuffix:l}=g().props,n=y({enableReinitialize:!0,initialValues:{domains:(o==null?void 0:o.domains)||[""]},validationSchema:C({domains:F().of(S().required(a("Please enter domain")).test("is-valid-domain","Domain format is invalid",s=>!s||R.test(s)).test("not-contain-suffix",`Domain cannot contain ${l}`,s=>!s||!s.toLowerCase().includes(l.toLowerCase()))).test("unique",a("Domains must be unique"),s=>s?new Set(s).size===s.length:!0).test("notInDefault",a("Cannot duplicate system domains"),s=>s?!s.some(i=>h.includes(i)):!0)}),onSubmit:s=>{const i=new FormData;i.append("domains",JSON.stringify(s.domains));const t=route("seller.theme-settings.update",{id:o.id});v.post(t,i,{preserveScroll:!0,onSuccess:r=>{var m,x,f,j;if((x=(m=r.props)==null?void 0:m.message)!=null&&x.error){d(a(r.props.message.error),"error");return}(j=(f=r.props)==null?void 0:f.message)!=null&&j.success?(d(a(r.props.message.success),"success"),n.resetForm()):d(a("Settings updated successfully"),"success")},onError:r=>{Object.keys(r).forEach(m=>{d(a(r[m]),"error")})}})}});return e.jsx(N.Fragment,{children:e.jsx(k,{value:n,children:e.jsxs(c,{noValidate:!0,onSubmit:n.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h5",{className:"mb-2",children:[a("Domain"),e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("p",{className:"text-muted fs-14 mb-1",children:a("To ensure that a website can be recognized and displayed to users, it must always have a primary domain name. Only one domain can be selected as the main domain")}),e.jsxs("p",{className:"text-muted fs-14 mb-3",children:[a("Current domain"),":"," ",e.jsx("span",{className:"fst-italic",children:h.find(s=>s.includes(l))})]}),e.jsx(b,{children:e.jsxs(u,{children:[e.jsx(w,{name:"domains",render:s=>e.jsxs("div",{className:"mb-3",children:[n.values.domains.map((i,t)=>e.jsxs(b,{className:"mb-2",children:[e.jsx(u,{children:e.jsx(c.Control,{type:"text",className:"form-control",id:"setting-domain",value:i,onChange:n.handleChange,onBlur:n.handleBlur,name:`domains[${t}]`,placeholder:a("Enter your domain")})}),n.values.domains.length>1&&e.jsx(u,{xs:"auto",children:e.jsx(p,{variant:"danger",onClick:()=>s.remove(t),children:e.jsx("i",{className:"ri-indeterminate-circle-line"})})})]},t)),e.jsxs(p,{variant:"secondary",onClick:()=>s.push(""),disabled:!0,children:[e.jsx("i",{className:"ri-add-circle-line"})," ",a("Add domain")]})]})}),e.jsxs(c.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:[" ",n.errors.domains," "]})]})})]}),e.jsx("div",{className:"text-start",children:e.jsx(p,{type:"submit",variant:"success",children:a("Update")})})]})})})};export{U as default};
