import{X as S,d as i,A as w,j as n}from"./ContextMenuProvider-8rBguBkL.js";import{c as P,a as h,u as I}from"./index.esm-Bfc3HaHj.js";import{s as t}from"./showToast-B4n8gNGd.js";import{u as k}from"./useTranslation-BPBxc4-B.js";import{M as x}from"./Modal-DMxzaNXW.js";import{F as a}from"./Form-DoI29bDO.js";import{B as y}from"./Button-Br3adEhm.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./react-toastify.esm-DX8f4vyh.js";import"./ThemeProvider-C1jYdK3n.js";import"./TransitionWrapper-Dd6GTOVG.js";import"./setPrototypeOf-B4fUID9J.js";import"./useEventCallback-Bb2ATeVh.js";import"./useWillUnmount-Cap3hWhx.js";import"./AbstractModalHeader-BLEobWoS.js";import"./hasClass-DsD7zE5-.js";import"./NoopTransition-BYQpEegO.js";import"./useEventCallback-CsTjYA5S.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-BMh1MdF-.js";import"./index-BKO7ubHG.js";import"./Fade-BdQMGh-v.js";import"./divWithClassName-sdpgvpBT.js";import"./Col-CtjW1edu.js";import"./Button-DQMQVwOo.js";const ce=({show:_,onHide:g,dataEdit:r,refetchData:L})=>{const{t:s}=k(),v=!!r,o=S().props.errors,[F,b]=i.useState(!1),[j,d]=i.useState(!1),B=i.useMemo(()=>P({account_name:h().max(150,"Must be 150 characters or less").required(s("Please enter this field")),account_number:h().required(s("Please enter this field")),user_name:h().required(s("Please enter this field")),password:h().required(s("Please enter this field")),...j?{otp:h().required(s("Please enter this field"))}:{}}),[j,s]),e=I({initialValues:{account_name:(r==null?void 0:r.account_name)||"",account_number:(r==null?void 0:r.account_number)??"",user_name:(r==null?void 0:r.user_name)??"",password:(r==null?void 0:r.password)??"",otp:(r==null?void 0:r.otp)??""},validationSchema:B,onSubmit:m=>{const l=route("seller.payment-history.store");w[v?"put":"post"](l,m,{onSuccess:c=>{var u,p,N,C;if((p=(u=c.props)==null?void 0:u.message)!=null&&p.error){t(s(c.props.message.error),"error");return}e.resetForm(),g(),(C=(N=c.props)==null?void 0:N.message)!=null&&C.success&&t(s(c.props.message.success),"success"),L()}})}});return i.useEffect(()=>{_?(e.setValues({account_name:(r==null?void 0:r.account_name)||"",account_number:(r==null?void 0:r.account_number)??"",user_name:(r==null?void 0:r.user_name)??"",password:(r==null?void 0:r.password)??"",otp:(r==null?void 0:r.otp)??""}),d(!1)):e.resetForm()},[_,r]),n.jsx(x,{id:"myModal",backdrop:"static",show:_,onHide:()=>{e.resetForm(),g()},centered:!0,children:n.jsxs(a,{onSubmit:e.handleSubmit,noValidate:!0,children:[n.jsx(x.Header,{closeButton:!0,children:n.jsx("h5",{children:s("Setting Payment")})}),n.jsxs(x.Body,{children:[n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("Account name"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"account_name",type:"text",placeholder:s("Enter account name"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.account_name,isInvalid:!!(e.touched.account_name&&e.errors.account_name||o!=null&&o.account_name)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.account_name||(o==null?void 0:o.account_name))})]}),n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("Account number"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"account_number",type:"text",placeholder:s("Enter account number"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.account_number,isInvalid:!!(e.touched.account_number&&e.errors.account_number||o!=null&&o.account_number)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.account_number||(o==null?void 0:o.account_number))})]}),n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("User name"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"user_name",type:"text",placeholder:s("0974 xxx xxx"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.user_name,isInvalid:!!(e.touched.user_name&&e.errors.user_name||o!=null&&o.user_name)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.user_name||(o==null?void 0:o.user_name))})]}),n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("Password"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"password",type:"text",placeholder:s("Enter password"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.password,isInvalid:!!(e.touched.password&&e.errors.password||o!=null&&o.password)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.password||(o==null?void 0:o.password))})]}),n.jsx(y,{variant:"success",type:"button",className:"mb-3",disabled:F,onClick:async()=>{b(!0),e.setTouched({account_name:!0,account_number:!0,user_name:!0,password:!0,otp:e.touched.otp||!1});const m=await e.validateForm();if(m.account_name||m.account_number||m.user_name||m.password){t(s("Please enter this field"),"error"),b(!1);return}w.post(route("seller.payment-history.verify-payment"),{account_name:e.values.account_name,account_number:e.values.account_number,user_name:e.values.user_name,password:e.values.password},{preserveScroll:!0,onSuccess:l=>{var f,c,u,p;if((c=(f=l.props)==null?void 0:f.message)!=null&&c.error){t(s(l.props.message.error),"error");return}d(!0),t(s(((p=(u=l.props)==null?void 0:u.message)==null?void 0:p.success)||"Verified successfully"),"success")},onError:()=>{t(s("Verification failed"),"error")},onFinish:()=>{b(!1)}})},children:s("Verify Payment")}),j&&n.jsxs(a.Group,{className:"mb-3",controlId:"categoryName",children:[n.jsxs(a.Label,{children:[s("OTP"),n.jsx("span",{className:"text-danger",children:"*"})]}),n.jsx(a.Control,{name:"otp",type:"text",placeholder:s("Enter OTP"),maxLength:150,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.otp,isInvalid:!!(e.touched.otp&&e.errors.otp||o!=null&&o.otp)}),n.jsx(a.Control.Feedback,{type:"invalid",children:s(e.errors.otp||(o==null?void 0:o.otp))})]})]}),n.jsxs(x.Footer,{children:[n.jsx(y,{variant:"light",onClick:()=>{e.resetForm(),g()},children:s("Close")}),n.jsx(y,{variant:"primary",type:"submit",children:s(v?"Update":"Save changes")})]})]})})};export{ce as ModalSettingPayment};
