import{A as P,d as u,j as e}from"./ContextMenuProvider-CUf15T8b.js";import{u as y}from"./formik.esm-D3LnCktS.js";import{c as C,a as n,b as x}from"./index.esm-Dr9W4QE-.js";import{s as j}from"./showToast-BZsJ5i2w.js";import{u as N}from"./useTranslation-CcWHtvoZ.js";import{M as l}from"./Modal-Cq5Iof0F.js";import{F as a}from"./Form-tX-X8fEq.js";import{B as w}from"./Button-D8tMtwFd.js";import"./toString-DZQbVhdU.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-BQLgnwv_.js";import"./react-toastify.esm-ZGmoa_RU.js";import"./ThemeProvider-B97jU0sy.js";import"./useMergedRefs-DxqJFB1B.js";import"./useEventCallback-D9rniTUJ.js";import"./useWillUnmount-CgiG1D_7.js";import"./TransitionWrapper-BiovwvO2.js";import"./setPrototypeOf-B4fUID9J.js";import"./AbstractModalHeader-BnVnJchn.js";import"./useWindow-BmGtZXAu.js";import"./querySelectorAll-a65Eisif.js";import"./useEventCallback-BkinHRQ0.js";import"./hasClass-B-lVPIr_.js";import"./NoopTransition-CYuCxw2t.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-CjwmBX8Z.js";import"./index-DKnNWrZg.js";import"./Fade-PIrusN3V.js";import"./divWithClassName-F6D8z14O.js";import"./Col-6EOqiNtv.js";import"./Button-NCU6JKbY.js";const ie=({show:i,onHide:d,dataEdit:o})=>{const{t:r}=N(),t=!!o,g=C({name:n().max(50,"Must be 50 characters or less").required(r("Please enter this field")),email:n().max(50,"Must be 50 characters or less").required(r("Please enter this field")),password:t?n().min(8,r("Password must be at least 8 characters")).max(20,"Must be 20 characters or less").optional():n().min(8,r("Password must be at least 8 characters")).max(20,"Must be 20 characters or less").required(r("Please enter this field")),confirmPassword:t?n().max(20,"Must be 20 characters or less").oneOf([x("password")],r("Passwords must match")).optional():n().max(20,"Must be 20 characters or less").oneOf([x("password")],r("Passwords must match")).required(r("Please enter this field")),type:n().required(r("Please enter this field")),status:n().required(r("Please enter this field"))}),s=y({initialValues:{name:"",email:"",password:"",confirmPassword:"",type:"",status:""},validationSchema:g,onSubmit:f=>{const v=t?route("admin.user.update",{id:o.id}):route("admin.user.add"),b=t?"put":"post",{confirmPassword:M,...m}=f;let h=m;if(t&&!m.password){const{password:c,...p}=m;h=p}P[b](v,h,{onSuccess:()=>{s.resetForm(),d()},onError:c=>{if(typeof c=="object"){const L=Object.values(c).flat().join(", ");j(L,"error")}else j("An error occurred","error")}})}});return u.useEffect(()=>{o?s.setValues({name:o.name||"",email:o.email||"",password:"",confirmPassword:"",type:o.type||"",status:o.status??""}):s.setValues({name:"",email:"",password:"",confirmPassword:"",type:"",status:""})},[o]),u.useEffect(()=>{i||s.resetForm()},[i]),e.jsx(l,{id:"myModal",backdrop:"static",show:i,onHide:()=>{s.resetForm(),d()},centered:!0,children:e.jsxs(a,{onSubmit:s.handleSubmit,noValidate:!0,children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx("h5",{children:r(t?"Edit":"Add")})}),e.jsxs(l.Body,{children:[e.jsxs(a.Group,{className:"mb-3",controlId:"name",children:[e.jsxs(a.Label,{children:[r("Name")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(a.Control,{type:"text",placeholder:r("Enter name"),maxLength:50,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.name,isInvalid:!!(s.touched.name&&s.errors.name)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.name})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"email",children:[e.jsxs(a.Label,{children:[r("Email")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(a.Control,{type:"text",placeholder:r("Enter email"),maxLength:50,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email,isInvalid:!!(s.touched.email&&s.errors.email)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.email})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"password",children:[e.jsxs(a.Label,{children:[r("Password"),!t&&e.jsx("span",{className:"text-danger",children:"*"}),t&&e.jsxs("small",{className:"text-muted",children:[" (",r("Leave blank to keep current password"),")"]})]}),e.jsx(a.Control,{type:"password",placeholder:r(t?"Enter new password":"Enter password"),maxLength:20,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password,isInvalid:!!(s.touched.password&&s.errors.password)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.password})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"confirmPassword",children:[e.jsxs(a.Label,{children:[r("Confirm Password"),!t&&e.jsx("span",{className:"text-danger",children:"*"}),t&&e.jsxs("small",{className:"text-muted",children:[" (",r("Leave blank to keep current password"),")"]})]}),e.jsx(a.Control,{type:"password",placeholder:r(t?"Confirm new password":"Confirm password"),maxLength:20,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.confirmPassword,isInvalid:!!(s.touched.confirmPassword&&s.errors.confirmPassword)}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.confirmPassword})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"type",children:[e.jsxs(a.Label,{children:[r("Type")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(a.Select,{name:"type",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.type,isInvalid:!!(s.touched.type&&s.errors.type),children:[e.jsx("option",{value:"",children:r("Select type")}),e.jsx("option",{value:"ADMIN",children:"ADMIN"}),e.jsx("option",{value:"SELLER",children:"SELLER"})]}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.type})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"status_user",children:[e.jsxs(a.Label,{children:[r("Status")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(a.Select,{name:"status",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.status,isInvalid:!!(s.touched.status&&s.errors.status),children:[e.jsx("option",{value:"",children:r("Select status")}),e.jsx("option",{value:"0",children:r("Inactive")}),e.jsx("option",{value:"1",children:r("Active")}),e.jsx("option",{value:"2",children:r("Block")})]}),e.jsx(a.Control.Feedback,{type:"invalid",children:s.errors.status})]})]}),e.jsxs(l.Footer,{children:[e.jsx(w,{variant:"light",onClick:()=>{s.resetForm(),d()},children:r("Close")}),e.jsx(w,{variant:"primary",type:"submit",children:r(t?"Update":"Save changes")})]})]})})};export{ie as ModalDetail};
