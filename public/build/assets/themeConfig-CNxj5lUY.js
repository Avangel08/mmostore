import{d as C,X as g,A as V,j as e,R as D}from"./ContextMenuProvider-1cB75p-p.js";import{u as U,c as q,a as L,g as S}from"./index.esm-AjD9Q23E.js";import{C as z}from"./CustomCKEditor-D7VUpg-S.js";import{s as c}from"./showToast-BmC33B7c.js";import{F as A,r as G,p as M,a as K}from"./filepond-plugin-image-preview.esm-X0rsbPdp.js";import{i as O,a as W,b as X}from"./theme-store-3-P91gzE90.js";import{u as J}from"./useTranslation-C7Yq1257.js";import{F as o}from"./Form-vqhQI7d8.js";import{B as _}from"./Button-DzpAM0nN.js";import{R as p}from"./Row-Cp0Qg_e-.js";import{C as h}from"./Col-D0392pNZ.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DfFFbtXD.js";import"./react-toastify.esm-CMP2010h.js";import"./ThemeProvider-CK0LS3qr.js";import"./index-hS6bo2zO.js";import"./Button-BmeryA7r.js";G(M,K);const Q=[{key:"theme_1",label:"Theme 1",image:O},{key:"theme_2",label:"Theme 2",image:W},{key:"theme_3",label:"Theme 3",image:X}],xe=()=>{var u,j,f,N,b,v,H,k,y;const{t}=J(),[$,w]=C.useState(null),[E,B]=C.useState([]),l=g().props.errors,x=g().props.storageUrl,{settings:r}=g().props,R=!!r,a=U({enableReinitialize:!0,initialValues:{theme:(r==null?void 0:r.theme)||"theme_1",storeName:((u=r==null?void 0:r.store_settings)==null?void 0:u.storeName)||"",storeLogo:((j=r==null?void 0:r.store_settings)==null?void 0:j.storeLogo)||"",pageHeaderImage:((f=r==null?void 0:r.store_settings)==null?void 0:f.pageHeaderImage)||"",pageHeaderText:((N=r==null?void 0:r.store_settings)==null?void 0:N.pageHeaderText)||"Hello, welcome to my store"},validationSchema:q({storeName:L().required("Please enter store name"),pageHeaderImage:S().required("Please select a image"),storeLogo:S().required("Please select a logo store"),pageHeaderText:L().required("Please enter page header text")}),onSubmit:s=>{const i=new FormData;i.append("theme",s.theme),i.append("storeName",s.storeName),i.append("storeLogo",s.storeLogo),i.append("pageHeaderImage",s.pageHeaderImage),i.append("pageHeaderText",s.pageHeaderText);const m=route("seller.theme-settings.update",{id:r.id});V.post(m,i,{preserveScroll:!0,onSuccess:d=>{var n,F,T,I;if((F=(n=d.props)==null?void 0:n.message)!=null&&F.error){c(t(d.props.message.error),"error");return}(I=(T=d.props)==null?void 0:T.message)!=null&&I.success?(c(t(d.props.message.success),"success"),a.resetForm()):c(t("Settings updated successfully"),"success")},onError:d=>{Object.keys(d).forEach(n=>{c(t(d[n]),"error")})}})}}),P=s=>{const i=s.target.files[0],m=new FileReader;m.onload=d=>{w(d.target.result),a.setFieldValue("storeLogo",i),a.setFieldTouched("storeLogo",!0)},m.readAsDataURL(i)};return console.log({errors:l,touched:(b=a.touched)==null?void 0:b.storeName,formik:a.errors}),e.jsx(D.Fragment,{children:e.jsxs(o,{noValidate:!0,onSubmit:a.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h5",{className:"mb-0",children:t("Store")}),e.jsx("div",{className:"d-flex gap-2",children:e.jsxs(_,{variant:"outline-success",size:"sm",children:[e.jsx("i",{className:"ri-eye-line align-bottom me-1"})," ",t("View store")]})})]}),e.jsx(p,{children:e.jsxs(h,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fs-13 mb-3 fw-medium",children:e.jsxs("span",{children:[t("Theme")," ",e.jsx("span",{className:"text-danger",children:"*"})]})}),e.jsx(p,{children:Q.map(s=>e.jsx(h,{xs:"4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:s.image,className:"rounded avatar-xl mb-2"}),e.jsxs(o.Group,{className:"d-flex align-items-center justify-content-center gap-2",children:[e.jsx(o.Check,{type:"radio",name:"theme",value:String(s.key),id:`${s.key}`,disabled:s.key==="theme_2"||s.key==="theme_3",onChange:a.handleChange,onBlur:a.handleBlur,checked:a.values.theme===String(s.key)}),e.jsx(o.Label,{htmlFor:`${s.key}`,className:`text-muted mb-0 ${s.key==="theme_2"||s.key==="theme_3"?"cursor-default":"cursor-pointer"}`,children:t(s.label)})]}),s.key==="theme_2"||s.key==="theme_3"?e.jsx("div",{style:{fontSize:12,fontStyle:"italic",color:"#fd7e14"},children:t("Coming soon")}):null]})},s.key))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(o.Group,{children:[e.jsxs(o.Label,{className:"form-label",htmlFor:"setting-title-input",children:[t("Store name")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(o.Control,{type:"text",className:"form-control",onChange:a.handleChange,onBlur:a.handleBlur,name:"storeName",id:"setting-title-input",placeholder:t("Enter name store"),value:a.values.storeName,isInvalid:!!((v=a.touched)!=null&&v.storeName&&((H=a.errors)!=null&&H.storeName))})]}),e.jsxs(o.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:[" ",a.errors.storeName," "]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"fs-14 mb-1",children:[t("Logo")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("p",{className:"text-muted",children:t("Add a logo for your store")}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("div",{className:"position-absolute top-100 start-100 translate-middle",children:e.jsxs(o.Group,{children:[e.jsx(o.Label,{htmlFor:"customer-image-input",className:"mb-0","data-bs-toggle":"tooltip","data-bs-placement":"right",title:"Select Image",children:e.jsx("div",{className:"avatar-xs cursor-pointer",children:e.jsx("div",{className:"avatar-title bg-light border rounded-circle text-muted",children:e.jsx("i",{className:"ri-image-fill"})})})}),e.jsx(o.Control,{className:"form-control d-none",id:"customer-image-input",type:"file",name:"storeLogo",accept:"image/png, image/gif, image/jpeg",onChange:P})]})}),e.jsx("div",{className:"avatar-lg",children:e.jsx("div",{className:"avatar-title bg-light rounded",children:e.jsx("img",{src:$,id:"product-img",alt:"",className:"avatar-md h-auto"})})})]})}),a.errors.storeLogo&&a.touched.storeLogo?e.jsx("div",{className:"invalid-feedback d-block",children:t(a.errors.storeLogo||(l==null?void 0:l.storeLogo))}):null]}),R&&(r==null?void 0:r.image)&&e.jsx(p,{className:"mb-4",children:e.jsx(h,{md:12,children:e.jsx(o.Group,{children:e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fs-13 mb-3 fw-medium",children:e.jsx("span",{children:t("Current product image")})}),e.jsx("a",{target:"_blank",href:`${x}/${(k=r==null?void 0:r.store_settings)==null?void 0:k.pageHeaderImage}`,children:e.jsx("img",{src:`${x}/${(y=r==null?void 0:r.store_settings)==null?void 0:y.pageHeaderImage}?v=${Date.now()}`,style:{maxWidth:"200px",maxHeight:"200px",objectFit:"contain",border:"1px solid #dee2e6",borderRadius:"4px"}})})]})})})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(o.Label,{children:[t("Page header image")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(A,{files:E,onupdatefiles:s=>{if(B(s),s.length>0&&s[0].file){const i=s[0].file;a.setFieldValue("pageHeaderImage",i),a.setFieldTouched("pageHeaderImage",!0)}else a.setFieldValue("pageHeaderImage",null),a.setFieldTouched("pageHeaderImage",!0)},allowMultiple:!1,maxFiles:1,name:"pageHeaderImage",acceptedFileTypes:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],labelIdle:t(`ðŸ“· ${t("Drag & Drop your image or")} <span class="filepond--label-action">${t("Choose file")}</span>`),maxFileSize:"2MB",instantUpload:!1,credits:!1,className:a.touched.pageHeaderImage&&a.errors.pageHeaderImage||l!=null&&l.pageHeaderImage?"is-invalid":""}),(a.touched.pageHeaderImage&&a.errors.pageHeaderImage||(l==null?void 0:l.pageHeaderImage))&&e.jsx(o.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:t(a.errors.pageHeaderImage||(l==null?void 0:l.pageHeaderImage))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(o.Label,{children:t("Page header text")}),e.jsx(z,{data:a.values.pageHeaderText,onChange:s=>{a.setFieldValue("pageHeaderText",s)},onBlur:()=>a.setFieldTouched("pageHeaderText",!0),placeholder:t("Enter detailed description")}),(a.touched.pageHeaderText&&a.errors.pageHeaderText||(l==null?void 0:l.pageHeaderText))&&e.jsx(o.Control.Feedback,{type:"invalid",className:"invalid-feedback d-block",children:t(a.errors.pageHeaderText||(l==null?void 0:l.pageHeaderText))})]})]})})]}),e.jsx("div",{className:"text-start",children:e.jsx(_,{type:"submit",variant:"success",children:t("Update")})})]})})};export{xe as default};
