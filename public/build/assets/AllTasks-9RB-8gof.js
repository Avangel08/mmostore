import{a as O,u as $,r as i,j as e,R as I,x as Q}from"./app-fd4t7no8.js";import{T as W}from"./TableContainer-BM2WXmQp.js";import{D as B}from"./DeleteModal-C73qEGJK.js";import{S as _}from"./index-BiRVQCJV.js";import{F as G}from"./index-BiBx5cRw.js";import{h as J}from"./moment-C5S46NFB.js";import{OrdersId as X,Project as Z,CreateBy as ee,DueDate as ae,Status as te,Priority as se}from"./TaskListCol-YWxjM2_o.js";import{u as re,c as le,d as ie,a as d}from"./index.esm-Cmb7X2Dd.js";import{l as S}from"./lodash-aAEFdakn.js";import{Q as oe,B as ne}from"./ReactToastify-B_Anscjr.js";import{L as ce}from"./Loader-Ct0YabFq.js";import{c as de}from"./reselect-CiXCCDx7.js";import{a as me}from"./avatar-1-PHP4S1R6.js";import{a as ue}from"./avatar-2-B-1-S_lh.js";import{a as he}from"./avatar-3-CSm6kh8B.js";import{a as pe}from"./avatar-5-D7m8bZ3v.js";import{a as ke}from"./avatar-6-DJX3lkeY.js";import{a as xe}from"./avatar-7-ChzoTmzs.js";import{a as fe}from"./avatar-8-BaCFiEfo.js";import{a as je}from"./avatar-10-BcqtGVJW.js";import{c as be,d as E,e as ge,f as Ce}from"./thunk-wiznj96Q.js";import{F as r}from"./Form-CsjSNuHb.js";import{B as x}from"./Button-B4tXbzRF.js";import{C as c}from"./Col-7scarjyv.js";import{M as v}from"./Modal-BqkW0FaX.js";import{R as Ne}from"./Row-BuCXUTX8.js";import"./index-DO-pdKaq.js";import"./react-select.esm-CPB9gOgH.js";import"./extends-MDuutsTJ.js";import"./setPrototypeOf-DgZC2w_0.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./hoist-non-react-statics.cjs-dtX2lZ_p.js";import"./Dropdown-efEmyPci.js";import"./ThemeProvider-B_9wk00B.js";import"./querySelectorAll-Cwpyv69p.js";import"./useMergedRefs-F_CleFMV.js";import"./SSRProvider-DC8WdQng.js";import"./usePrevious-WCz2UM3y.js";import"./useForceUpdate-DmW_SqQZ.js";import"./useEventCallback-CTqJZIWn.js";import"./mergeOptionsWithPopperConfig-CvoStc6P.js";import"./useWindow-D0Z8p2ql.js";import"./NavContext-DKLQoxMT.js";import"./Button-86-2XGvn.js";import"./DataKey-DjdvojM5.js";import"./hook-DtINLY6x.js";import"./useEventCallback-CiqWgYQB.js";import"./Anchor-DcFaUJxa.js";import"./useIsomorphicEffect-DNxiiWKR.js";import"./InputGroupContext-BDCQuM-G.js";import"./NavbarContext-D7bvf9E_.js";import"./useTranslation-KyoNfcy9.js";import"./Card-BXRTpShH.js";import"./CardHeaderContext-XyWR7fBw.js";import"./divWithClassName-BmE2s6GC.js";import"./Table-B7gytYBk.js";import"./isSymbol-qHNDJudD.js";import"./index-Dl_sAyqM.js";import"./Spinner-678t2i5n.js";import"./calender-BnoOcmFC.js";import"./ltc-BjMPbQSH.js";import"./dash-TnNMg90k.js";import"./img-1-Jhxup-Mz.js";import"./img-2-BKxLD3CN.js";import"./img-3-B4j7qXDU.js";import"./img-6-B4dmEj4y.js";import"./taskList-CmelDI2M.js";import"./avatar-4-BkrIkC6X.js";import"./avatar-9-iQiecx18.js";import"./img-7-CJgpB7jU.js";import"./img-4-BjZu39fc.js";import"./ElementChildren-9Eof15LD.js";import"./useWillUnmount-DQzmu3H0.js";import"./TransitionWrapper-CD7mok4d.js";import"./AbstractModalHeader-DclvhUmC.js";import"./hasClass-0hhgA0sG.js";import"./useMergedRefs-CTh8buMQ.js";import"./NoopTransition-ClXI9N_X.js";import"./utils-D2GgX5jC.js";import"./CloseButton-CJMAsNxO.js";import"./Fade-DeWujXmH.js";const ye=[{id:1,imgId:"anna-adame",img:me,name:"Anna Adame"},{id:2,imgId:"frank-hook",img:he,name:"Frank Hook"},{id:3,imgId:"alexis-clarke",img:ke,name:"Alexis Clarke"},{id:4,imgId:"herbert-stokes",img:ue,name:"Herbert Stokes"},{id:5,imgId:"michael-morris",img:xe,name:"Michael Morris"},{id:6,imgId:"nancy-martino",img:pe,name:"Nancy Martino"},{id:7,imgId:"thomas-taylor",img:fe,name:"Thomas Taylor"},{id:8,imgId:"tonya-noble",img:je,name:"Tonya Noble"}],et=()=>{const m=O(),M=de(a=>a.Tasks,a=>({taskList:a.taskList,isTaskSuccess:a.isTaskSuccess,error:a.error,isTaskAdd:a.isTaskAdd,isTaskAddFail:a.isTaskAddFail,isTaskDelete:a.isTaskDelete,isTaskDeleteFail:a.isTaskDeleteFail,isTaskUpdate:a.isTaskUpdate,isTaskUpdateFail:a.isTaskUpdateFail})),{taskList:o,isTaskSuccess:ve,error:P}=$(M),[f,h]=i.useState(!1),[l,p]=i.useState([]),[j,k]=i.useState([]),[L,b]=i.useState(!1),[A,g]=i.useState(!1),[C,N]=i.useState(!1),u=i.useCallback(()=>{C?(N(!1),p(null)):N(!0)},[C]),w=a=>{p(a),b(!0)};i.useEffect(()=>{k(o)},[o]);const q=()=>{l&&(m(E(l.id)),b(!1))},t=re({enableReinitialize:!0,initialValues:{taskId:l&&l.taskId||"",project:l&&l.project||"",task:l&&l.task||"",creater:l&&l.creater||"",dueDate:l&&l.dueDate||"",status:l&&l.status||"",priority:l&&l.priority||"",subItem:l&&l.subItem||[]},validationSchema:le({taskId:d().required("Please Enter Task Id"),project:d().required("Please Enter Project Name"),task:d().required("Please Enter Your Task"),creater:d().required("Please Enter Creater Name"),dueDate:d().required("Please Enter Due Date"),status:d().required("Please Enter Status"),priority:d().required("Please Enter Priority"),subItem:ie().required("Please Enter an Image")}),onSubmit:a=>{if(f){const s={id:l?l.id:0,taskId:a.taskId,project:a.project,task:a.task,creater:a.creater,dueDate:a.dueDate,status:a.status,priority:a.priority,subItem:a.subItem};m(ge(s)),t.resetForm()}else{const s={id:(Math.floor(Math.random()*10)+20).toString(),taskId:a.taskId,project:a.project,task:a.task,creater:a.creater,dueDate:a.dueDate,status:a.status,priority:a.priority,subItem:a.subItem};m(Ce(s)),t.resetForm()}u()}}),T=i.useCallback(a=>{const s=a;p({id:s.id,taskId:s.taskId,project:s.project,task:s.task,creater:s.creater,dueDate:s.dueDate,status:s.status,priority:s.priority,subItem:s.subItem}),h(!0),u()},[u]),K=()=>{p(""),h(!1),u()};i.useEffect(()=>{S.isEmpty(o)||k(o)},[o]),i.useEffect(()=>{o&&!o.length&&m(be())},[m,o]),i.useEffect(()=>{k(o)},[o]),i.useEffect(()=>{S.isEmpty(o)||(k(o),h(!1))},[o]);const D=i.useCallback(()=>{const a=document.getElementById("checkBoxAll"),s=document.querySelectorAll(".taskCheckBox");a.checked?s.forEach(n=>{n.checked=!0}):s.forEach(n=>{n.checked=!1}),F()},[]),[H,Y]=i.useState([]),[R,y]=i.useState(!1),U=()=>{const a=document.getElementById("checkBoxAll");H.forEach(s=>{m(E(s.value)),setTimeout(()=>{ne.clearWaitingQueue()},3e3)}),y(!1),a.checked=!1},F=()=>{const a=document.querySelectorAll(".taskCheckBox:checked");a.length>0?y(!0):y(!1),Y(a)},V=i.useMemo(()=>[{header:e.jsx(r.Check.Input,{type:"checkbox",id:"checkBoxAll",className:"form-check-input",onClick:()=>D()}),cell:a=>e.jsx(r.Check.Input,{type:"checkbox",className:"taskCheckBox form-check-input",value:a.getValue(),onChange:()=>F()}),id:"#"},{header:"Order ID",accessorKey:"taskId",enableColumnFilter:!1,cell:a=>e.jsx(X,{...a})},{header:"Project",accessorKey:"project",enableColumnFilter:!1,cell:a=>e.jsx(Z,{...a})},{header:"Tasks",accessorKey:"task",enableColumnFilter:!1,cell:a=>e.jsx(I.Fragment,{children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"flex-grow-1 tasks_name",children:a.getValue()}),e.jsx("div",{className:"flex-shrink-0 ms-4",children:e.jsxs("ul",{className:"list-inline tasks-list-menu mb-0",children:[e.jsx("li",{className:"list-inline-item",children:e.jsx(x,{variant:"link",href:"/apps-tasks-details",children:e.jsx("i",{className:"ri-eye-fill align-bottom me-2 text-muted"})})}),e.jsx("li",{className:"list-inline-item",children:e.jsx(x,{variant:"link",href:"#",onClick:()=>{const s=a.row.original;T(s)},children:e.jsx("i",{className:"ri-pencil-fill align-bottom me-2 text-muted"})})}),e.jsx("li",{className:"list-inline-item",children:e.jsx(x,{variant:"link",href:"#",className:"remove-item-btn",onClick:()=>{const s=a.row.original;w(s)},children:e.jsx("i",{className:"ri-delete-bin-fill align-bottom me-2 text-muted"})})})]})})]})})},{header:"Created By",accessorKey:"creater",enableColumnFilter:!1,cell:a=>e.jsx(ee,{...a})},{header:"Assigned To",accessorKey:"subItem",enableColumnFilter:!1,cell:a=>{const s=a.getValue().map(n=>n.img?n.img:n);return e.jsx(I.Fragment,{children:e.jsx("div",{className:"avatar-group",children:s.map((n,z)=>e.jsx(Q,{href:"#",className:"avatar-group-item",children:e.jsx("img",{src:n,alt:"",className:"rounded-circle avatar-xxs"})},z))})})}},{header:"Due Date",accessorKey:"dueDate",enableColumnFilter:!1,cell:a=>e.jsx(ae,{...a})},{header:"Status",accessorKey:"status",enableColumnFilter:!1,cell:a=>e.jsx(te,{...a})},{header:"Priority",accessorKey:"priority",enableColumnFilter:!1,cell:a=>e.jsx(se,{...a})}],[T,D]);return e.jsxs(I.Fragment,{children:[e.jsx(B,{show:L,onDeleteClick:q,onCloseClick:()=>b(!1)}),e.jsx(B,{show:A,onDeleteClick:()=>{U(),g(!1)},onCloseClick:()=>g(!1)}),e.jsx("div",{className:"row",children:e.jsx(c,{lg:12,children:e.jsxs("div",{className:"card",id:"tasksList",children:[e.jsx("div",{className:"card-header border-0",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("h5",{className:"card-title mb-0 flex-grow-1",children:"All Tasks"}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[e.jsxs("button",{className:"btn btn-primary add-btn me-1",onClick:()=>{h(!1),u()},children:[e.jsx("i",{className:"ri-add-line align-bottom me-1"})," Create Task"]}),R&&e.jsx("button",{className:"btn btn-soft-danger",onClick:()=>g(!0),children:e.jsx("i",{className:"ri-delete-bin-2-line"})})]})})]})}),e.jsxs("div",{className:"card-body pt-0",children:[j&&j.length?e.jsx(W,{columns:V,data:j||[],customPageSize:8,divClass:"table-responsive table-card mb-3",tableClass:"align-middle table-nowrap mb-0",theadClass:"table-light text-muted",thClass:"table-light text-muted",handleTaskClick:K,isTaskListFilter:!0,SearchPlaceholder:"Search for tasks or something..."}):e.jsx(ce,{error:P}),e.jsx(oe,{closeButton:!1,limit:1})]})]})})}),e.jsxs(v,{show:C,onHide:u,centered:!0,size:"lg",className:"border-0",modalClassName:"modal fade zoomIn",children:[e.jsx(v.Header,{className:"p-3 bg-info-subtle",closeButton:!0,children:e.jsx("h5",{className:"modal-title",children:f?"Edit Task":"Create Task"})}),e.jsxs(r,{className:"tablelist-form",onSubmit:a=>(a.preventDefault(),t.handleSubmit(),!1),children:[e.jsx(v.Body,{className:"modal-body",children:e.jsxs(Ne,{className:"g-3",children:[e.jsxs(c,{lg:12,children:[e.jsx(r.Label,{htmlFor:"taskId-field",className:"form-label",children:"Order Id"}),e.jsx(r.Control,{name:"taskId",id:"taskId-field",className:"form-control",placeholder:"Enter Task Id ",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.taskId||""}),t.touched.taskId&&t.errors.taskId?e.jsx(r.Control.Feedback,{type:"invalid",children:t.errors.taskId}):null]}),e.jsxs(c,{lg:12,children:[e.jsx(r.Label,{htmlFor:"projectName-field",className:"form-label",children:"Project Name"}),e.jsx(r.Control,{name:"project",id:"projectName-field",className:"form-control",placeholder:"Project name",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.project||""}),t.touched.project&&t.errors.project?e.jsx(r.Control.Feedback,{type:"invalid",children:t.errors.project}):null]}),e.jsx(c,{lg:12,children:e.jsxs("div",{children:[e.jsx(r.Label,{htmlFor:"tasksTitle-field",className:"form-label",children:"Title"}),e.jsx(r.Control,{name:"task",id:"tasksTitle-field",className:"form-control",placeholder:"Title",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.task||""}),t.touched.task&&t.errors.task?e.jsx(r.Control.Feedback,{type:"invalid",children:t.errors.task}):null]})}),e.jsxs(c,{lg:12,children:[e.jsx(r.Label,{htmlFor:"clientName-field",className:"form-label",children:"Client Name"}),e.jsx(r.Control,{name:"creater",id:"clientName-field",className:"form-control",placeholder:"Client name",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.creater||""}),t.touched.creater&&t.errors.creater?e.jsx(r.Control.Feedback,{type:"invalid",children:t.errors.creater}):null]}),e.jsxs(c,{lg:12,children:[e.jsx(r.Label,{className:"form-label",children:"Assigned To"}),e.jsx(_,{style:{maxHeight:"95px"},children:e.jsx("ul",{className:"list-unstyled vstack gap-2 mb-0",children:ye.map((a,s)=>e.jsx("li",{children:e.jsxs("div",{className:"form-check d-flex align-items-center",children:[e.jsx(r.Check.Input,{name:"subItem",className:"form-check-input me-3",type:"checkbox",onChange:t.handleChange,onBlur:t.handleBlur,value:a.img,id:a.imgId}),e.jsxs(r.Check.Label,{className:"form-check-label d-flex align-items-center",htmlFor:a.imgId,children:[e.jsx("span",{className:"flex-shrink-0",children:e.jsx("img",{src:a.img,alt:"",className:"avatar-xxs rounded-circle"})}),e.jsx("span",{className:"flex-grow-1 ms-2",children:a.name})]}),t.touched.subItem&&t.errors.subItem?e.jsx(r.Control.Feedback,{type:"invalid",children:t.errors.subItem}):null]})},s))})})]}),e.jsxs(c,{lg:6,children:[e.jsx(r.Label,{htmlFor:"duedate-field",className:"form-label",children:"Due Date"}),e.jsx(G,{name:"dueDate",id:"duedate-field",className:"form-control",placeholder:"Select a date",options:{altInput:!0,altFormat:"d M, Y",dateFormat:"d M, Y"},onChange:a=>t.setFieldValue("dueDate",J(a[0]).format("DD MMMM ,YYYY")),value:t.values.dueDate||""}),t.errors.dueDate&&t.touched.dueDate?e.jsx(r.Control.Feedback,{type:"invalid",className:"d-block",children:t.errors.dueDate}):null]}),e.jsxs(c,{lg:6,children:[e.jsx(r.Label,{htmlFor:"ticket-status",className:"form-label",children:"Status"}),e.jsxs("select",{name:"status",className:"form-select",id:"ticket-field",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.status||"",children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Inprogress",children:"Inprogress"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Completed",children:"Completed"})]}),t.touched.status&&t.errors.status?e.jsx(r.Control.Feedback,{type:"invalid",children:t.errors.status}):null]}),e.jsxs(c,{lg:12,children:[e.jsx(r.Label,{htmlFor:"priority-field",className:"form-label",children:"Priority"}),e.jsxs("select",{name:"priority",className:"form-select",id:"priority-field",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.priority||"",children:[e.jsx("option",{value:"",children:"Priority"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]}),t.touched.priority&&t.errors.priority?e.jsx(r.Control.Feedback,{type:"invalid",children:t.errors.priority}):null]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("div",{className:"hstack gap-2 justify-content-end",children:[e.jsx(x,{type:"button",onClick:()=>{N(!1)},className:"btn-light",children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",id:"add-btn",children:f?"Update Task":"Add Task"})]})})]})]})]})};export{et as default};
