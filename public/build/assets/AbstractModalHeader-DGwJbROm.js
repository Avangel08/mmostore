import{o as Ee,s as g,e as ve,l as H,i as be}from"./TransitionWrapper-OCvs7ibJ.js";import{u as q,a as ye,b as Te,r as K,c as G,h as Ce}from"./hasClass-C1CTDmmh.js";import{d as a,j as c,D as xe}from"./ContextMenuProvider-CES3zOYT.js";import{u as m}from"./useEventCallback-D6Z_fwsa.js";import{d as Re}from"./DataKey-DjdvojM5.js";import{u as Me}from"./useEventCallback-BS1FAiJB.js";import{C as we}from"./CloseButton-BPP0C4QK.js";function Oe(t){const e=a.useRef(null);return a.useEffect(()=>{e.current=t}),e.current}var ke=Function.prototype.bind.call(Function.prototype.call,[].slice);function u(t,e){return ke(t.querySelectorAll(e))}function O(t){t===void 0&&(t=Ee());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Ae(t){const e=a.useRef(t);return e.current=t,e}function Ne(t){const e=Ae(t);a.useEffect(()=>()=>e.current(),[])}function Be(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const V=Re("modal-open");class N{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:o=!1}={}){this.handleContainerOverflow=n,this.isRTL=o,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Be(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[o]:r.style[o]},e.scrollBarWidth&&(n[o]=`${parseInt(g(r,o)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(V,""),g(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(V),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Le=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function De(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)>=0)continue;n[o]=t[o]}return n}let k;function Se(t){return k||(k=new N({ownerDocument:t==null?void 0:t.document})),k}function je(t){const e=q(),n=t||Se(e),o=a.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>n.add(o.current),remove:()=>n.remove(o.current),isTopModal:()=>n.isTopModal(o.current),setDialogRef:a.useCallback(r=>{o.current.dialog=r},[]),setBackdropRef:a.useCallback(r=>{o.current.backdrop=r},[])})}const X=a.forwardRef((t,e)=>{let{show:n=!1,role:o="dialog",className:r,style:i,children:b,backdrop:h=!0,keyboard:y=!0,onBackdropClick:B,onEscapeKeyDown:L,transition:Y,runTransition:$,backdropTransition:z,runBackdropTransition:J,autoFocus:Q=!0,enforceFocus:Z=!0,restoreFocus:ee=!0,restoreFocusOptions:te,renderDialog:D,renderBackdrop:ne=s=>c.jsx("div",Object.assign({},s)),manager:oe,container:re,onShow:S,onHide:j=()=>{},onExit:se,onExited:F,onExiting:ae,onEnter:ie,onEntering:le,onEntered:ce}=t,de=De(t,Le);const d=q(),p=ye(re),l=je(oe),ue=Te(),fe=Oe(n),[T,W]=a.useState(!n),E=a.useRef(null);a.useImperativeHandle(e,()=>l,[l]),ve&&!fe&&n&&(E.current=O(d==null?void 0:d.document)),n&&T&&W(!1);const I=m(()=>{if(l.add(),R.current=H(document,"keydown",ge),x.current=H(document,"focus",()=>setTimeout(he),!0),S&&S(),Q){var s,_;const w=O((s=(_=l.dialog)==null?void 0:_.ownerDocument)!=null?s:d==null?void 0:d.document);l.dialog&&w&&!G(l.dialog,w)&&(E.current=w,l.dialog.focus())}}),C=m(()=>{if(l.remove(),R.current==null||R.current(),x.current==null||x.current(),ee){var s;(s=E.current)==null||s.focus==null||s.focus(te),E.current=null}});a.useEffect(()=>{!n||!p||I()},[n,p,I]),a.useEffect(()=>{T&&C()},[T,C]),Ne(()=>{C()});const he=m(()=>{if(!Z||!ue()||!l.isTopModal())return;const s=O(d==null?void 0:d.document);l.dialog&&s&&!G(l.dialog,s)&&l.dialog.focus()}),me=m(s=>{s.target===s.currentTarget&&(B==null||B(s),h===!0&&j())}),ge=m(s=>{y&&be(s)&&l.isTopModal()&&(L==null||L(s),s.defaultPrevented||j())}),x=a.useRef(),R=a.useRef(),pe=(...s)=>{W(!0),F==null||F(...s)};if(!p)return null;const P=Object.assign({role:o,ref:l.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},de,{style:i,className:r,tabIndex:-1});let M=D?D(P):c.jsx("div",Object.assign({},P,{children:a.cloneElement(b,{role:"document"})}));M=K(Y,$,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:se,onExiting:ae,onExited:pe,onEnter:ie,onEntering:le,onEntered:ce,children:M});let v=null;return h&&(v=ne({ref:l.setBackdropRef,onClick:me}),v=K(z,J,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:v})),c.jsx(c.Fragment,{children:xe.createPortal(c.jsxs(c.Fragment,{children:[v,M]}),p)})});X.displayName="Modal";const Ye=Object.assign(X,{Manager:N});function Fe(t,e){t.classList?t.classList.add(e):Ce(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function U(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function We(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=U(t.className,e):t.setAttribute("class",U(t.className&&t.className.baseVal||"",e))}const f={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Ie extends N{adjustAndStore(e,n,o){const r=n.style[e];n.dataset[e]=r,g(n,{[e]:`${parseFloat(g(n,e))+o}px`})}restore(e,n){const o=n.dataset[e];o!==void 0&&(delete n.dataset[e],g(n,{[e]:o}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(Fe(n,"modal-open"),!e.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(n,f.FIXED_CONTENT).forEach(i=>this.adjustAndStore(o,i,e.scrollBarWidth)),u(n,f.STICKY_CONTENT).forEach(i=>this.adjustAndStore(r,i,-e.scrollBarWidth)),u(n,f.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(r,i,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();We(n,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(n,f.FIXED_CONTENT).forEach(i=>this.restore(o,i)),u(n,f.STICKY_CONTENT).forEach(i=>this.restore(r,i)),u(n,f.NAVBAR_TOGGLER).forEach(i=>this.restore(r,i))}}let A;function $e(t){return A||(A=new Ie(t)),A}const Pe=a.createContext({onHide(){}}),_e=a.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:o,children:r,...i},b)=>{const h=a.useContext(Pe),y=Me(()=>{h==null||h.onHide(),o==null||o()});return c.jsxs("div",{ref:b,...i,children:[r,n&&c.jsx(we,{"aria-label":t,variant:e,onClick:y})]})});_e.displayName="AbstractModalHeader";export{_e as A,Ye as B,Pe as M,Ie as a,$e as g,u as q,Oe as u};
