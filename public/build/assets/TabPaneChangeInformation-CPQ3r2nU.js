import{X as g,d as c,A as v,j as e}from"./ContextMenuProvider-DoI9LuTu.js";import{u as y,c as E,a as d}from"./index.esm-yjK6ua4W.js";import{s as N}from"./showToast-BFjkHmvN.js";import{h as T}from"./moment-C5S46NFB.js";import{u as w}from"./useTranslation-Bh5zzBC_.js";import{T as S}from"./Tab-dE3hgtSR.js";import{F as t}from"./Form-C6Oq7frR.js";import{R as i}from"./Row-DaX0pFtU.js";import{C as l}from"./Col-BERnSmBs.js";import{B as C}from"./Button-CdshqBqI.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-BsRiVy2U.js";import"./react-toastify.esm-8BWsAHON.js";import"./index-B7rcZTdA.js";import"./SSRProvider-CLk7drUW.js";import"./TabContext-CGmNngma.js";import"./SelectableContext-Cn0HZByE.js";import"./NoopTransition-Badst7zB.js";import"./useEventCallback-Bsoi2xyD.js";import"./TransitionWrapper-CRtjL7Sb.js";import"./useMergedRefs-Cm3LQ1VB.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./setPrototypeOf-DgZC2w_0.js";import"./Fade-iG7JUvQW.js";import"./ThemeProvider-CQKb4rSK.js";import"./Button-lElTeqs9.js";function se(){var p,x;const{t:r}=w(),a=g().props.auth.user,u=g().props.errors,[h,_]=c.useState(null);c.useEffect(()=>{const m=setTimeout(()=>{v.reload({replace:!0,only:["purchasedCount"],onSuccess:o=>{var n;_(((n=o==null?void 0:o.props)==null?void 0:n.purchasedCount)||0)}})},500);return()=>clearTimeout(m)},[]);const s=y({initialValues:{first_name:(a==null?void 0:a.first_name)||(a==null?void 0:a.name)||"",last_name:(a==null?void 0:a.last_name)||"",email:(a==null?void 0:a.email)||""},validationSchema:E({first_name:d().min(2,r("Must be at least 2 characters")).max(50,r("Must be 50 characters or less")).required(r("Please enter your first name")),last_name:d().min(2,r("Must be at least 2 characters")).max(50,r("Must be 50 characters or less")),email:d().email(r("Invalid email address")).required(r("Please enter your email"))}),onSubmit:m=>{v.put(route("buyer.profile.update-info"),m,{onSuccess:o=>{var n,f,j,b;if((f=(n=o.props)==null?void 0:n.message)!=null&&f.error){N(r(o.props.message.error),"error");return}(b=(j=o.props)==null?void 0:j.message)!=null&&b.success&&N(r(o.props.message.success),"success"),s.resetForm({values:m})}})}});return c.useEffect(()=>{s.setErrors(u||{})},[u]),e.jsx(S.Pane,{eventKey:"personal-info",children:e.jsx(t,{onSubmit:s.handleSubmit,noValidate:!0,children:e.jsxs(i,{children:[e.jsx(l,{lg:12,className:"mb-3",children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{children:[e.jsx("span",{className:"fw-semibold",children:"Email:"})," ",s.values.email]})})}),e.jsx(l,{lg:12,children:e.jsx("div",{className:"mb-3",children:e.jsxs(t.Group,{as:i,controlId:"first_name",children:[e.jsxs(t.Label,{column:!0,lg:3,className:"fw-semibold",children:[r("First Name"),e.jsx("span",{className:"text-danger",children:"*"})," :"]}),e.jsxs(l,{lg:9,children:[e.jsx(t.Control,{type:"text",className:"form-control",placeholder:r("Enter your first name"),value:s.values.first_name,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:!!(s.touched.first_name&&s.errors.first_name)}),e.jsx(t.Control.Feedback,{type:"invalid",children:((p=s==null?void 0:s.errors)==null?void 0:p.first_name)??""})]})]})})}),e.jsx(l,{lg:12,children:e.jsx("div",{className:"mb-3",children:e.jsxs(t.Group,{as:i,controlId:"last_name",children:[e.jsxs(t.Label,{column:!0,lg:3,className:"fw-semibold",children:[r("Last Name"),":"]}),e.jsxs(l,{lg:9,children:[e.jsx(t.Control,{type:"text",className:"form-control",placeholder:r("Enter your last name"),value:s.values.last_name,onChange:s.handleChange,onBlur:s.handleBlur,isInvalid:!!(s.touched.last_name&&s.errors.last_name)}),e.jsx(t.Control.Feedback,{type:"invalid",children:((x=s==null?void 0:s.errors)==null?void 0:x.last_name)??""})]})]})})}),e.jsx(l,{lg:12,children:e.jsx("div",{className:"mb-3",children:e.jsxs(t.Group,{as:i,children:[e.jsxs(t.Label,{column:!0,lg:3,className:"fw-semibold",children:[r("Registration date"),":"]}),e.jsx(l,{lg:9,children:e.jsx("div",{className:"form-control-plaintext",children:T(a==null?void 0:a.created_at).format("DD/MM/YYYY HH:mm")})})]})})}),e.jsx(l,{lg:12,children:e.jsx("div",{className:"mb-3",children:e.jsxs(t.Group,{as:i,children:[e.jsxs(t.Label,{column:!0,lg:3,className:"fw-semibold",children:[r("Purchased"),":"]}),e.jsx(l,{lg:9,children:e.jsx("div",{className:"form-control-plaintext",children:h==null?r("Loading")+"...":`${h} ${r("products")}`})})]})})}),e.jsx(l,{lg:12,children:e.jsxs("div",{className:"hstack gap-2 justify-content-end",children:[e.jsx(C,{type:"submit",variant:"primary",children:r("Update")}),e.jsx(C,{type:"button",variant:"soft-success",onClick:()=>s.resetForm(),children:r("Cancel")})]})})]})})})}export{se as default};
