import{d as r,j as t,R as F,S as T,e as B}from"./ContextMenuProvider-C6Zbl1jY.js";import D from"./PageHeader-DzEBciB8.js";import A from"./index-DX0mse2V.js";import{c as H,f as L,a as R,u as E}from"./index.esm-DDmU3ThL.js";import{s as j}from"./showToast-fbb08ABK.js";import{Q as I}from"./react-toastify.esm-CuUT_FeT.js";import{ModalDeposit as $}from"./ModalDeposit-DvKLusix.js";import{LayoutContext as q}from"./LayoutContext-Dnch34UA.js";import{u as K}from"./useTranslation-BhZFnGss.js";import{C as O}from"./Container-DuqY1l5C.js";import{C as m}from"./Card-Dc5dOtLU.js";import{F as n}from"./Form-BfHf_XRV.js";import{B as f}from"./Button-Chz4fRXx.js";import"./Row-BBuYYMjV.js";import"./ThemeProvider-pZJi_k1m.js";import"./Col-L5NkX0nX.js";import"./thunk-DnvKV7sw.js";import"./index-BqFwbFnG.js";import"./throttle-CzOjd-at.js";import"./isSymbol-CYvIzdD2.js";import"./reselect-CiXCCDx7.js";import"./Navbar-DpIK0u32.js";import"./scrollspy-Blfv7kXG.js";import"./useEventCallback-D1I9Eqpd.js";import"./NavbarContext-DZluq2RU.js";import"./inherits-B2gPeQio.js";import"./index-DCwKZfII.js";import"./logo-light-D3OEWz0M.js";import"./Dropdown-tZBSSjRE.js";import"./querySelectorAll-D2irIcMG.js";import"./useMergedRefs-B6t_QqDd.js";import"./SSRProvider-reet4nNF.js";import"./useEventCallback-BrpCD40C.js";import"./useIsomorphicEffect-BUQP_9vE.js";import"./useWindow-CLBUEokQ.js";import"./SelectableContext-BttslTPB.js";import"./Button-CsU7cm0L.js";import"./DataKey-DjdvojM5.js";import"./hook-BswMoU2U.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-B4fUID9J.js";import"./Anchor-CeOJDZSP.js";import"./InputGroupContext-BewixxXF.js";import"./Tab-C54GL6tf.js";import"./TabContext-CmmthZNv.js";import"./NoopTransition-Dpcpe6YD.js";import"./TransitionWrapper-CaF58Jrg.js";import"./Fade-DeSGF47Y.js";import"./Nav-D8qxtRE4.js";import"./NavLink-CUaUecm9.js";import"./CardHeaderContext-CzkAZqub.js";import"./ModalLogin-CWjcffeG.js";import"./Modal-872qn2Lf.js";import"./useWillUnmount-DBOrVC9s.js";import"./AbstractModalHeader-C5r8ZRHZ.js";import"./hasClass-pPcchvBp.js";import"./CloseButton-zBsxik1D.js";import"./divWithClassName-BLdvSJyI.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./Collapse-CcuY_AT6.js";import"./sweetalert2.esm.all-5zhdP7Ax.js";const Q="/build/assets/icon-vcb-DvunKd-K.png",Y=()=>{const[l,y]=r.useState("bankTransfer"),[b,p]=r.useState(null),[u,h]=r.useState(null),[v,x]=r.useState(!1),[g,S]=r.useState(null),c=r.useContext(q),N=c==null?void 0:c.pingDeposit,d=r.useRef([]),{t:o}=K(),k=async()=>{C();const e=setInterval(async()=>{await N()&&clearInterval(e)},3e3);d.current.push(e)},C=()=>{d.current.forEach(e=>clearInterval(e)),d.current=[]},w=e=>{y(e),s.setFieldValue("paymentMethod",e)},M=e=>{p(e),h(e),s.setFieldValue("amount",e)},V=e=>{h(e),p(null),s.setFieldValue("amount",e)},P=r.useMemo(()=>H({paymentMethod:R().required(o("Please select payment method")),amount:L().min(1e4,o("Amount must be at least 10000")).required(o("Please enter amount"))}),[o]),s=E({initialValues:{paymentMethod:"bankTransfer",amount:0},validationSchema:P,onSubmit:async e=>{const i=route("buyer.deposit.checkout");await B.post(i,e).then(a=>{a.data.status==="success"?(x(!0),S(a.data.data)):j(o(a.data.message),"error")}).catch(a=>{j(o(a.response.data.message),"error")})}});return t.jsxs(F.Fragment,{children:[t.jsx($,{show:v,onHide:()=>x(!1),data:g}),t.jsx(T,{title:"Deposit"}),t.jsx(I,{}),t.jsx(D,{title:"Hỗ Trợ và Chính Sách Bảo Hành"}),t.jsx(O,{className:"mt-4",children:t.jsx(m,{className:"shadow-sm p-2",style:{minHeight:"50vh"},children:t.jsx(m.Body,{children:t.jsx(n,{onSubmit:s.handleSubmit,noValidate:!0,children:t.jsx("div",{className:"deposit-section",children:t.jsxs("div",{className:"row",children:[t.jsxs("div",{className:"col-md-6",children:[t.jsxs("h6",{children:["1. ",o("Select your subscription method")]}),t.jsx("div",{className:"payment-methods",children:t.jsx(m,{children:t.jsx(m.Body,{children:t.jsx(n.Check,{type:"radio",id:"bankTransfer",name:"paymentMethod",label:t.jsxs("div",{className:"d-flex align-items-center",children:[t.jsx("span",{className:"d-block justify-content-center",children:o("You cab transfer money directly via Vietcombank")}),t.jsx("img",{src:Q,alt:"Bank Transfer",className:"ms-3",style:{height:"30px"}})]}),checked:l==="bankTransfer",onChange:()=>w("bankTransfer"),className:"mb-3"})})})})]}),t.jsxs("div",{className:"col-md-6",children:[t.jsxs("h6",{children:["2. ",o("Deposit amount")]}),t.jsx("div",{className:"amount-options mb-3",children:t.jsx("div",{className:"btn-group w-100",children:[1e4,2e4,5e4,1e5,5e5].map(e=>t.jsx(f,{variant:b===e?"primary":"outline-secondary",onClick:()=>M(e),children:e.toLocaleString("vi-VN")},e))})}),t.jsxs("div",{className:"mb-3",children:[t.jsxs(n.Label,{children:[o("Or enter custom amount"),":"]}),t.jsx(n.Control,{name:"amount",type:"text",placeholder:o("Enter amount"),value:u?u.toLocaleString("vi-VN"):"",onChange:e=>{const i=e.target.value.replace(/\./g,""),a=i?Number(i):null;V(a),s.setFieldValue("amount",a)},onBlur:s.handleBlur,className:`form-control ${s.touched.amount&&s.errors.amount?"is-invalid":""}`}),t.jsx(n.Control.Feedback,{type:"invalid",children:o(s.errors.amount||"")})]}),t.jsx(f,{variant:"primary",className:"w-100",type:"submit",disabled:s.isSubmitting,onClick:k,children:s.isSubmitting?o("Processing..."):o("Pay now")})]})]})})})})})})]})};Y.layout=l=>t.jsx(A,{children:l});export{Y as default};
