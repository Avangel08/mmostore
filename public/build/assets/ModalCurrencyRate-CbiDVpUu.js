import{X as y,d as i,A as k,j as r}from"./ContextMenuProvider-BnbZ3Xw_.js";import{c as D,a as S,d as B,u as I}from"./index.esm-bbsQyNAz.js";import{N as A}from"./react-number-format.es-BV0Nfk3q.js";import{s as v}from"./showToast-CDGTjd8l.js";import{F as L,_ as R,v as T}from"./default-DrfVhWEd.js";import{h as j}from"./moment-C5S46NFB.js";import{u as q}from"./useTranslation-CtwHyjpC.js";import{M as p}from"./Modal-mwm3tf-U.js";import{F as l}from"./Form-kohAgaPo.js";import{B as C}from"./Button-BRcUTJGP.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-D_S65KpP.js";import"./react-toastify.esm-Dj3bmGVf.js";import"./index-DJrr_1Uz.js";import"./ThemeProvider-C0xt9VP8.js";import"./useMergedRefs-0e-0eNkH.js";import"./useEventCallback-CWLYZk1t.js";import"./useWillUnmount-JMQ9EYbt.js";import"./TransitionWrapper-DdJIchS_.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./setPrototypeOf-DgZC2w_0.js";import"./AbstractModalHeader-DeFu7Xk5.js";import"./useWindow-ByxVeiaK.js";import"./querySelectorAll-6mKGZXEM.js";import"./useEventCallback-BuAGpOO_.js";import"./hasClass-D5mdPDLg.js";import"./NoopTransition-Ck7A0kGI.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-Be0iGRvt.js";import"./Fade-DiSce4YX.js";import"./divWithClassName-Egl5q-Z9.js";import"./Col-DMyGedr-.js";import"./Button-C_zChQbi.js";const de=({show:h,onHide:f,dataEdit:e,dataOptions:n})=>{const{t:s,i18n:N}=q(),g=y().props.errors,Y=i.useRef(null),c=!!e,_=()=>{switch(N.language){case"vi":return T.Vietnamese;default:return R.english}},u=1e3,x=99999999999e-2,M=i.useMemo(()=>D({to_vnd:B().required(s("Please enter this field")).min(u,s("This field must be greater than or equal to {{min}}",{min:u})).max(x,s("This field must be less than or equal to {{max}}",{max:x})),date:S().required(s("Please select this field")),status:S().required(s("Please select this field"))}),[s]),o=I({initialValues:{id:(e==null?void 0:e.id)||"",to_vnd:(e==null?void 0:e.to_vnd)||u,date:(e==null?void 0:e.date)||j().format("YYYY-MM-DD"),status:e!=null&&e.status?String(e.status):"ACTIVE"},validationSchema:M,enableReinitialize:!0,onSubmit:t=>{const a=c?route("admin.currency-rates.update",{id:e.id}):route("admin.currency-rates.store");k[c?"put":"post"](a,t,{onSuccess:m=>{var d,b,F,V;if((b=(d=m.props)==null?void 0:d.message)!=null&&b.error){v(s(m.props.message.error),"error");return}o.resetForm(),f(),(V=(F=m.props)==null?void 0:F.message)!=null&&V.success&&v(s(m.props.message.success),"success")},onError:m=>{v(s("An error occurred, please try again later"),"error")}})}});return i.useEffect(()=>{h?o.setValues({id:(e==null?void 0:e.id)||"",to_vnd:(e==null?void 0:e.to_vnd)||u,date:(e==null?void 0:e.date)||j().format("YYYY-MM-DD"),status:e!=null&&e.status?String(e.status):"ACTIVE"}):o.resetForm()},[h,e]),i.useEffect(()=>{o.setErrors(g||{})},[g]),r.jsx(p,{id:"myModal",backdrop:"static",show:h,onHide:()=>{o.resetForm(),f()},centered:!0,children:r.jsxs(l,{onSubmit:o.handleSubmit,noValidate:!0,children:[r.jsx(p.Header,{closeButton:!0,children:r.jsx("h5",{children:s(c?"Update currency rate":"Create currency rate")})}),r.jsxs(p.Body,{children:[r.jsxs(l.Group,{className:"mb-3",controlId:"to_vnd",children:[r.jsxs(l.Label,{children:[s("VND Rate"),r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(A,{customInput:l.Control,decimalSeparator:",",thousandSeparator:".",decimalScale:2,placeholder:s("Enter VND Rate"),fixedDecimalScale:!1,allowNegative:!1,onValueChange:t=>{o.setFieldValue("to_vnd",t.floatValue||"")},isAllowed:t=>{const{floatValue:a}=t;return a===void 0||a<=x},onBlur:o.handleBlur,value:o.values.to_vnd,isInvalid:!!(o.touched.to_vnd&&o.errors.to_vnd)}),r.jsx(l.Control.Feedback,{type:"invalid",children:s(o.errors.to_vnd)})]}),r.jsxs(l.Group,{className:"mb-3",controlId:"date",children:[r.jsxs(l.Label,{children:[s("Effective from date"),r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(L,{name:"date",ref:Y,className:"form-control",placeholder:s("Select date"),options:{dateFormat:"Y-m-d",locale:_()},value:o.values.date,onChange:t=>{o.setFieldValue("date",t[0]?j(t[0]).format("YYYY-MM-DD"):"")}}),r.jsx("small",{className:"text-danger",children:s(o.errors.date)})]}),r.jsxs(l.Group,{className:"mb-3",controlId:"name",children:[r.jsxs(l.Label,{children:[s("Status")," ",r.jsx("span",{className:"text-danger",children:"*"})]}),r.jsx(l.Select,{name:"status",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.status,isInvalid:!!(o.touched.status&&o.errors.status),children:(n==null?void 0:n.statusList)&&Object.keys(n.statusList).map(t=>r.jsx("option",{value:t,children:s(n==null?void 0:n.statusList[t])},t))}),r.jsx(l.Control.Feedback,{type:"invalid",children:s(o.errors.status)})]})]}),r.jsxs(p.Footer,{children:[r.jsx(C,{variant:"light",onClick:()=>{o.resetForm(),f()},children:s("Close")}),r.jsx(C,{variant:"primary",type:"submit",children:s(c?"Update":"Add new")})]})]})})};export{de as ModalCurrencyRate};
