import{d as o,j as a,A as _}from"./ContextMenuProvider-BhVN3MI2.js";import{F as $,_ as B,v as H}from"./default-IqKp8mNI.js";import{S as F}from"./react-select.esm-kG1LW6sX.js";import{h as N}from"./moment-C5S46NFB.js";import{u as Q}from"./useQueryParam-CLHEKvAC.js";import{u as q}from"./useTranslation-ZbZFIHja.js";import{R as G}from"./Row-DTCryV-T.js";import{C as u}from"./Col-CDTbDU3W.js";import{F as m}from"./Form-B_1_SP-R.js";import{B as y}from"./Button-CT1W-dlW.js";import"./index-CMi1q9xw.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./extends-CF3RwP-h.js";import"./setPrototypeOf-DgZC2w_0.js";import"./inherits-B2gPeQio.js";import"./hoist-non-react-statics.cjs-3lIPCjJv.js";import"./ThemeProvider-CUiVOj3n.js";import"./Button-ItoOpMhW.js";const me=({onFilter:D,additionalButtons:b})=>{const{t:s,i18n:E}=q(),g=o.useRef(null),[f,p]=o.useState(!1),e=Q(),C=(e==null?void 0:e.perPage)??"10",[P,k]=o.useState([]),I=()=>({name:(e==null?void 0:e.name)??"",category:(e==null?void 0:e.category)??"",createdDateStart:(e==null?void 0:e.createdDateStart)??"",createdDateEnd:(e==null?void 0:e.createdDateEnd)??"",status:(e==null?void 0:e.status)??""}),[i,x]=o.useState(I()),d=P.map(t=>({value:t==null?void 0:t.id,label:t==null?void 0:t.name}));d.unshift({value:"",label:s("All")});const h=[{value:"",label:s("All")},{value:"ACTIVE",label:s("Active")},{value:"INACTIVE",label:s("Inactive")}],[Y,S]=o.useState(d[0]),[A,j]=o.useState(h[0]);o.useEffect(()=>{const t=e==null?void 0:e.category;if(t!==null){const n=d.find(l=>{var c;return((c=l==null?void 0:l.value)==null?void 0:c.toString())===t});n&&S(n)}const r=e==null?void 0:e.status;if(r!==null){const n=h.find(l=>{var c;return((c=l==null?void 0:l.value)==null?void 0:c.toString())===r});n&&j(n)}},[]);const R=()=>{switch(E.language){case"vi":return H.Vietnamese;default:return B.english}},v=(t,r)=>{x(n=>({...n,[t]:r}))},w=t=>{const[r,n]=t;x(l=>({...l,createdDateStart:r?N(r).format("YYYY-MM-DD"):"",createdDateEnd:n?N(n).format("YYYY-MM-DD"):""}))},M=t=>{S(t),v("category",t.value)},V=t=>{j(t),v("status",t.value)},L=()=>{D(1,Number(C),i)},T=()=>{const t=(e==null?void 0:e.name)||"",r=(e==null?void 0:e.category)||"",n=(e==null?void 0:e.createdDateStart)||"",l=(e==null?void 0:e.createdDateEnd)||"",c=(e==null?void 0:e.status)||"";return t!==null&&t!==""||r!==null&&r!==""||n!==null&&n!==""||l!==null&&l!==""||c!==null&&c!==""},O=()=>{const t={name:"",category:"",createdDateStart:"",createdDateEnd:"",status:""};x(t),S(d[0]),j(h[0]),g.current&&g.current.flatpickr&&g.current.flatpickr.clear(),D(1,Number(C),t)},z=()=>{p(!f)};return a.jsxs("div",{className:"filter-container mb-3",children:[f&&a.jsx("div",{className:"p-3 border rounded bg-light mb-3",children:a.jsxs(G,{className:"g-3",children:[a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-name",children:s("Product Name")}),a.jsx(m.Control,{type:"text",id:"filter-name",placeholder:s("Enter product name"),value:i.name,onChange:t=>v("name",t.target.value)})]}),a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-category",children:s("Category")}),a.jsx(F,{id:"filter-category",value:Y,onChange:M,options:d,onMenuOpen:()=>{_.reload({only:["categories"],onSuccess:t=>{var n;const r=((n=t==null?void 0:t.props)==null?void 0:n.categories)||[];k(r)}})},classNamePrefix:"select",isSearchable:!0,placeholder:s("Select category"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-date",children:s("Created Date Range")}),a.jsx($,{ref:g,className:"form-control",id:"filter-date",placeholder:s("Select date range"),options:{mode:"range",dateFormat:"d/m/Y",locale:R()},value:i.createdDateStart&&i.createdDateEnd?[new Date(i.createdDateStart),new Date(i.createdDateEnd)]:i.createdDateStart?[new Date(i.createdDateStart)]:[],onChange:w})]}),a.jsxs(u,{md:3,children:[a.jsx(m.Label,{htmlFor:"filter-status",children:s("Status")}),a.jsx(F,{id:"filter-status",value:A,onChange:V,options:h,classNamePrefix:"select",isSearchable:!0,placeholder:s("Select status"),menuPortalTarget:document.body,styles:{menuPortal:t=>({...t,zIndex:9999})}})]}),a.jsx(u,{md:12,children:a.jsxs(y,{variant:"primary",onClick:L,children:[a.jsx("i",{className:"ri-search-line align-bottom me-1"}),s("Filter")]})})]})}),a.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsxs(y,{variant:"outline-primary",onClick:z,className:"d-flex align-items-center",children:[a.jsx("i",{className:`ri-filter-${f?"off":"2"}-line align-bottom me-2`}),s(f?"Hide Filters":"Show Filters")]}),T()&&a.jsxs(y,{variant:"outline-danger",onClick:O,className:"d-flex align-items-center",children:[a.jsx("i",{className:"ri-refresh-line align-bottom me-1"}),s("Reset")]})]}),b&&a.jsx("div",{className:"d-flex align-items-center gap-2",children:b})]})]})};export{me as default};
