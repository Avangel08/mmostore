<<<<<<<< HEAD:public/build/assets/ModalDeposit-BNleq3mx.js
import{X as k,d as c,A as D,j as e}from"./ContextMenuProvider-BnbZ3Xw_.js";import{c as T,a as l,d as M,u as G}from"./index.esm-bbsQyNAz.js";import{s as f}from"./showToast-CDGTjd8l.js";import{u as L}from"./useTranslation-CtwHyjpC.js";import{M as m}from"./Modal-mwm3tf-U.js";import{F as o}from"./Form-kohAgaPo.js";import{B as y}from"./Button-BRcUTJGP.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-D_S65KpP.js";import"./react-toastify.esm-Dj3bmGVf.js";import"./ThemeProvider-C0xt9VP8.js";import"./useMergedRefs-0e-0eNkH.js";import"./useEventCallback-CWLYZk1t.js";import"./useWillUnmount-JMQ9EYbt.js";import"./TransitionWrapper-DdJIchS_.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./setPrototypeOf-DgZC2w_0.js";import"./AbstractModalHeader-DeFu7Xk5.js";import"./useWindow-ByxVeiaK.js";import"./querySelectorAll-6mKGZXEM.js";import"./useEventCallback-BuAGpOO_.js";import"./hasClass-D5mdPDLg.js";import"./NoopTransition-Ck7A0kGI.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-Be0iGRvt.js";import"./index-DJrr_1Uz.js";import"./Fade-DiSce4YX.js";import"./divWithClassName-Egl5q-Z9.js";import"./Col-DMyGedr-.js";import"./Button-C_zChQbi.js";const de=({show:i,onHide:d,dataEdit:u,paymentMethods:B,listPaymentType:F})=>{var _;const{t:n}=L(),a=k().props.errors,[j,g]=c.useState(""),v=()=>{const r=new Date,p=r.getFullYear(),h=String(r.getMonth()+1).padStart(2,"0"),x=String(r.getDate()).padStart(2,"0"),s=Math.random().toString(36).substring(2,8).toUpperCase();return`M${p}${h}${x}${s}`};c.useEffect(()=>{i&&g(v())},[i]);const I=c.useMemo(()=>T({payment_method_id:l().required(n("Please select payment method")),transaction_type:l().required(n("Please select transaction type")),currency:l().required(n("Please select currency")),amount:M().min(1,n("Minimum amount is 1")).required(n("Please enter amount")),note:l().max(500,n("Note must be less than 500 characters"))}),[n]),t=G({initialValues:{payment_method_id:"",transaction_type:"",currency:"VND",amount:"",note:""},validationSchema:I,onSubmit:r=>{const p=route("seller.customer-manager.deposit"),h="post",x={...r,transaction_code:j,customer_id:u==null?void 0:u.id};D[h](p,x,{onSuccess:s=>{var b,C,N,S;if((C=(b=s.props)==null?void 0:b.message)!=null&&C.error){f(n(s.props.message.error),"error");return}t.resetForm(),d(),(S=(N=s.props)==null?void 0:N.message)!=null&&S.success&&f(n(s.props.message.success),"success")}})}});return c.useEffect(()=>{i?t.setValues({payment_method_id:"",transaction_type:"",currency:"VND",amount:"",note:""}):t.resetForm()},[i]),e.jsx(m,{id:"myModal",backdrop:"static",show:i,onHide:()=>{t.resetForm(),d()},centered:!0,children:e.jsxs(o,{onSubmit:t.handleSubmit,noValidate:!0,children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx("h5",{children:n("Update balance")})}),e.jsxs(m.Body,{children:[e.jsxs(o.Group,{className:"mb-3",controlId:"paymentMethod",children:[e.jsxs(o.Label,{children:[n("Payment Method")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(o.Select,{name:"payment_method_id",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.payment_method_id,isInvalid:!!(t.touched.payment_method_id&&t.errors.payment_method_id||a!=null&&a.payment_method_id),children:[e.jsx("option",{value:"",children:n("Select payment method")}),B.map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",F[r.type],")"]},r.id))]}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.payment_method_id||(a==null?void 0:a.payment_method_id))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"transactionType",children:[e.jsxs(o.Label,{children:[n("Transaction Type")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(o.Select,{name:"transaction_type",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.transaction_type,isInvalid:!!(t.touched.transaction_type&&t.errors.transaction_type||a!=null&&a.transaction_type),children:[e.jsx("option",{value:"",children:n("Select transaction type")}),e.jsx("option",{value:"1",children:n("Add money to account")}),e.jsx("option",{value:"3",children:n("Subtract money from account")})]}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.transaction_type||(a==null?void 0:a.transaction_type))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"currency",children:[e.jsxs(o.Label,{children:[n("Currency")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(o.Select,{name:"currency",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.currency,isInvalid:!!(t.touched.currency&&t.errors.currency||a!=null&&a.currency),children:[e.jsx("option",{value:"VND",children:"VND"}),e.jsx("option",{value:"USD",children:"USD"})]}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.currency||(a==null?void 0:a.currency))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"amount",children:[e.jsxs(o.Label,{children:[n("Amount")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(o.Control,{name:"amount",type:"number",placeholder:n("Enter amount"),min:"1",step:"1",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.amount,isInvalid:!!(t.touched.amount&&t.errors.amount||a!=null&&a.amount)}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.amount||(a==null?void 0:a.amount))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"transactionCode",children:[e.jsxs(o.Label,{children:[n("Transaction Code")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(o.Control,{type:"text",value:j,readOnly:!0,className:"bg-light"}),e.jsx(y,{variant:"outline-secondary",type:"button",onClick:()=>g(v()),title:n("Generate new transaction code"),children:e.jsx("i",{className:"ri-refresh-line"})})]})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"note",children:[e.jsx(o.Label,{children:n("Note")}),e.jsx(o.Control,{name:"note",as:"textarea",rows:3,placeholder:n("Enter note (optional)"),maxLength:500,onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.note,isInvalid:!!(t.touched.note&&t.errors.note||a!=null&&a.note)}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.note||(a==null?void 0:a.note))}),e.jsxs(o.Text,{className:"text-muted",children:[((_=t.values.note)==null?void 0:_.length)||0,"/500 ",n("Characters")]})]})]}),e.jsxs(m.Footer,{children:[e.jsx(y,{variant:"light",onClick:()=>{t.resetForm(),d()},children:n("Close")}),e.jsx(y,{variant:"primary",type:"submit",children:n("Submit")})]})]})})};export{de as ModalDeposit};
========
import{X as k,d as c,A as D,j as e}from"./ContextMenuProvider-BhVN3MI2.js";import{c as T,a as l,f as M,u as G}from"./index.esm-C_ZlIYoE.js";import{s as S}from"./showToast-BKDwzp8a.js";import{u as L}from"./useTranslation-ZbZFIHja.js";import{M as m}from"./Modal-C594Uytt.js";import{F as o}from"./Form-B_1_SP-R.js";import{B as y}from"./Button-CT1W-dlW.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-3lIPCjJv.js";import"./react-toastify.esm-Bzp-JuTX.js";import"./ThemeProvider-CUiVOj3n.js";import"./useMergedRefs-BdX62CzH.js";import"./useEventCallback-DN7Xb1FR.js";import"./useWillUnmount-RaeYL0I0.js";import"./TransitionWrapper-CHWC6Aev.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./setPrototypeOf-DgZC2w_0.js";import"./AbstractModalHeader-ONgXPvo5.js";import"./useWindow-D06ww4p5.js";import"./querySelectorAll-BZjzdW4C.js";import"./useEventCallback-kYw4fXYA.js";import"./hasClass-Du0ceSUq.js";import"./NoopTransition-Ba3l4ZU6.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-D0xq5bFg.js";import"./index-CMi1q9xw.js";import"./Fade-DZUndS-E.js";import"./divWithClassName-DOGM4Upq.js";import"./Col-CDTbDU3W.js";import"./Button-ItoOpMhW.js";const de=({show:i,onHide:d,dataEdit:u,paymentMethods:B,listPaymentType:F})=>{var _;const{t:n}=L(),a=k().props.errors,[j,g]=c.useState(""),v=()=>{const r=new Date,p=r.getFullYear(),h=String(r.getMonth()+1).padStart(2,"0"),x=String(r.getDate()).padStart(2,"0"),s=Math.random().toString(36).substring(2,8).toUpperCase();return`M${p}${h}${x}${s}`};c.useEffect(()=>{i&&g(v())},[i]);const I=c.useMemo(()=>T({payment_method_id:l().required(n("Please select payment method")),transaction_type:l().required(n("Please select transaction type")),currency:l().required(n("Please select currency")),amount:M().min(1,n("Minimum amount is 1")).required(n("Please enter amount")),note:l().max(500,n("Note must be less than 500 characters"))}),[n]),t=G({initialValues:{payment_method_id:"",transaction_type:"",currency:"VND",amount:"",note:""},validationSchema:I,onSubmit:r=>{const p=route("seller.customer-manager.deposit"),h="post",x={...r,transaction_code:j,customer_id:u==null?void 0:u.id};D[h](p,x,{onSuccess:s=>{var b,C,N,f;if((C=(b=s.props)==null?void 0:b.message)!=null&&C.error){S(n(s.props.message.error),"error");return}t.resetForm(),d(),(f=(N=s.props)==null?void 0:N.message)!=null&&f.success&&S(n(s.props.message.success),"success")}})}});return c.useEffect(()=>{i?t.setValues({payment_method_id:"",transaction_type:"",currency:"VND",amount:"",note:""}):t.resetForm()},[i]),e.jsx(m,{id:"myModal",backdrop:"static",show:i,onHide:()=>{t.resetForm(),d()},centered:!0,children:e.jsxs(o,{onSubmit:t.handleSubmit,noValidate:!0,children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx("h5",{children:n("Update balance")})}),e.jsxs(m.Body,{children:[e.jsxs(o.Group,{className:"mb-3",controlId:"paymentMethod",children:[e.jsxs(o.Label,{children:[n("Payment Method")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(o.Select,{name:"payment_method_id",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.payment_method_id,isInvalid:!!(t.touched.payment_method_id&&t.errors.payment_method_id||a!=null&&a.payment_method_id),children:[e.jsx("option",{value:"",children:n("Select payment method")}),B.map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",F[r.type],")"]},r.id))]}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.payment_method_id||(a==null?void 0:a.payment_method_id))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"transactionType",children:[e.jsxs(o.Label,{children:[n("Transaction Type")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(o.Select,{name:"transaction_type",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.transaction_type,isInvalid:!!(t.touched.transaction_type&&t.errors.transaction_type||a!=null&&a.transaction_type),children:[e.jsx("option",{value:"",children:n("Select transaction type")}),e.jsx("option",{value:"1",children:n("Add money to account")}),e.jsx("option",{value:"3",children:n("Subtract money from account")})]}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.transaction_type||(a==null?void 0:a.transaction_type))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"currency",children:[e.jsxs(o.Label,{children:[n("Currency")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(o.Select,{name:"currency",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.currency,isInvalid:!!(t.touched.currency&&t.errors.currency||a!=null&&a.currency),children:[e.jsx("option",{value:"VND",children:"VND"}),e.jsx("option",{value:"USD",children:"USD"})]}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.currency||(a==null?void 0:a.currency))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"amount",children:[e.jsxs(o.Label,{children:[n("Amount")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(o.Control,{name:"amount",type:"number",placeholder:n("Enter amount"),min:"1",step:"1",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.amount,isInvalid:!!(t.touched.amount&&t.errors.amount||a!=null&&a.amount)}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.amount||(a==null?void 0:a.amount))})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"transactionCode",children:[e.jsxs(o.Label,{children:[n("Transaction Code")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(o.Control,{type:"text",value:j,readOnly:!0,className:"bg-light"}),e.jsx(y,{variant:"outline-secondary",type:"button",onClick:()=>g(v()),title:n("Generate new transaction code"),children:e.jsx("i",{className:"ri-refresh-line"})})]})]}),e.jsxs(o.Group,{className:"mb-3",controlId:"note",children:[e.jsx(o.Label,{children:n("Note")}),e.jsx(o.Control,{name:"note",as:"textarea",rows:3,placeholder:n("Enter note (optional)"),maxLength:500,onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.note,isInvalid:!!(t.touched.note&&t.errors.note||a!=null&&a.note)}),e.jsx(o.Control.Feedback,{type:"invalid",children:n(t.errors.note||(a==null?void 0:a.note))}),e.jsxs(o.Text,{className:"text-muted",children:[((_=t.values.note)==null?void 0:_.length)||0,"/500 ",n("Characters")]})]})]}),e.jsxs(m.Footer,{children:[e.jsx(y,{variant:"light",onClick:()=>{t.resetForm(),d()},children:n("Close")}),e.jsx(y,{variant:"primary",type:"submit",children:n("Submit")})]})]})})};export{de as ModalDeposit};
>>>>>>>> main:public/build/assets/ModalDeposit-nyGfFeqO.js
