import{X as B,d as c,A,t as r,j as e,R as $,S as P,x as v}from"./ContextMenuProvider-DoI9LuTu.js";import{G as z}from"./GuestLayout-YFUlxgu5.js";import{l as D}from"./logo-light-D3OEWz0M.js";import{u as M,c as q,a as m,b as V}from"./index.esm-yjK6ua4W.js";import{C as L}from"./Container-AKEw1NBh.js";import{R as j}from"./Row-DaX0pFtU.js";import{C}from"./Col-BERnSmBs.js";import{C as w}from"./Card-BP66js0B.js";import{F as t}from"./Form-C6Oq7frR.js";import{I as T}from"./InputGroup-CDI3KljJ.js";import{B as N}from"./Button-CdshqBqI.js";import"./ApplicationLogo-FnpUeiwx.js";import"./reselect-CiXCCDx7.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-BsRiVy2U.js";import"./ThemeProvider-CQKb4rSK.js";import"./divWithClassName-Ct-4CK0x.js";import"./index-B7rcZTdA.js";import"./InputGroupContext-CIB_KQgH.js";import"./Button-lElTeqs9.js";const U=({countryCode:d})=>{const i=l=>`https://flagcdn.com/20x15/${{"+84":"vn","+1":"us","+44":"gb","+86":"cn","+81":"jp","+82":"kr","+65":"sg","+66":"th","+60":"my","+63":"ph","+62":"id","+91":"in","+61":"au","+64":"nz","+33":"fr","+49":"de","+39":"it","+34":"es","+7":"ru","+55":"br","+52":"mx","+54":"ar","+27":"za","+20":"eg","+971":"ae","+966":"sa","+90":"tr","+98":"ir","+92":"pk","+880":"bd"}[l]||"un"}.png`;return e.jsx("img",{src:i(d),alt:`Flag of ${d}`,style:{width:"20px",height:"15px",borderRadius:"2px",marginRight:"8px",display:"inline-block",verticalAlign:"middle",border:"1px solid #ddd"},onError:l=>{const h=l.target;h.style.display="none"}})},_=[{code:"+84",country:"Vietnam",isoCode:"VN"},{code:"+1",country:"United States",isoCode:"US"},{code:"+44",country:"United Kingdom",isoCode:"GB"},{code:"+86",country:"China",isoCode:"CN"},{code:"+81",country:"Japan",isoCode:"JP"},{code:"+82",country:"South Korea",isoCode:"KR"},{code:"+65",country:"Singapore",isoCode:"SG"},{code:"+66",country:"Thailand",isoCode:"TH"},{code:"+60",country:"Malaysia",isoCode:"MY"},{code:"+63",country:"Philippines",isoCode:"PH"},{code:"+62",country:"Indonesia",isoCode:"ID"},{code:"+91",country:"India",isoCode:"IN"},{code:"+61",country:"Australia",isoCode:"AU"},{code:"+64",country:"New Zealand",isoCode:"NZ"},{code:"+33",country:"France",isoCode:"FR"},{code:"+49",country:"Germany",isoCode:"DE"},{code:"+39",country:"Italy",isoCode:"IT"},{code:"+34",country:"Spain",isoCode:"ES"},{code:"+7",country:"Russia",isoCode:"RU"},{code:"+55",country:"Brazil",isoCode:"BR"},{code:"+52",country:"Mexico",isoCode:"MX"},{code:"+54",country:"Argentina",isoCode:"AR"},{code:"+27",country:"South Africa",isoCode:"ZA"},{code:"+20",country:"Egypt",isoCode:"EG"},{code:"+971",country:"UAE",isoCode:"AE"},{code:"+966",country:"Saudi Arabia",isoCode:"SA"},{code:"+90",country:"Turkey",isoCode:"TR"},{code:"+98",country:"Iran",isoCode:"IR"},{code:"+92",country:"Pakistan",isoCode:"PK"},{code:"+880",country:"Bangladesh",isoCode:"BD"}];function ce(){const{props:d}=B(),i=d==null?void 0:d.domainSuffix,[l,h]=c.useState(!1),[y,S]=c.useState(!1),[b,k]=c.useState(null),[x,f]=c.useState(!1),[u,F]=c.useState("+84"),[g,I]=c.useState(!1),E=s=>{if(!s||s.trim()==="")return"";let p=(R=>R.normalize("NFD").replace(/[\u0300-\u036f]/g,""))(s).toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,12);const n=Math.floor(100+Math.random()*900);return p+n},o=M({enableReinitialize:!0,initialValues:{email:"",store_name:"",domain_store:"",phone:"",password:"",confirm_password:""},validationSchema:q({email:m().email(r("Invalid email")).matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,r("Invalid email")).required(r("Email is required")),store_name:m().min(3,r("Store name must be at least 3 characters")).max(20,r("Store name must be at most 20 characters")).required(r("Store name is required")),domain_store:m().transform(s=>{if(!s)return s;let a=s.replace(new RegExp(`\\.?${i.replace(/\./g,"\\.")}$`,"i"),"");return a=a.replace(/^\.+/,""),a}).min(3,r("Domain store must be at least 3 characters")).max(15,r("Domain store must be at most 15 characters")).required(r("Domain store is required")),phone:m().matches(/^[0-9\s\-\+\(\)]+$/,r("Phone number contains invalid characters")).min(8,r("Phone must be at least 8 characters")).max(15,r("Phone must be at most 15 characters")).required(r("Phone is required")),password:m().min(8,r("Password must be at least 8 characters")).required(r("Password is required")),confirm_password:m().oneOf([V("password")],r("Passwords must match")).required(r("Password is required"))}),onSubmit:s=>{const a=_.find(n=>n.code===u),p={...s,domain_store:s.domain_store.replace(new RegExp(`\\.?${i.replace(/\./g,"\\.")}$`,"i"),"").replace(/^\.+/,""),country_code:u,country:(a==null?void 0:a.isoCode)||"VN",phone_number:s.phone,full_phone:`${u}${s.phone}`};f(!0),A.post(route("home.register.post"),p,{preserveScroll:!0,onSuccess:()=>{k(null),f(!1)},onError:n=>{o.setErrors(n),Array.isArray(n==null?void 0:n.register)?n.register[0]:n==null||n.register,f(!1)}})}});return e.jsxs($.Fragment,{children:[e.jsx("style",{children:`
                    .country-code-select option {
                        font-size: 14px !important;
                        font-weight: 500 !important;
                        padding: 8px 12px !important;
                    }
                    .country-code-select {
                        background-image: none !important;
                    }
                    .country-code-select:focus {
                        border-color: #86b7fe !important;
                        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important;
                    }
                    .country-code-select option:first-child {
                        background-color: #f8f9fa;
                    }
                `}),e.jsxs(z,{children:[e.jsx(P,{title:r("Register")}),e.jsx("div",{className:"auth-page-content mt-lg-5",children:e.jsxs(L,{children:[e.jsx(j,{children:e.jsx(C,{lg:12,children:e.jsx("div",{className:"text-center mt-sm-5 mb-4 text-white-50",children:e.jsx("div",{children:e.jsx(v,{href:"/",className:"d-inline-block auth-logo",children:e.jsx("img",{src:D,alt:"",height:"20"})})})})})}),e.jsx(j,{className:"justify-content-center",children:e.jsxs(C,{md:9,lg:7,xl:6,children:[e.jsx(w,{className:"mt-4",children:e.jsxs(w.Body,{children:[e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("h5",{className:"text-primary",children:r("Create New Account")}),e.jsx("p",{className:"text-muted",children:r("Get your free MMO Store account now")})]}),e.jsxs("div",{className:"p-2 mt-4",children:[b&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:b}),e.jsxs(t,{onSubmit:o.handleSubmit,children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs(t.Label,{className:"form-label",htmlFor:"user-email",children:["Email ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"position-relative auth-email-inputgroup",children:[e.jsx(t.Control,{type:"email",className:"form-control pe-5 user-email-input",placeholder:r("Enter your email"),id:"user-email",name:"email",value:o.values.email,onBlur:o.handleBlur,onChange:o.handleChange,isInvalid:!!(o.errors.email&&o.touched.email),style:{borderColor:o.errors.email&&o.touched.email?"#ced4da":void 0,backgroundImage:o.errors.email&&o.touched.email?"none":void 0}}),o.errors.email&&o.touched.email?e.jsx(t.Control.Feedback,{type:"invalid",style:{display:"block"},children:o.errors.email}):null]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(t.Label,{className:"form-label",htmlFor:"phone-number",children:[r("Phone")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs(T,{className:"position-relative auth-phone-inputgroup",children:[e.jsx("div",{className:"d-flex align-items-center rounded-start",style:{padding:"5px 5px"},children:e.jsx(U,{countryCode:u})}),e.jsx(t.Select,{value:u,onChange:s=>F(s.target.value),className:"country-code-select",style:{borderRadius:"var(--vz-border-radius) 0 0 var(--vz-border-radius)"},children:_.map(s=>e.jsxs("option",{value:s.code,children:[s.country," (",s.code,")"]},s.code))}),e.jsx(t.Control,{type:"tel",className:"form-control phone-input",placeholder:r("Enter your phone number"),id:"phone-number",name:"phone",value:o.values.phone,onBlur:o.handleBlur,onChange:o.handleChange,isInvalid:!!(o.errors.phone&&o.touched.phone),style:{borderColor:o.errors.phone&&o.touched.phone?"#ced4da":void 0,backgroundImage:o.errors.phone&&o.touched.phone?"none":void 0,minWidth:"260px"}}),o.errors.phone&&o.touched.phone?e.jsx(t.Control.Feedback,{type:"invalid",style:{display:"block"},children:o.errors.phone}):null]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(t.Label,{className:"form-label",htmlFor:"store-name",children:[r("Store name")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"position-relative auth-store-name-inputgroup",children:[e.jsx(t.Control,{type:"text",className:"form-control pe-5 store-name-input",placeholder:r("Enter your store name"),id:"store-name",name:"store_name",value:o.values.store_name,onBlur:o.handleBlur,onChange:s=>{const a=s.target.value;if(o.setFieldValue("store_name",a),a&&a.trim()!==""){const p=E(a);o.setFieldValue("domain_store",`${p}.${i}`)}},isInvalid:!!(o.errors.store_name&&o.touched.store_name),style:{borderColor:o.errors.store_name&&o.touched.store_name?"#ced4da":void 0,backgroundImage:o.errors.store_name&&o.touched.store_name?"none":void 0}}),o.errors.store_name&&o.touched.store_name?e.jsx(t.Control.Feedback,{type:"invalid",style:{display:"block"},children:o.errors.store_name}):null]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs(t.Label,{className:"form-label",htmlFor:"domain-store",children:[r("Domain store")," ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"position-relative auth-store-name-inputgroup",children:[e.jsx(t.Control,{type:"text",className:"form-control pe-5 domain-store-input",placeholder:r("Enter your domain store"),id:"domain-store",name:"domain_store",value:o.values.domain_store,onChange:s=>{let a=s.target.value.replace(new RegExp(`\\.?${i.replace(/\./g,"\\.")}$`,"i"),"");a=a.replace(/^\.+/,""),o.setFieldValue("domain_store",a)},onBlur:s=>{o.handleBlur(s);let a=o.values.domain_store.trim();a=a.replace(/^\.+/,""),a&&!a.toLowerCase().endsWith(i)&&o.setFieldValue("domain_store",`${a}.${i}`)},onFocus:()=>{const s=o.values.domain_store;let a=s.replace(new RegExp(`\\.?${i.replace(/\./g,"\\.")}$`,"i"),"");a=a.replace(/^\.+/,""),a!==s&&o.setFieldValue("domain_store",a)},isInvalid:!!(o.errors.domain_store&&o.touched.domain_store),style:{borderColor:o.errors.domain_store&&o.touched.domain_store?"#ced4da":void 0,backgroundImage:o.errors.domain_store&&o.touched.domain_store?"none":void 0}}),o.errors.domain_store&&o.touched.domain_store?e.jsx(t.Control.Feedback,{type:"invalid",style:{display:"block"},children:o.errors.domain_store}):null]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(t.Label,{className:"form-label",htmlFor:"password-input",children:r("Password")}),e.jsxs("div",{className:"position-relative auth-pass-inputgroup",children:[e.jsx(t.Control,{type:l?"text":"password",className:"form-control pe-5 password-input",placeholder:r("Enter your password"),id:"password-input",name:"password",value:o.values.password,onBlur:o.handleBlur,onChange:o.handleChange,isInvalid:!!(o.errors.password&&o.touched.password),style:{borderColor:o.errors.password&&o.touched.password?"#ced4da":void 0,backgroundImage:o.errors.password&&o.touched.password?"none":void 0}}),o.errors.password&&o.touched.password?e.jsx(t.Control.Feedback,{type:"invalid",style:{display:"block"},children:o.errors.password}):null,e.jsx(N,{variant:"link",onClick:()=>h(!l),className:"position-absolute end-0 top-0 text-decoration-none text-muted password-addon material-shadow-none",type:"button",id:"password-addon",children:e.jsx("i",{className:"ri-eye-fill align-middle"})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(t.Label,{className:"form-label",htmlFor:"confirm-password-input",children:r("Confirm password")}),e.jsxs("div",{className:"position-relative auth-pass-inputgroup",children:[e.jsx(t.Control,{type:y?"text":"password",className:"form-control pe-5 password-input",placeholder:r("Enter your password"),id:"confirm-password-input",name:"confirm_password",value:o.values.confirm_password,onBlur:o.handleBlur,onChange:o.handleChange,isInvalid:!!(o.errors.confirm_password&&o.touched.confirm_password),style:{borderColor:o.errors.confirm_password&&o.touched.confirm_password?"#ced4da":void 0,backgroundImage:o.errors.confirm_password&&o.touched.confirm_password?"none":void 0}}),o.errors.confirm_password&&o.touched.confirm_password?e.jsx(t.Control.Feedback,{type:"invalid",style:{display:"block"},children:o.errors.confirm_password}):null,e.jsx(N,{variant:"link",onClick:()=>S(!y),className:"position-absolute end-0 top-0 text-decoration-none text-muted confirm-password-addon material-shadow-none",type:"button",id:"confirm-password-addon",children:e.jsx("i",{className:"ri-eye-fill align-middle"})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",id:"agree-terms",checked:g,onChange:s=>I(s.target.checked),className:"form-check-input"}),e.jsxs(t.Label,{htmlFor:"agree-terms",className:"form-check-label fs-12 text-muted fst-italic",children:[r("By registering you agree to the MMO Store"),e.jsx(v,{href:"#",className:"text-primary text-decoration-underline fst-normal fw-medium ms-1",children:r("Terms of Use")})]})]})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"btn btn-success w-100",type:"submit",disabled:x||!g,style:{opacity:!g&&!x?.6:1,cursor:!g&&!x?"not-allowed":"pointer"},children:r("Sign up store")})})]})]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("a",{href:route("home.login"),children:[e.jsx("i",{className:"ri-arrow-left-line"})," ",r("Back to login")]})})]})})]})})]}),x&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0,0,0,0.45)",zIndex:2e3},children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"spinner-border text-light",role:"status",style:{width:48,height:48},children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("div",{className:"mt-3 fw-medium",children:r("Processing")})]})})]})}export{ce as default};
