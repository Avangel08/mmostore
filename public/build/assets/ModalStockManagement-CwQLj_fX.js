import{R as te,d as O,X as Ve,A as fe,j as i}from"./ContextMenuProvider-usnajQ6R.js";import{u as Ge,c as We,a as Ce,e as qe}from"./index.esm-yEJs_RtN.js";import{S as ze}from"./react-select.esm-BubforHt.js";import{T as Ze}from"./TableWithContextMenu-B5BWV_lJ.js";import{s as re}from"./showToast-C9UhoaJD.js";import{c as He}from"./sweetAlert-BmVWMoL6.js";import{u as Xe}from"./useTranslation-BUedCCV-.js";import{O as xe,T as be}from"./OverlayTrigger-DXBBcaHb.js";import{B as J}from"./Button-HjW_qziF.js";import{M as oe}from"./Modal-wHSNzaX5.js";import{R as de}from"./Row-0mC72auA.js";import{C as se}from"./Col-Byysuf2a.js";import{F as G}from"./Form-BmtQJgIo.js";import"./isSymbol-CYvIzdD2.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";import"./setPrototypeOf-B4fUID9J.js";import"./extends-CF3RwP-h.js";import"./inherits-B2gPeQio.js";import"./index-BDAun4bV.js";import"./ThemeProvider-NhHh1_Vu.js";import"./Card-DDnVD3ZC.js";import"./CardHeaderContext-9EfsTDTo.js";import"./divWithClassName-DL48iIhM.js";import"./useQueryParam-D0w_dtLv.js";import"./react-toastify.esm-BkcoO9Cp.js";import"./hasClass-B8jBSeDe.js";import"./TransitionWrapper-9SGRw7Ds.js";import"./NoopTransition-DY-Lx7_4.js";import"./useEventCallback-BuOYZU2s.js";import"./index-CfCH1Vyb.js";import"./useWillUnmount-BYZOEXcv.js";import"./hook-CyH8MiC4.js";import"./useIsomorphicEffect-CPvSt3iT.js";import"./useEventCallback-CP9mcpln.js";import"./Fade-DrwbzoMt.js";import"./Button-CkFgfrL1.js";import"./AbstractModalHeader-BIGva5e-.js";import"./DataKey-DjdvojM5.js";import"./CloseButton-CQGF4qQg.js";function Te(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a}var le;(function(e){e.event="event",e.props="prop"})(le||(le={}));function X(){}function Je(e){var t,a=void 0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t&&n.length===t.length&&n.every(function(o,u){return o===t[u]})||(t=n,a=e.apply(void 0,n)),a}}function ue(e){return!!(e||"").match(/\d/)}function ae(e){return e==null}function Qe(e){return typeof e=="number"&&isNaN(e)}function Ae(e){return ae(e)||Qe(e)||typeof e=="number"&&!isFinite(e)}function Pe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Ye(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function er(e,t,a){var n=Ye(a),r=e.search(/[1-9]/);return r=r===-1?e.length:r,e.substring(0,r)+e.substring(r,e.length).replace(n,"$1"+t)}function rr(e){var t=O.useRef(e);t.current=e;var a=O.useRef(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t.current.apply(t,n)});return a.current}function Ne(e,t){t===void 0&&(t=!0);var a=e[0]==="-",n=a&&t;e=e.replace("-","");var r=e.split("."),o=r[0],u=r[1]||"";return{beforeDecimal:o,afterDecimal:u,hasNegation:a,addNegation:n}}function tr(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var a=e.split("."),n=a[0].replace(/^0+/,"")||"0",r=a[1]||"";return(t?"-":"")+n+(r?"."+r:"")}function Be(e,t,a){for(var n="",r=a?"0":"",o=0;o<=t-1;o++)n+=e[o]||r;return n}function je(e,t){return Array(t+1).join(e)}function Fe(e){var t=e+"",a=t[0]==="-"?"-":"";a&&(t=t.substring(1));var n=t.split(/[eE]/g),r=n[0],o=n[1];if(o=Number(o),!o)return a+r;r=r.replace(".","");var u=1+o,N=r.length;return u<0?r="0."+je("0",Math.abs(u))+r:u>=N?r=r+je("0",u-N):r=(r.substring(0,u)||"0")+"."+r.substring(u),a+r}function Ie(e,t,a){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||a)&&t,r=Ne(e),o=r.beforeDecimal,u=r.afterDecimal,N=r.hasNegation,b=parseFloat("0."+(u||"0")),j=u.length<=t?"0."+u:b.toFixed(t),C=j.split("."),p=o;o&&Number(C[0])&&(p=o.split("").reverse().reduce(function(c,D,m){return c.length>m?(Number(c[0])+Number(D)).toString()+c.substring(1,c.length):D+c},C[0]));var S=Be(C[1]||"",t,a),y=N?"-":"",f=n?".":"";return""+y+p+f+S}function Q(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",t),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Re=Je(function(e,t){for(var a=0,n=0,r=e.length,o=t.length;e[a]===t[a]&&a<r;)a++;for(;e[r-1-n]===t[o-1-n]&&o-n>a&&r-n>a;)n++;return{from:{start:a,end:r-n},to:{start:a,end:o-n}}}),ar=function(e,t){var a=Math.min(e.selectionStart,t);return{from:{start:a,end:e.selectionEnd},to:{start:a,end:t}}};function nr(e,t,a){return Math.min(Math.max(e,t),a)}function Se(e){return Math.max(e.selectionStart,e.selectionEnd)}function ir(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function or(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function sr(e){var t=e.currentValue,a=e.formattedValue,n=e.currentValueIndex,r=e.formattedValueIndex;return t[n]===a[r]}function lr(e,t,a,n,r,o,u){u===void 0&&(u=sr);var N=r.findIndex(function(d){return d}),b=e.slice(0,N);!t&&!a.startsWith(b)&&(t=b,a=b+a,n=n+b.length);for(var j=a.length,C=e.length,p={},S=new Array(j),y=0;y<j;y++){S[y]=-1;for(var f=0,c=C;f<c;f++){var D=u({currentValue:a,lastValue:t,formattedValue:e,currentValueIndex:y,formattedValueIndex:f});if(D&&p[f]!==!0){S[y]=f,p[f]=!0;break}}}for(var m=n;m<j&&(S[m]===-1||!o(a[m]));)m++;var M=m===j||S[m]===-1?C:S[m];for(m=n-1;m>0&&S[m]===-1;)m--;var _=m===-1||S[m]===-1?0:S[m]+1;return _>M?M:n-_<M-n?_:M}function we(e,t,a,n){var r=e.length;if(t=nr(t,0,r),n==="left"){for(;t>=0&&!a[t];)t--;t===-1&&(t=a.indexOf(!0))}else{for(;t<=r&&!a[t];)t++;t>r&&(t=a.lastIndexOf(!0))}return t===-1&&(t=r),t}function ur(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),a=0,n=t.length;a<n;a++)t[a]=!!(ue(e[a])||ue(e[a-1]));return t}function ke(e,t,a,n,r,o){o===void 0&&(o=X);var u=rr(function(f,c){var D,m;return Ae(f)?(m="",D=""):typeof f=="number"||c?(m=typeof f=="number"?Fe(f):f,D=n(m)):(m=r(f,void 0),D=n(m)),{formattedValue:D,numAsString:m}}),N=O.useState(function(){return u(ae(e)?t:e,a)}),b=N[0],j=N[1],C=function(f,c){f.formattedValue!==b.formattedValue&&j({formattedValue:f.formattedValue,numAsString:f.value}),o(f,c)},p=e,S=a;ae(e)&&(p=b.numAsString,S=!0);var y=u(p,S);return O.useMemo(function(){j(y)},[y.formattedValue]),[b,C]}function cr(e){return e.replace(/[^0-9]/g,"")}function fr(e){return e}function dr(e){var t=e.type;t===void 0&&(t="text");var a=e.displayType;a===void 0&&(a="input");var n=e.customInput,r=e.renderText,o=e.getInputRef,u=e.format;u===void 0&&(u=fr);var N=e.removeFormatting;N===void 0&&(N=cr);var b=e.defaultValue,j=e.valueIsNumericString,C=e.onValueChange,p=e.isAllowed,S=e.onChange;S===void 0&&(S=X);var y=e.onKeyDown;y===void 0&&(y=X);var f=e.onMouseUp;f===void 0&&(f=X);var c=e.onFocus;c===void 0&&(c=X);var D=e.onBlur;D===void 0&&(D=X);var m=e.value,M=e.getCaretBoundary;M===void 0&&(M=ur);var _=e.isValidInputCharacter;_===void 0&&(_=ue);var d=e.isCharacterSame,x=Te(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),E=ke(m,b,!!j,u,N,C),w=E[0],V=w.formattedValue,R=w.numAsString,K=E[1],U=O.useRef(),q=O.useRef({formattedValue:V,numAsString:R}),z=function(s,l){q.current={formattedValue:s.formattedValue,numAsString:s.value},K(s,l)},Y=O.useState(!1),ne=Y[0],h=Y[1],v=O.useRef(null),T=O.useRef({setCaretTimeout:null,focusTimeout:null});O.useEffect(function(){return h(!0),function(){clearTimeout(T.current.setCaretTimeout),clearTimeout(T.current.focusTimeout)}},[]);var F=u,k=function(s,l){var g=parseFloat(l);return{formattedValue:s,value:l,floatValue:isNaN(g)?void 0:g}},B=function(s,l,g){s.selectionStart===0&&s.selectionEnd===s.value.length||(Q(s,l),T.current.setCaretTimeout=setTimeout(function(){s.value===g&&s.selectionStart!==l&&Q(s,l)},0))},L=function(s,l,g){return we(s,l,M(s),g)},ee=function(s,l,g){var A=M(l),$=lr(l,V,s,g,A,_,d);return $=we(l,$,A),$},me=function(s){var l=s.formattedValue;l===void 0&&(l="");var g=s.input,A=s.source,$=s.event,P=s.numAsString,I;if(g){var W=s.inputValue||g.value,Z=Se(g);g.value=l,I=ee(W,l,Z),I!==void 0&&B(g,I,l)}l!==V&&z(k(l,P),{event:$,source:A})};O.useEffect(function(){var s=q.current,l=s.formattedValue,g=s.numAsString;(V!==l||R!==g)&&z(k(V,R),{event:void 0,source:le.props})},[V,R]);var ie=v.current?Se(v.current):void 0,ce=typeof window<"u"?O.useLayoutEffect:O.useEffect;ce(function(){var s=v.current;if(V!==q.current.formattedValue&&s){var l=ee(q.current.formattedValue,V,ie);s.value=V,B(s,l,V)}},[V]);var ge=function(s,l,g){var A=l.target,$=U.current?ar(U.current,A.selectionEnd):Re(V,s),P=Object.assign(Object.assign({},$),{lastValue:V}),I=N(s,P),W=F(I);if(I=N(W,void 0),p&&!p(k(W,I))){var Z=l.target,H=Se(Z),pe=ee(s,V,H);return Z.value=V,B(Z,pe,V),!1}return me({formattedValue:W,numAsString:I,inputValue:s,event:l,source:g,input:l.target}),!0},he=function(s,l){l===void 0&&(l=0);var g=s.selectionStart,A=s.selectionEnd;U.current={selectionStart:g,selectionEnd:A+l}},Oe=function(s){var l=s.target,g=l.value,A=ge(g,s,le.event);A&&S(s),U.current=void 0},Me=function(s){var l=s.target,g=s.key,A=l.selectionStart,$=l.selectionEnd,P=l.value;P===void 0&&(P="");var I;g==="ArrowLeft"||g==="Backspace"?I=Math.max(A-1,0):g==="ArrowRight"?I=Math.min(A+1,P.length):g==="Delete"&&(I=A);var W=0;g==="Delete"&&A===$&&(W=1);var Z=g==="ArrowLeft"||g==="ArrowRight";if(I===void 0||A!==$&&!Z){y(s),he(l,W);return}var H=I;if(Z){var pe=g==="ArrowLeft"?"left":"right";H=L(P,I,pe),H!==I&&s.preventDefault()}else g==="Delete"&&!_(P[I])?H=L(P,I,"right"):g==="Backspace"&&!_(P[I])&&(H=L(P,I,"left"));H!==I&&B(l,H,P),y(s),he(l,W)},_e=function(s){var l=s.target,g=function(){var A=l.selectionStart,$=l.selectionEnd,P=l.value;if(P===void 0&&(P=""),A===$){var I=L(P,A);I!==A&&B(l,I,P)}};g(),requestAnimationFrame(function(){g()}),f(s),he(l)},Le=function(s){s.persist&&s.persist();var l=s.target,g=s.currentTarget;v.current=l,T.current.focusTimeout=setTimeout(function(){var A=l.selectionStart,$=l.selectionEnd,P=l.value;P===void 0&&(P="");var I=L(P,A);I!==A&&!(A===0&&$===P.length)&&B(l,I,P),c(Object.assign(Object.assign({},s),{currentTarget:g}))},0)},Ke=function(s){v.current=null,clearTimeout(T.current.focusTimeout),clearTimeout(T.current.setCaretTimeout),D(s)},$e=ne&&ir()?"numeric":void 0,ye=Object.assign({inputMode:$e},x,{type:t,value:V,onChange:Oe,onKeyDown:Me,onMouseUp:_e,onFocus:Le,onBlur:Ke});if(a==="text")return r?te.createElement(te.Fragment,null,r(V,x)||null):te.createElement("span",Object.assign({},x,{ref:o}),V);if(n){var Ue=n;return te.createElement(Ue,Object.assign({},ye,{ref:o}))}return te.createElement("input",Object.assign({},ye,{ref:o}))}function De(e,t){var a=t.decimalScale,n=t.fixedDecimalScale,r=t.prefix;r===void 0&&(r="");var o=t.suffix;o===void 0&&(o="");var u=t.allowNegative,N=t.thousandsGroupStyle;if(N===void 0&&(N="thousand"),e===""||e==="-")return e;var b=ve(t),j=b.thousandSeparator,C=b.decimalSeparator,p=a!==0&&e.indexOf(".")!==-1||a&&n,S=Ne(e,u),y=S.beforeDecimal,f=S.afterDecimal,c=S.addNegation;return a!==void 0&&(f=Be(f,a,!!n)),j&&(y=er(y,j,N)),r&&(y=r+y),o&&(f=f+o),c&&(y="-"+y),e=y+(p&&C||"")+f,e}function ve(e){var t=e.decimalSeparator;t===void 0&&(t=".");var a=e.thousandSeparator,n=e.allowedDecimalSeparators;return a===!0&&(a=","),n||(n=[t,"."]),{decimalSeparator:t,thousandSeparator:a,allowedDecimalSeparators:n}}function vr(e,t){e===void 0&&(e="");var a=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),r=a.test(e),o=n.test(e);return e=e.replace(/-/g,""),r&&!o&&t&&(e="-"+e),e}function mr(e,t){return new RegExp("(^-)|[0-9]|"+Pe(e),"g")}function gr(e,t,a){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(a!=null&&a.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function hr(e,t,a){var n;t===void 0&&(t=or(e));var r=a.allowNegative,o=a.prefix;o===void 0&&(o="");var u=a.suffix;u===void 0&&(u="");var N=a.decimalScale,b=t.from,j=t.to,C=j.start,p=j.end,S=ve(a),y=S.allowedDecimalSeparators,f=S.decimalSeparator,c=e[p]===f;if(ue(e)&&(e===o||e===u)&&t.lastValue==="")return e;if(p-C===1&&y.indexOf(e[C])!==-1){var D=N===0?"":f;e=e.substring(0,C)+D+e.substring(C+1,e.length)}var m=function(v,T,F){var k=!1,B=!1;o.startsWith("-")?k=!1:v.startsWith("--")?(k=!1,B=!0):u.startsWith("-")&&v.length===u.length?k=!1:v[0]==="-"&&(k=!0);var L=k?1:0;return B&&(L=2),L&&(v=v.substring(L),T-=L,F-=L),{value:v,start:T,end:F,hasNegation:k}},M=m(e,C,p),_=M.hasNegation;n=M,e=n.value,C=n.start,p=n.end;var d=m(t.lastValue,b.start,b.end),x=d.start,E=d.end,w=d.value,V=e.substring(C,p);e.length&&w.length&&(x>w.length-u.length||E<o.length)&&!(V&&u.startsWith(V))&&(e=w);var R=0;e.startsWith(o)?R+=o.length:C<o.length&&(R=C),e=e.substring(R),p-=R;var K=e.length,U=e.length-u.length;e.endsWith(u)?K=U:(p>U||p>e.length-u.length)&&(K=p),e=e.substring(0,K),e=vr(_?"-"+e:e,r),e=(e.match(mr(f))||[]).join("");var q=e.indexOf(f);e=e.replace(new RegExp(Pe(f),"g"),function(v,T){return T===q?".":""});var z=Ne(e,r),Y=z.beforeDecimal,ne=z.afterDecimal,h=z.addNegation;return j.end-j.start<b.end-b.start&&Y===""&&c&&!parseFloat(ne)&&(e=h?"-":""),e}function pr(e,t){var a=t.prefix;a===void 0&&(a="");var n=t.suffix;n===void 0&&(n="");var r=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";r.fill(!1,0,a.length+(o?1:0));var u=e.length;return r.fill(!1,u-n.length+1,u+1),r}function xr(e){var t=ve(e),a=t.thousandSeparator,n=t.decimalSeparator,r=e.prefix;r===void 0&&(r="");var o=e.allowNegative;if(o===void 0&&(o=!0),a===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+a+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return r.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+r+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function br(e){e=xr(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,a=e.allowNegative,n=e.allowLeadingZeros,r=e.onKeyDown;r===void 0&&(r=X);var o=e.onBlur;o===void 0&&(o=X);var u=e.thousandSeparator,N=e.decimalScale,b=e.fixedDecimalScale,j=e.prefix;j===void 0&&(j="");var C=e.defaultValue,p=e.value,S=e.valueIsNumericString,y=e.onValueChange,f=Te(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),c=ve(e),D=c.decimalSeparator,m=c.allowedDecimalSeparators,M=function(h){return De(h,e)},_=function(h,v){return hr(h,v,e)},d=ae(p)?C:p,x=S??gr(d,j,t);ae(p)?ae(C)||(x=x||typeof C=="number"):x=x||typeof p=="number";var E=function(h){return Ae(h)?h:(typeof h=="number"&&(h=Fe(h)),x&&typeof N=="number"?Ie(h,N,!!b):h)},w=ke(E(p),E(C),!!x,M,_,y),V=w[0],R=V.numAsString,K=V.formattedValue,U=w[1],q=function(h){var v=h.target,T=h.key,F=v.selectionStart,k=v.selectionEnd,B=v.value;if(B===void 0&&(B=""),(T==="Backspace"||T==="Delete")&&k<j.length){h.preventDefault();return}if(F!==k){r(h);return}T==="Backspace"&&B[0]==="-"&&F===j.length+1&&a&&Q(v,1),N&&b&&(T==="Backspace"&&B[F-1]===D?(Q(v,F-1),h.preventDefault()):T==="Delete"&&B[F]===D&&h.preventDefault()),m!=null&&m.includes(T)&&B[F]===D&&Q(v,F+1);var L=u===!0?",":u;T==="Backspace"&&B[F-1]===L&&Q(v,F-1),T==="Delete"&&B[F]===L&&Q(v,F+1),r(h)},z=function(h){var v=R;if(v.match(/\d/g)||(v=""),n||(v=tr(v)),b&&N&&(v=Ie(v,N,b)),v!==R){var T=De(v,e);U({formattedValue:T,value:v,floatValue:parseFloat(v)},{event:h,source:le.event})}o(h)},Y=function(h){return h===D?!0:ue(h)},ne=function(h){var v=h.currentValue,T=h.lastValue,F=h.formattedValue,k=h.currentValueIndex,B=h.formattedValueIndex,L=v[k],ee=F[B],me=Re(T,v),ie=me.to,ce=function(ge){return _(ge).indexOf(".")+j.length};return p===0&&b&&N&&v[ie.start]===D&&ce(v)<k&&ce(F)>B?!1:k>=ie.start&&k<ie.end&&m&&m.includes(L)&&ee===D?!0:L===ee};return Object.assign(Object.assign({},f),{value:K,valueIsNumericString:!1,isValidInputCharacter:Y,isCharacterSame:ne,onValueChange:U,format:M,removeFormatting:_,getCaretBoundary:function(h){return pr(h,e)},onKeyDown:q,onBlur:z})}function Ee(e){var t=br(e);return te.createElement(dr,Object.assign({},t))}const it=({show:e,onHide:t,productId:a,productName:n})=>{const{t:r}=Xe(),o=Ve().props.errors,[u,N]=O.useState(!1),[b,j]=O.useState(null),{subProduct:C}=Ve().props,p=(d,x,E)=>{a&&fe.reload({only:["subProduct"],replace:!0,data:{product_id:a,subProductPage:d,subProductPerPage:x,...E}})};O.useEffect(()=>{e&&a&&p()},[e,a]);const S=50,y=999999999,f=[{value:"ACTIVE",label:r("Active")},{value:"INACTIVE",label:r("Inactive")}],c=Ge({initialValues:{subProductName:"",price:"",status:"ACTIVE"},validationSchema:We({subProductName:Ce().max(S,`Must be ${S} characters or less`).required(r("Please enter item name")),price:qe().positive(r("Price must be positive")).max(y,`Price must be less than ${y}`).required(r("Please enter price")),status:Ce().required(r("Please select status"))}),onSubmit:d=>{if(!a){re(r("Product ID is required"),"error");return}const x=u&&b?route("seller.sub-product.update",{id:b==null?void 0:b.id}):route("seller.sub-product.store");fe[u&&b?"put":"post"](x,{...d,productId:a},{replace:!0,onSuccess:w=>{var V,R,K,U;if((R=(V=w==null?void 0:w.props)==null?void 0:V.message)!=null&&R.error){re(r(w.props.message.error),"error");return}(U=(K=w.props)==null?void 0:K.message)!=null&&U.success&&(re(r(w.props.message.success),"success"),u&&b?m():c.resetForm())}})}});O.useEffect(()=>{c.setErrors(o||{})},[o]);const D=d=>{N(!0),j(d),c.setValues({subProductName:d.name||"",price:d.price||"",status:d.status||"ACTIVE"})},m=()=>{N(!1),j(null),c.resetForm()},M=async d=>{await He({title:r("Delete this sub-product?"),text:r("Once deleted, you will not be able to recover it."),confirmButtonText:r("Delete now"),cancelButtonText:r("Cancel")})&&fe.delete(route("seller.sub-product.destroy",{id:d}),{onSuccess:E=>{var w,V,R,K;if((V=(w=E==null?void 0:E.props)==null?void 0:w.message)!=null&&V.error){re(r(E.props.message.error),"error");return}(K=(R=E.props)==null?void 0:R.message)!=null&&K.success&&re(r(E.props.message.success),"success")},onError:E=>{Object.keys(E).forEach(w=>{re(r(E[w]),"error")})}})},_=O.useMemo(()=>[{header:r("Item name"),cell:d=>i.jsx("span",{className:"fw-semibold",children:d.getValue()}),accessorKey:"name",enableColumnFilter:!1,enableSorting:!0},{header:r("Price"),accessorKey:"price",enableColumnFilter:!1,enableSorting:!0,cell:d=>i.jsx(Ee,{value:d.getValue()||0,displayType:"text",thousandSeparator:".",decimalSeparator:","})},{header:r("Status"),accessorKey:"status",enableColumnFilter:!1,enableSorting:!0,cell:d=>{const x=d.getValue(),E={ACTIVE:"bg-success",INACTIVE:"bg-danger"},w={ACTIVE:"Active",INACTIVE:"Inactive"};return i.jsx("span",{className:`badge ${(E==null?void 0:E[x])||"bg-dark"} fs-6 fw-medium`,children:r((w==null?void 0:w[x])||"Unknown")})}},{header:r("Stock"),accessorKey:"quantity",enableColumnFilter:!1,enableSorting:!0,cell:d=>i.jsx("span",{children:d.getValue()??0})},{header:r("Actions"),cell:d=>{const x=d.row.original;return i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(xe,{placement:"top",overlay:i.jsx(be,{children:r("Add account")}),children:i.jsx(J,{size:"sm",variant:"outline-success",onClick:()=>{x!=null&&x.id&&fe.get(route("seller.account.edit",{id:x==null?void 0:x.id}))},children:i.jsx("i",{className:"ri-add-line"})})}),i.jsx(xe,{placement:"top",overlay:i.jsx(be,{children:r("Edit")}),children:i.jsx(J,{size:"sm",variant:"outline-info",onClick:()=>D(x),children:i.jsx("i",{className:"ri-pencil-line"})})}),i.jsx(xe,{placement:"top",overlay:i.jsx(be,{children:r("Delete")}),children:i.jsx(J,{variant:"outline-danger",size:"sm",onClick:()=>M(x==null?void 0:x.id),children:i.jsx("i",{className:"ri-delete-bin-fill"})})})]})},id:"actions",enableSorting:!1}],[r,C]);return i.jsxs(oe,{show:e,onHide:()=>{m(),t()},centered:!0,size:"xl",backdrop:"static",children:[i.jsx(oe.Header,{closeButton:!0,children:i.jsx(oe.Title,{children:r("Stock Management")})}),i.jsxs(oe.Body,{children:[i.jsx("div",{className:"mb-4",children:i.jsx(de,{children:i.jsx(se,{children:i.jsxs("div",{className:"d-flex items-center gap-2",children:[i.jsxs("span",{className:"fw-bold",children:[r("Product name"),":"]}),i.jsx("span",{children:n??""})]})})})}),i.jsx("div",{className:"mb-5",children:i.jsxs(G,{onSubmit:c.handleSubmit,noValidate:!0,children:[i.jsxs(de,{children:[i.jsx(se,{md:6,children:i.jsxs(G.Group,{className:"mb-3",controlId:"subProductName",children:[i.jsxs(G.Label,{children:[r("Item name")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(G.Control,{type:"text",placeholder:r("Enter item name"),maxLength:S,onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.subProductName,isInvalid:!!(c.touched.subProductName&&c.errors.subProductName)}),i.jsx(G.Control.Feedback,{type:"invalid",children:c.errors.subProductName})]})}),i.jsx(se,{md:6,children:i.jsxs(G.Group,{className:"mb-3",controlId:"price",children:[i.jsxs(G.Label,{children:[r("Price")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(Ee,{customInput:G.Control,decimalSeparator:",",placeholder:r("Enter price"),decimalScale:2,fixedDecimalScale:!1,allowNegative:!1,isAllowed:d=>{const{floatValue:x}=d;return x===void 0||x<=y},onValueChange:d=>{c.setFieldValue("price",d.floatValue||"")},onBlur:c.handleBlur,value:c.values.price,isInvalid:!!(c.touched.price&&c.errors.price)}),i.jsx(G.Control.Feedback,{type:"invalid",children:c.errors.price})]})})]}),u&&i.jsx(de,{children:i.jsx(se,{md:6,children:i.jsxs(G.Group,{className:"mb-3",controlId:"status",children:[i.jsxs(G.Label,{children:[r("Status")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ze,{options:f,value:f.find(d=>d.value===c.values.status),onChange:d=>{c.setFieldValue("status",(d==null?void 0:d.value)||"ACTIVE")},placeholder:r("Select status"),isClearable:!1,isSearchable:!1,className:c.touched.status&&c.errors.status?"is-invalid":""}),c.touched.status&&c.errors.status&&i.jsx("div",{className:"invalid-feedback d-block",children:c.errors.status})]})})}),i.jsx(de,{children:i.jsx(se,{md:6,className:"d-flex align-items-center gap-2",children:u?i.jsxs(i.Fragment,{children:[i.jsxs(J,{variant:"primary",type:"submit",children:[i.jsx("i",{className:"ri-save-line align-bottom me-1"}),r("Update")]}),i.jsxs(J,{variant:"secondary",onClick:m,children:[i.jsx("i",{className:"ri-close-line align-bottom me-1"}),r("Cancel")]})]}):i.jsxs(J,{variant:"primary",type:"submit",children:[i.jsx("i",{className:"ri-add-line align-bottom me-1"}),r("Add")]})})})]})}),!u&&i.jsx("div",{className:"mb-4 px-3",children:i.jsx(Ze,{columns:_,data:C,divClass:"table-responsive table-card mb-3",tableClass:"table align-middle table-nowrap mb-0",theadClass:"table-light",enableContextMenu:!1,isPaginateTable:!0,onReloadTable:p,keyPageParam:"subProductPage",keyPerPageParam:"subProductPerPage"})})]}),i.jsx(oe.Footer,{children:i.jsx(J,{variant:"light",onClick:()=>{m(),t()},children:r("Close")})})]})};export{it as ModalStockManagement};
